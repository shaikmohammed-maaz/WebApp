(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var yd={exports:{}},ba={},vd={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function oE(){if(Ig)return Ae;Ig=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,z={};function F(x,Q,le){this.props=x,this.context=Q,this.refs=z,this.updater=le||b}F.prototype.isReactComponent={},F.prototype.setState=function(x,Q){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,Q,"setState")},F.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function q(){}q.prototype=F.prototype;function G(x,Q,le){this.props=x,this.context=Q,this.refs=z,this.updater=le||b}var te=G.prototype=new q;te.constructor=G,N(te,F.prototype),te.isPureReactComponent=!0;var ie=Array.isArray,_e=Object.prototype.hasOwnProperty,de={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function C(x,Q,le){var ye,Ce={},Ve=null,be=null;if(Q!=null)for(ye in Q.ref!==void 0&&(be=Q.ref),Q.key!==void 0&&(Ve=""+Q.key),Q)_e.call(Q,ye)&&!O.hasOwnProperty(ye)&&(Ce[ye]=Q[ye]);var Le=arguments.length-2;if(Le===1)Ce.children=le;else if(1<Le){for(var Me=Array(Le),Pt=0;Pt<Le;Pt++)Me[Pt]=arguments[Pt+2];Ce.children=Me}if(x&&x.defaultProps)for(ye in Le=x.defaultProps,Le)Ce[ye]===void 0&&(Ce[ye]=Le[ye]);return{$$typeof:r,type:x,key:Ve,ref:be,props:Ce,_owner:de.current}}function A(x,Q){return{$$typeof:r,type:x.type,key:Q,ref:x.ref,props:x.props,_owner:x._owner}}function D(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function L(x){var Q={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(le){return Q[le]})}var M=/\/+/g;function k(x,Q){return typeof x=="object"&&x!==null&&x.key!=null?L(""+x.key):Q.toString(36)}function tt(x,Q,le,ye,Ce){var Ve=typeof x;(Ve==="undefined"||Ve==="boolean")&&(x=null);var be=!1;if(x===null)be=!0;else switch(Ve){case"string":case"number":be=!0;break;case"object":switch(x.$$typeof){case r:case e:be=!0}}if(be)return be=x,Ce=Ce(be),x=ye===""?"."+k(be,0):ye,ie(Ce)?(le="",x!=null&&(le=x.replace(M,"$&/")+"/"),tt(Ce,Q,le,"",function(Pt){return Pt})):Ce!=null&&(D(Ce)&&(Ce=A(Ce,le+(!Ce.key||be&&be.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+x)),Q.push(Ce)),1;if(be=0,ye=ye===""?".":ye+":",ie(x))for(var Le=0;Le<x.length;Le++){Ve=x[Le];var Me=ye+k(Ve,Le);be+=tt(Ve,Q,le,Me,Ce)}else if(Me=I(x),typeof Me=="function")for(x=Me.call(x),Le=0;!(Ve=x.next()).done;)Ve=Ve.value,Me=ye+k(Ve,Le++),be+=tt(Ve,Q,le,Me,Ce);else if(Ve==="object")throw Q=String(x),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return be}function kt(x,Q,le){if(x==null)return x;var ye=[],Ce=0;return tt(x,ye,"","",function(Ve){return Q.call(le,Ve,Ce++)}),ye}function xt(x){if(x._status===-1){var Q=x._result;Q=Q(),Q.then(function(le){(x._status===0||x._status===-1)&&(x._status=1,x._result=le)},function(le){(x._status===0||x._status===-1)&&(x._status=2,x._result=le)}),x._status===-1&&(x._status=0,x._result=Q)}if(x._status===1)return x._result.default;throw x._result}var Be={current:null},re={transition:null},fe={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:re,ReactCurrentOwner:de};return Ae.Children={map:kt,forEach:function(x,Q,le){kt(x,function(){Q.apply(this,arguments)},le)},count:function(x){var Q=0;return kt(x,function(){Q++}),Q},toArray:function(x){return kt(x,function(Q){return Q})||[]},only:function(x){if(!D(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ae.Component=F,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=G,Ae.StrictMode=s,Ae.Suspense=m,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ae.cloneElement=function(x,Q,le){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var ye=N({},x.props),Ce=x.key,Ve=x.ref,be=x._owner;if(Q!=null){if(Q.ref!==void 0&&(Ve=Q.ref,be=de.current),Q.key!==void 0&&(Ce=""+Q.key),x.type&&x.type.defaultProps)var Le=x.type.defaultProps;for(Me in Q)_e.call(Q,Me)&&!O.hasOwnProperty(Me)&&(ye[Me]=Q[Me]===void 0&&Le!==void 0?Le[Me]:Q[Me])}var Me=arguments.length-2;if(Me===1)ye.children=le;else if(1<Me){Le=Array(Me);for(var Pt=0;Pt<Me;Pt++)Le[Pt]=arguments[Pt+2];ye.children=Le}return{$$typeof:r,type:x.type,key:Ce,ref:Ve,props:ye,_owner:be}},Ae.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:l,_context:x},x.Consumer=x},Ae.createElement=C,Ae.createFactory=function(x){var Q=C.bind(null,x);return Q.type=x,Q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(x){return{$$typeof:f,render:x}},Ae.isValidElement=D,Ae.lazy=function(x){return{$$typeof:E,_payload:{_status:-1,_result:x},_init:xt}},Ae.memo=function(x,Q){return{$$typeof:y,type:x,compare:Q===void 0?null:Q}},Ae.startTransition=function(x){var Q=re.transition;re.transition={};try{x()}finally{re.transition=Q}},Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ae.useCallback=function(x,Q){return Be.current.useCallback(x,Q)},Ae.useContext=function(x){return Be.current.useContext(x)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(x){return Be.current.useDeferredValue(x)},Ae.useEffect=function(x,Q){return Be.current.useEffect(x,Q)},Ae.useId=function(){return Be.current.useId()},Ae.useImperativeHandle=function(x,Q,le){return Be.current.useImperativeHandle(x,Q,le)},Ae.useInsertionEffect=function(x,Q){return Be.current.useInsertionEffect(x,Q)},Ae.useLayoutEffect=function(x,Q){return Be.current.useLayoutEffect(x,Q)},Ae.useMemo=function(x,Q){return Be.current.useMemo(x,Q)},Ae.useReducer=function(x,Q,le){return Be.current.useReducer(x,Q,le)},Ae.useRef=function(x){return Be.current.useRef(x)},Ae.useState=function(x){return Be.current.useState(x)},Ae.useSyncExternalStore=function(x,Q,le){return Be.current.useSyncExternalStore(x,Q,le)},Ae.useTransition=function(){return Be.current.useTransition()},Ae.version="18.2.0",Ae}var Sg;function pf(){return Sg||(Sg=1,vd.exports=oE()),vd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function aE(){if(Cg)return ba;Cg=1;var r=pf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,m,y){var E,S={},I=null,b=null;y!==void 0&&(I=""+y),m.key!==void 0&&(I=""+m.key),m.ref!==void 0&&(b=m.ref);for(E in m)s.call(m,E)&&!l.hasOwnProperty(E)&&(S[E]=m[E]);if(f&&f.defaultProps)for(E in m=f.defaultProps,m)S[E]===void 0&&(S[E]=m[E]);return{$$typeof:e,type:f,key:I,ref:b,props:S,_owner:o.current}}return ba.Fragment=t,ba.jsx=h,ba.jsxs=h,ba}var Rg;function lE(){return Rg||(Rg=1,yd.exports=aE()),yd.exports}var w=lE(),$=pf(),bu={},_d={exports:{}},Xt={},wd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function uE(){return Ag||(Ag=1,function(r){function e(re,fe){var x=re.length;re.push(fe);e:for(;0<x;){var Q=x-1>>>1,le=re[Q];if(0<o(le,fe))re[Q]=fe,re[x]=le,x=Q;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var fe=re[0],x=re.pop();if(x!==fe){re[0]=x;e:for(var Q=0,le=re.length,ye=le>>>1;Q<ye;){var Ce=2*(Q+1)-1,Ve=re[Ce],be=Ce+1,Le=re[be];if(0>o(Ve,x))be<le&&0>o(Le,Ve)?(re[Q]=Le,re[be]=x,Q=be):(re[Q]=Ve,re[Ce]=x,Q=Ce);else if(be<le&&0>o(Le,x))re[Q]=Le,re[be]=x,Q=be;else break e}}return fe}function o(re,fe){var x=re.sortIndex-fe.sortIndex;return x!==0?x:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var m=[],y=[],E=1,S=null,I=3,b=!1,N=!1,z=!1,F=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(re){for(var fe=t(y);fe!==null;){if(fe.callback===null)s(y);else if(fe.startTime<=re)s(y),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(y)}}function ie(re){if(z=!1,te(re),!N)if(t(m)!==null)N=!0,xt(_e);else{var fe=t(y);fe!==null&&Be(ie,fe.startTime-re)}}function _e(re,fe){N=!1,z&&(z=!1,q(C),C=-1),b=!0;var x=I;try{for(te(fe),S=t(m);S!==null&&(!(S.expirationTime>fe)||re&&!L());){var Q=S.callback;if(typeof Q=="function"){S.callback=null,I=S.priorityLevel;var le=Q(S.expirationTime<=fe);fe=r.unstable_now(),typeof le=="function"?S.callback=le:S===t(m)&&s(m),te(fe)}else s(m);S=t(m)}if(S!==null)var ye=!0;else{var Ce=t(y);Ce!==null&&Be(ie,Ce.startTime-fe),ye=!1}return ye}finally{S=null,I=x,b=!1}}var de=!1,O=null,C=-1,A=5,D=-1;function L(){return!(r.unstable_now()-D<A)}function M(){if(O!==null){var re=r.unstable_now();D=re;var fe=!0;try{fe=O(!0,re)}finally{fe?k():(de=!1,O=null)}}else de=!1}var k;if(typeof G=="function")k=function(){G(M)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,kt=tt.port2;tt.port1.onmessage=M,k=function(){kt.postMessage(null)}}else k=function(){F(M,0)};function xt(re){O=re,de||(de=!0,k())}function Be(re,fe){C=F(function(){re(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){N||b||(N=!0,xt(_e))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(re){switch(I){case 1:case 2:case 3:var fe=3;break;default:fe=I}var x=I;I=fe;try{return re()}finally{I=x}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var x=I;I=re;try{return fe()}finally{I=x}},r.unstable_scheduleCallback=function(re,fe,x){var Q=r.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?Q+x:Q):x=Q,re){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=x+le,re={id:E++,callback:fe,priorityLevel:re,startTime:x,expirationTime:le,sortIndex:-1},x>Q?(re.sortIndex=x,e(y,re),t(m)===null&&re===t(y)&&(z?(q(C),C=-1):z=!0,Be(ie,x-Q))):(re.sortIndex=le,e(m,re),N||b||(N=!0,xt(_e))),re},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(re){var fe=I;return function(){var x=I;I=fe;try{return re.apply(this,arguments)}finally{I=x}}}}(Ed)),Ed}var kg;function cE(){return kg||(kg=1,wd.exports=uE()),wd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function hE(){if(xg)return Xt;xg=1;var r=pf(),e=cE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function I(n){return m.call(S,n)?!0:m.call(E,n)?!1:y.test(n)?S[n]=!0:(E[n]=!0,!1)}function b(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function N(n,i,a,c){if(i===null||typeof i>"u"||b(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(n,i,a,c,d,g,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=_}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];F[i]=new z(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(q,G);F[i]=new z(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(q,G);F[i]=new z(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(q,G);F[i]=new z(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,i,a,c){var d=F.hasOwnProperty(i)?F[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(N(i,a,d,c)&&(a=null),c||d===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ie=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),de=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var x=Object.assign,Q;function le(n){if(Q===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Q=i&&i[1]||""}return`
`+Q+n}var ye=!1;function Ce(n,i){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var c=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){c=W}n.call(i.prototype)}else{try{throw Error()}catch(W){c=W}n()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var d=W.stack.split(`
`),g=c.stack.split(`
`),_=d.length-1,R=g.length-1;1<=_&&0<=R&&d[_]!==g[R];)R--;for(;1<=_&&0<=R;_--,R--)if(d[_]!==g[R]){if(_!==1||R!==1)do if(_--,R--,0>R||d[_]!==g[R]){var P=`
`+d[_].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=_&&0<=R);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?le(n):""}function Ve(n){switch(n.tag){case 5:return le(n.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function be(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case de:return"Portal";case A:return"Profiler";case C:return"StrictMode";case k:return"Suspense";case tt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case L:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case kt:return i=n.displayName||null,i!==null?i:be(n.type)||"Memo";case xt:i=n._payload,n=n._init;try{return be(n(i))}catch{}}return null}function Le(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Me(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Pt(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ys(n){var i=Pt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,g.call(this,_)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function lr(n){n._valueTracker||(n._valueTracker=ys(n))}function vs(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Pt(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ni(n,i){var a=i.checked;return x({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function _s(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Me(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Fo(n,i){i=i.checked,i!=null&&te(n,"checked",i,!1)}function Uo(n,i){Fo(n,i);var a=Me(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ws(n,i.type,a):i.hasOwnProperty("defaultValue")&&ws(n,i.type,Me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function vl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ws(n,i,a){(i!=="number"||jr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ur=Array.isArray;function cr(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Me(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Bo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return x({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Es(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ur(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Me(a)}}function Ts(n,i){var a=Me(i.value),c=Me(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function zo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?lt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hr,$o=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=hr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Fr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bi=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(n){bi.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Di[i]=Di[n]})});function Wo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Di.hasOwnProperty(n)&&Di[n]?(""+i).trim():i+"px"}function Ho(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Wo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var qo=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ko(n,i){if(i){if(qo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Go(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=null;function Is(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ss=null,hn=null,zn=null;function Cs(n){if(n=va(n)){if(typeof Ss!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Gl(i),Ss(n.stateNode,n.type,i))}}function $n(n){hn?zn?zn.push(n):zn=[n]:hn=n}function Qo(){if(hn){var n=hn,i=zn;if(zn=hn=null,Cs(n),i)for(n=0;n<i.length;n++)Cs(i[n])}}function Vi(n,i){return n(i)}function Yo(){}var dr=!1;function Xo(n,i,a){if(dr)return n(i,a);dr=!0;try{return Vi(n,i,a)}finally{dr=!1,(hn!==null||zn!==null)&&(Yo(),Qo())}}function nt(n,i){var a=n.stateNode;if(a===null)return null;var c=Gl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Rs=!1;if(f)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Rs=!1}function Li(n,i,a,c,d,g,_,R,P){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(X){this.onError(X)}}var Mi=!1,As=null,In=!1,Jo=null,Hc={onError:function(n){Mi=!0,As=n}};function ks(n,i,a,c,d,g,_,R,P){Mi=!1,As=null,Li.apply(Hc,arguments)}function _l(n,i,a,c,d,g,_,R,P){if(ks.apply(this,arguments),Mi){if(Mi){var W=As;Mi=!1,As=null}else throw Error(t(198));In||(In=!0,Jo=W)}}function Sn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function ji(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Cn(n){if(Sn(n)!==n)throw Error(t(188))}function wl(n){var i=n.alternate;if(!i){if(i=Sn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Cn(d),n;if(g===c)return Cn(d),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var _=!1,R=d.child;R;){if(R===a){_=!0,a=d,c=g;break}if(R===c){_=!0,c=d,a=g;break}R=R.sibling}if(!_){for(R=g.child;R;){if(R===a){_=!0,a=g,c=d;break}if(R===c){_=!0,c=g,a=d;break}R=R.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Zo(n){return n=wl(n),n!==null?xs(n):null}function xs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=xs(n);if(i!==null)return i;n=n.sibling}return null}var Ps=e.unstable_scheduleCallback,ea=e.unstable_cancelCallback,El=e.unstable_shouldYield,qc=e.unstable_requestPaint,$e=e.unstable_now,Tl=e.unstable_getCurrentPriorityLevel,Fi=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,ta=e.unstable_LowPriority,Il=e.unstable_IdlePriority,Ui=null,en=null;function Sl(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ui,n,void 0,(n.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Rl,na=Math.log,Cl=Math.LN2;function Rl(n){return n>>>=0,n===0?32:31-(na(n)/Cl|0)|0}var Ns=64,Ds=4194304;function Br(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Bi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,_=a&268435455;if(_!==0){var R=_&~d;R!==0?c=Br(R):(g&=_,g!==0&&(c=Br(g)))}else _=a&~d,_!==0?c=Br(_):g!==0&&(c=Br(g));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Ft(i),d=1<<a,c|=n[a],i&=~d;return c}function Kc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var _=31-Ft(g),R=1<<_,P=d[_];P===-1?((R&a)===0||(R&c)!==0)&&(d[_]=Kc(R,i)):P<=i&&(n.expiredLanes|=R),g&=~R}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zi(){var n=Ns;return Ns<<=1,(Ns&4194240)===0&&(Ns=64),n}function zr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function $r(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Ft(i),n[i]=a}function ze(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Ft(a),g=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function Wr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Ft(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Pe=0;function Hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Al,bs,kl,xl,Pl,ra=!1,Wn=[],Et=null,Rn=null,An=null,qr=new Map,fn=new Map,Hn=[],Gc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nl(n,i){switch(n){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":qr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(i.pointerId)}}function Wt(n,i,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},i!==null&&(i=va(i),i!==null&&bs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Qc(n,i,a,c,d){switch(i){case"focusin":return Et=Wt(Et,n,i,a,c,d),!0;case"dragenter":return Rn=Wt(Rn,n,i,a,c,d),!0;case"mouseover":return An=Wt(An,n,i,a,c,d),!0;case"pointerover":var g=d.pointerId;return qr.set(g,Wt(qr.get(g)||null,n,i,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,fn.set(g,Wt(fn.get(g)||null,n,i,a,c,d)),!0}return!1}function Dl(n){var i=Ki(n.target);if(i!==null){var a=Sn(i);if(a!==null){if(i=a.tag,i===13){if(i=ji(a),i!==null){n.blockedOn=i,Pl(n.priority,function(){kl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Os(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Oi=c,a.target.dispatchEvent(c),Oi=null}else return i=va(a),i!==null&&bs(i),n.blockedOn=a,!1;i.shift()}return!0}function $i(n,i,a){pr(n)&&a.delete(i)}function bl(){ra=!1,Et!==null&&pr(Et)&&(Et=null),Rn!==null&&pr(Rn)&&(Rn=null),An!==null&&pr(An)&&(An=null),qr.forEach($i),fn.forEach($i)}function kn(n,i){n.blockedOn===i&&(n.blockedOn=null,ra||(ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bl)))}function xn(n){function i(d){return kn(d,n)}if(0<Wn.length){kn(Wn[0],n);for(var a=1;a<Wn.length;a++){var c=Wn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Et!==null&&kn(Et,n),Rn!==null&&kn(Rn,n),An!==null&&kn(An,n),qr.forEach(i),fn.forEach(i),a=0;a<Hn.length;a++)c=Hn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Hn.length&&(a=Hn[0],a.blockedOn===null);)Dl(a),a.blockedOn===null&&Hn.shift()}var mr=ie.ReactCurrentBatchConfig,Kr=!0;function Ke(n,i,a,c){var d=Pe,g=mr.transition;mr.transition=null;try{Pe=1,ia(n,i,a,c)}finally{Pe=d,mr.transition=g}}function Yc(n,i,a,c){var d=Pe,g=mr.transition;mr.transition=null;try{Pe=4,ia(n,i,a,c)}finally{Pe=d,mr.transition=g}}function ia(n,i,a,c){if(Kr){var d=Os(n,i,a,c);if(d===null)ah(n,i,c,Wi,a),Nl(n,c);else if(Qc(d,n,i,a,c))c.stopPropagation();else if(Nl(n,c),i&4&&-1<Gc.indexOf(n)){for(;d!==null;){var g=va(d);if(g!==null&&Al(g),g=Os(n,i,a,c),g===null&&ah(n,i,c,Wi,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else ah(n,i,c,null,a)}}var Wi=null;function Os(n,i,a,c){if(Wi=null,n=Is(c),n=Ki(n),n!==null)if(i=Sn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=ji(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Wi=n,null}function sa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tl()){case Fi:return 1;case Ur:return 4;case dn:case ta:return 16;case Il:return 536870912;default:return 16}default:return 16}}var nn=null,Vs=null,Ht=null;function oa(){if(Ht)return Ht;var n,i=Vs,a=i.length,c,d="value"in nn?nn.value:nn.textContent,g=d.length;for(n=0;n<a&&i[n]===d[n];n++);var _=a-n;for(c=1;c<=_&&i[a-c]===d[g-c];c++);return Ht=d.slice(n,1<c?1-c:void 0)}function Ls(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qn(){return!0}function aa(){return!1}function Tt(n){function i(a,c,d,g,_){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=_,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qn:aa,this.isPropagationStopped=aa,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),i}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ms=Tt(Pn),Kn=x({},Pn,{view:0,detail:0}),Xc=Tt(Kn),js,gr,Gr,Hi=x({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gr&&(Gr&&n.type==="mousemove"?(js=n.screenX-Gr.screenX,gr=n.screenY-Gr.screenY):gr=js=0,Gr=n),js)},movementY:function(n){return"movementY"in n?n.movementY:gr}}),Fs=Tt(Hi),la=x({},Hi,{dataTransfer:0}),Ol=Tt(la),Us=x({},Kn,{relatedTarget:0}),Bs=Tt(Us),Vl=x({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),yr=Tt(Vl),Ll=x({},Pn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ml=Tt(Ll),jl=x({},Pn,{data:0}),ua=Tt(jl),zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ul(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Fl[n])?!!i[n]:!1}function Gn(){return Ul}var u=x({},Kn,{key:function(n){if(n.key){var i=zs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ls(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ut[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(n){return n.type==="keypress"?Ls(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ls(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Tt(u),v=x({},Hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Tt(v),j=x({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn}),H=Tt(j),ne=x({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Tt(ne),ct=x({},Hi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=Tt(ct),gt=[9,13,27,32],st=f&&"CompositionEvent"in window,pn=null;f&&"documentMode"in document&&(pn=document.documentMode);var rn=f&&"TextEvent"in window&&!pn,qi=f&&(!st||pn&&8<pn&&11>=pn),$s=" ",gp=!1;function yp(n,i){switch(n){case"keyup":return gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ws=!1;function rw(n,i){switch(n){case"compositionend":return vp(i);case"keypress":return i.which!==32?null:(gp=!0,$s);case"textInput":return n=i.data,n===$s&&gp?null:n;default:return null}}function iw(n,i){if(Ws)return n==="compositionend"||!st&&yp(n,i)?(n=oa(),Ht=Vs=nn=null,Ws=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qi&&i.locale!=="ko"?null:i.data;default:return null}}var sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!sw[n.type]:i==="textarea"}function wp(n,i,a,c){$n(c),i=Hl(i,"onChange"),0<i.length&&(a=new Ms("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ca=null,ha=null;function ow(n){jp(n,0)}function Bl(n){var i=Qs(n);if(vs(i))return n}function aw(n,i){if(n==="change")return i}var Ep=!1;if(f){var Jc;if(f){var Zc="oninput"in document;if(!Zc){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Zc=typeof Tp.oninput=="function"}Jc=Zc}else Jc=!1;Ep=Jc&&(!document.documentMode||9<document.documentMode)}function Ip(){ca&&(ca.detachEvent("onpropertychange",Sp),ha=ca=null)}function Sp(n){if(n.propertyName==="value"&&Bl(ha)){var i=[];wp(i,ha,n,Is(n)),Xo(ow,i)}}function lw(n,i,a){n==="focusin"?(Ip(),ca=i,ha=a,ca.attachEvent("onpropertychange",Sp)):n==="focusout"&&Ip()}function uw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bl(ha)}function cw(n,i){if(n==="click")return Bl(i)}function hw(n,i){if(n==="input"||n==="change")return Bl(i)}function dw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Nn=typeof Object.is=="function"?Object.is:dw;function da(n,i){if(Nn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!m.call(i,d)||!Nn(n[d],i[d]))return!1}return!0}function Cp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rp(n,i){var a=Cp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cp(a)}}function Ap(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ap(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function kp(){for(var n=window,i=jr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=jr(n.document)}return i}function eh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function fw(n){var i=kp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Ap(a.ownerDocument.documentElement,a)){if(c!==null&&eh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=Rp(a,g);var _=Rp(a,c);d&&_&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var pw=f&&"documentMode"in document&&11>=document.documentMode,Hs=null,th=null,fa=null,nh=!1;function xp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||Hs==null||Hs!==jr(c)||(c=Hs,"selectionStart"in c&&eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),fa&&da(fa,c)||(fa=c,c=Hl(th,"onSelect"),0<c.length&&(i=new Ms("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Hs)))}function zl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var qs={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},rh={},Pp={};f&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function $l(n){if(rh[n])return rh[n];if(!qs[n])return n;var i=qs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pp)return rh[n]=i[a];return n}var Np=$l("animationend"),Dp=$l("animationiteration"),bp=$l("animationstart"),Op=$l("transitionend"),Vp=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,i){Vp.set(n,i),l(i,[n])}for(var ih=0;ih<Lp.length;ih++){var sh=Lp[ih],mw=sh.toLowerCase(),gw=sh[0].toUpperCase()+sh.slice(1);Qr(mw,"on"+gw)}Qr(Np,"onAnimationEnd"),Qr(Dp,"onAnimationIteration"),Qr(bp,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(Op,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yw=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Mp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,_l(c,i,void 0,n),n.currentTarget=null}function jp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var _=c.length-1;0<=_;_--){var R=c[_],P=R.instance,W=R.currentTarget;if(R=R.listener,P!==g&&d.isPropagationStopped())break e;Mp(d,R,W),g=P}else for(_=0;_<c.length;_++){if(R=c[_],P=R.instance,W=R.currentTarget,R=R.listener,P!==g&&d.isPropagationStopped())break e;Mp(d,R,W),g=P}}}if(In)throw n=Jo,In=!1,Jo=null,n}function He(n,i){var a=i[fh];a===void 0&&(a=i[fh]=new Set);var c=n+"__bubble";a.has(c)||(Fp(i,n,2,!1),a.add(c))}function oh(n,i,a){var c=0;i&&(c|=4),Fp(a,n,c,i)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function ma(n){if(!n[Wl]){n[Wl]=!0,s.forEach(function(a){a!=="selectionchange"&&(yw.has(a)||oh(a,!1,n),oh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Wl]||(i[Wl]=!0,oh("selectionchange",!1,i))}}function Fp(n,i,a,c){switch(sa(i)){case 1:var d=Ke;break;case 4:d=Yc;break;default:d=ia}a=d.bind(null,i,a,n),d=void 0,!Rs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function ah(n,i,a,c,d){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;_=_.return}for(;R!==null;){if(_=Ki(R),_===null)return;if(P=_.tag,P===5||P===6){c=g=_;continue e}R=R.parentNode}}c=c.return}Xo(function(){var W=g,X=Is(a),J=[];e:{var Y=Vp.get(n);if(Y!==void 0){var se=Ms,ue=n;switch(n){case"keypress":if(Ls(a)===0)break e;case"keydown":case"keyup":se=p;break;case"focusin":ue="focus",se=Bs;break;case"focusout":ue="blur",se=Bs;break;case"beforeblur":case"afterblur":se=Bs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Ol;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=H;break;case Np:case Dp:case bp:se=yr;break;case Op:se=Ue;break;case"scroll":se=Xc;break;case"wheel":se=Ne;break;case"copy":case"cut":case"paste":se=Ml;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=T}var ce=(i&4)!==0,rt=!ce&&n==="scroll",U=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var V=W,B;V!==null;){B=V;var ee=B.stateNode;if(B.tag===5&&ee!==null&&(B=ee,U!==null&&(ee=nt(V,U),ee!=null&&ce.push(ga(V,ee,B)))),rt)break;V=V.return}0<ce.length&&(Y=new se(Y,ue,null,a,X),J.push({event:Y,listeners:ce}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",Y&&a!==Oi&&(ue=a.relatedTarget||a.fromElement)&&(Ki(ue)||ue[vr]))break e;if((se||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ue=a.relatedTarget||a.toElement,se=W,ue=ue?Ki(ue):null,ue!==null&&(rt=Sn(ue),ue!==rt||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(se=null,ue=W),se!==ue)){if(ce=Fs,ee="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ce=T,ee="onPointerLeave",U="onPointerEnter",V="pointer"),rt=se==null?Y:Qs(se),B=ue==null?Y:Qs(ue),Y=new ce(ee,V+"leave",se,a,X),Y.target=rt,Y.relatedTarget=B,ee=null,Ki(X)===W&&(ce=new ce(U,V+"enter",ue,a,X),ce.target=B,ce.relatedTarget=rt,ee=ce),rt=ee,se&&ue)t:{for(ce=se,U=ue,V=0,B=ce;B;B=Ks(B))V++;for(B=0,ee=U;ee;ee=Ks(ee))B++;for(;0<V-B;)ce=Ks(ce),V--;for(;0<B-V;)U=Ks(U),B--;for(;V--;){if(ce===U||U!==null&&ce===U.alternate)break t;ce=Ks(ce),U=Ks(U)}ce=null}else ce=null;se!==null&&Up(J,Y,se,ce,!1),ue!==null&&rt!==null&&Up(J,rt,ue,ce,!0)}}e:{if(Y=W?Qs(W):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var he=aw;else if(_p(Y))if(Ep)he=hw;else{he=uw;var pe=lw}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(he=cw);if(he&&(he=he(n,W))){wp(J,he,a,X);break e}pe&&pe(n,Y,W),n==="focusout"&&(pe=Y._wrapperState)&&pe.controlled&&Y.type==="number"&&ws(Y,"number",Y.value)}switch(pe=W?Qs(W):window,n){case"focusin":(_p(pe)||pe.contentEditable==="true")&&(Hs=pe,th=W,fa=null);break;case"focusout":fa=th=Hs=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,xp(J,a,X);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":xp(J,a,X)}var me;if(st)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Ws?yp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(qi&&a.locale!=="ko"&&(Ws||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Ws&&(me=oa()):(nn=X,Vs="value"in nn?nn.value:nn.textContent,Ws=!0)),pe=Hl(W,Te),0<pe.length&&(Te=new ua(Te,n,null,a,X),J.push({event:Te,listeners:pe}),me?Te.data=me:(me=vp(a),me!==null&&(Te.data=me)))),(me=rn?rw(n,a):iw(n,a))&&(W=Hl(W,"onBeforeInput"),0<W.length&&(X=new ua("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:W}),X.data=me))}jp(J,i)})}function ga(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Hl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=nt(n,a),g!=null&&c.unshift(ga(n,g,d)),g=nt(n,i),g!=null&&c.push(ga(n,g,d))),n=n.return}return c}function Ks(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Up(n,i,a,c,d){for(var g=i._reactName,_=[];a!==null&&a!==c;){var R=a,P=R.alternate,W=R.stateNode;if(P!==null&&P===c)break;R.tag===5&&W!==null&&(R=W,d?(P=nt(a,g),P!=null&&_.unshift(ga(a,P,R))):d||(P=nt(a,g),P!=null&&_.push(ga(a,P,R)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var vw=/\r\n?/g,_w=/\u0000|\uFFFD/g;function Bp(n){return(typeof n=="string"?n:""+n).replace(vw,`
`).replace(_w,"")}function ql(n,i,a){if(i=Bp(i),Bp(n)!==i&&a)throw Error(t(425))}function Kl(){}var lh=null,uh=null;function ch(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,ww=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Ew=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(n){return zp.resolve(null).then(n).catch(Tw)}:hh;function Tw(n){setTimeout(function(){throw n})}function dh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),xn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);xn(i)}function Yr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function $p(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Gs,ya="__reactProps$"+Gs,vr="__reactContainer$"+Gs,fh="__reactEvents$"+Gs,Iw="__reactListeners$"+Gs,Sw="__reactHandles$"+Gs;function Ki(n){var i=n[Qn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[vr]||a[Qn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=$p(n);n!==null;){if(a=n[Qn])return a;n=$p(n)}return i}n=a,a=n.parentNode}return null}function va(n){return n=n[Qn]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Qs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Gl(n){return n[ya]||null}var ph=[],Ys=-1;function Xr(n){return{current:n}}function qe(n){0>Ys||(n.current=ph[Ys],ph[Ys]=null,Ys--)}function We(n,i){Ys++,ph[Ys]=n.current,n.current=i}var Jr={},Nt=Xr(Jr),qt=Xr(!1),Gi=Jr;function Xs(n,i){var a=n.type.contextTypes;if(!a)return Jr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Kt(n){return n=n.childContextTypes,n!=null}function Ql(){qe(qt),qe(Nt)}function Wp(n,i,a){if(Nt.current!==Jr)throw Error(t(168));We(Nt,i),We(qt,a)}function Hp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Le(n)||"Unknown",d));return x({},a,c)}function Yl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,Gi=Nt.current,We(Nt,n),We(qt,qt.current),!0}function qp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Hp(n,i,Gi),c.__reactInternalMemoizedMergedChildContext=n,qe(qt),qe(Nt),We(Nt,n)):qe(qt),We(qt,a)}var _r=null,Xl=!1,mh=!1;function Kp(n){_r===null?_r=[n]:_r.push(n)}function Cw(n){Xl=!0,Kp(n)}function Zr(){if(!mh&&_r!==null){mh=!0;var n=0,i=Pe;try{var a=_r;for(Pe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}_r=null,Xl=!1}catch(d){throw _r!==null&&(_r=_r.slice(n+1)),Ps(Fi,Zr),d}finally{Pe=i,mh=!1}}return null}var Js=[],Zs=0,Jl=null,Zl=0,mn=[],gn=0,Qi=null,wr=1,Er="";function Yi(n,i){Js[Zs++]=Zl,Js[Zs++]=Jl,Jl=n,Zl=i}function Gp(n,i,a){mn[gn++]=wr,mn[gn++]=Er,mn[gn++]=Qi,Qi=n;var c=wr;n=Er;var d=32-Ft(c)-1;c&=~(1<<d),a+=1;var g=32-Ft(i)+d;if(30<g){var _=d-d%5;g=(c&(1<<_)-1).toString(32),c>>=_,d-=_,wr=1<<32-Ft(i)+d|a<<d|c,Er=g+n}else wr=1<<g|a<<d|c,Er=n}function gh(n){n.return!==null&&(Yi(n,1),Gp(n,1,0))}function yh(n){for(;n===Jl;)Jl=Js[--Zs],Js[Zs]=null,Zl=Js[--Zs],Js[Zs]=null;for(;n===Qi;)Qi=mn[--gn],mn[gn]=null,Er=mn[--gn],mn[gn]=null,wr=mn[--gn],mn[gn]=null}var sn=null,on=null,Ge=!1,Dn=null;function Qp(n,i){var a=wn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Yp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,sn=n,on=Yr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,sn=n,on=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Qi!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=wn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,sn=n,on=null,!0):!1;default:return!1}}function vh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _h(n){if(Ge){var i=on;if(i){var a=i;if(!Yp(n,i)){if(vh(n))throw Error(t(418));i=Yr(a.nextSibling);var c=sn;i&&Yp(n,i)?Qp(c,a):(n.flags=n.flags&-4097|2,Ge=!1,sn=n)}}else{if(vh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ge=!1,sn=n}}}function Xp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sn=n}function eu(n){if(n!==sn)return!1;if(!Ge)return Xp(n),Ge=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!ch(n.type,n.memoizedProps)),i&&(i=on)){if(vh(n))throw Jp(),Error(t(418));for(;i;)Qp(n,i),i=Yr(i.nextSibling)}if(Xp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){on=Yr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}on=null}}else on=sn?Yr(n.stateNode.nextSibling):null;return!0}function Jp(){for(var n=on;n;)n=Yr(n.nextSibling)}function eo(){on=sn=null,Ge=!1}function wh(n){Dn===null?Dn=[n]:Dn.push(n)}var Rw=ie.ReactCurrentBatchConfig;function bn(n,i){if(n&&n.defaultProps){i=x({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}var tu=Xr(null),nu=null,to=null,Eh=null;function Th(){Eh=to=nu=null}function Ih(n){var i=tu.current;qe(tu),n._currentValue=i}function Sh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function no(n,i){nu=n,Eh=to=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Gt=!0),n.firstContext=null)}function yn(n){var i=n._currentValue;if(Eh!==n)if(n={context:n,memoizedValue:i,next:null},to===null){if(nu===null)throw Error(t(308));to=n,nu.dependencies={lanes:0,firstContext:n}}else to=to.next=n;return i}var Xi=null;function Ch(n){Xi===null?Xi=[n]:Xi.push(n)}function Zp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,Ch(i)):(a.next=d.next,d.next=a),i.interleaved=a,Tr(n,c)}function Tr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ei=!1;function Rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function em(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ir(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ti(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Oe&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,Tr(n,a)}return d=c.interleaved,d===null?(i.next=i,Ch(c)):(i.next=d.next,d.next=i),c.interleaved=i,Tr(n,a)}function ru(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Wr(n,a)}}function tm(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=_:g=g.next=_,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function iu(n,i,a,c){var d=n.updateQueue;ei=!1;var g=d.firstBaseUpdate,_=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var P=R,W=P.next;P.next=null,_===null?g=W:_.next=W,_=P;var X=n.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==_&&(R===null?X.firstBaseUpdate=W:R.next=W,X.lastBaseUpdate=P))}if(g!==null){var J=d.baseState;_=0,X=W=P=null,R=g;do{var Y=R.lane,se=R.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:se,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ue=n,ce=R;switch(Y=i,se=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){J=ue.call(se,J,Y);break e}J=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,Y=typeof ue=="function"?ue.call(se,J,Y):ue,Y==null)break e;J=x({},J,Y);break e;case 2:ei=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[R]:Y.push(R))}else se={eventTime:se,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(W=X=se,P=J):X=X.next=se,_|=Y;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(X===null&&(P=J),d.baseState=P,d.firstBaseUpdate=W,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do _|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);es|=_,n.lanes=_,n.memoizedState=J}}function nm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var rm=new r.Component().refs;function Ah(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:x({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var su={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=zt(),d=si(n),g=Ir(c,d);g.payload=i,a!=null&&(g.callback=a),i=ti(n,g,d),i!==null&&(Ln(i,n,d,c),ru(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=zt(),d=si(n),g=Ir(c,d);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=ti(n,g,d),i!==null&&(Ln(i,n,d,c),ru(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=zt(),c=si(n),d=Ir(a,c);d.tag=2,i!=null&&(d.callback=i),i=ti(n,d,c),i!==null&&(Ln(i,n,c,a),ru(i,n,c))}};function im(n,i,a,c,d,g,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,_):i.prototype&&i.prototype.isPureReactComponent?!da(a,c)||!da(d,g):!0}function sm(n,i,a){var c=!1,d=Jr,g=i.contextType;return typeof g=="object"&&g!==null?g=yn(g):(d=Kt(i)?Gi:Nt.current,c=i.contextTypes,g=(c=c!=null)?Xs(n,d):Jr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=su,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),i}function om(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&su.enqueueReplaceState(i,i.state,null)}function kh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs=rm,Rh(n);var g=i.contextType;typeof g=="object"&&g!==null?d.context=yn(g):(g=Kt(i)?Gi:Nt.current,d.context=Xs(n,g)),d.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Ah(n,i,g,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&su.enqueueReplaceState(d,d.state,null),iu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function _a(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(_){var R=d.refs;R===rm&&(R=d.refs={}),_===null?delete R[g]:R[g]=_},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ou(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function am(n){var i=n._init;return i(n._payload)}function lm(n){function i(U,V){if(n){var B=U.deletions;B===null?(U.deletions=[V],U.flags|=16):B.push(V)}}function a(U,V){if(!n)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function c(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function d(U,V){return U=ai(U,V),U.index=0,U.sibling=null,U}function g(U,V,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<V?(U.flags|=2,V):B):(U.flags|=2,V)):(U.flags|=1048576,V)}function _(U){return n&&U.alternate===null&&(U.flags|=2),U}function R(U,V,B,ee){return V===null||V.tag!==6?(V=hd(B,U.mode,ee),V.return=U,V):(V=d(V,B),V.return=U,V)}function P(U,V,B,ee){var he=B.type;return he===O?X(U,V,B.props.children,ee,B.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&am(he)===V.type)?(ee=d(V,B.props),ee.ref=_a(U,V,B),ee.return=U,ee):(ee=Cu(B.type,B.key,B.props,null,U.mode,ee),ee.ref=_a(U,V,B),ee.return=U,ee)}function W(U,V,B,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=dd(B,U.mode,ee),V.return=U,V):(V=d(V,B.children||[]),V.return=U,V)}function X(U,V,B,ee,he){return V===null||V.tag!==7?(V=is(B,U.mode,ee,he),V.return=U,V):(V=d(V,B),V.return=U,V)}function J(U,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=hd(""+V,U.mode,B),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _e:return B=Cu(V.type,V.key,V.props,null,U.mode,B),B.ref=_a(U,null,V),B.return=U,B;case de:return V=dd(V,U.mode,B),V.return=U,V;case xt:var ee=V._init;return J(U,ee(V._payload),B)}if(ur(V)||fe(V))return V=is(V,U.mode,B,null),V.return=U,V;ou(U,V)}return null}function Y(U,V,B,ee){var he=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return he!==null?null:R(U,V,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _e:return B.key===he?P(U,V,B,ee):null;case de:return B.key===he?W(U,V,B,ee):null;case xt:return he=B._init,Y(U,V,he(B._payload),ee)}if(ur(B)||fe(B))return he!==null?null:X(U,V,B,ee,null);ou(U,B)}return null}function se(U,V,B,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return U=U.get(B)||null,R(V,U,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _e:return U=U.get(ee.key===null?B:ee.key)||null,P(V,U,ee,he);case de:return U=U.get(ee.key===null?B:ee.key)||null,W(V,U,ee,he);case xt:var pe=ee._init;return se(U,V,B,pe(ee._payload),he)}if(ur(ee)||fe(ee))return U=U.get(B)||null,X(V,U,ee,he,null);ou(V,ee)}return null}function ue(U,V,B,ee){for(var he=null,pe=null,me=V,Te=V=0,_t=null;me!==null&&Te<B.length;Te++){me.index>Te?(_t=me,me=null):_t=me.sibling;var je=Y(U,me,B[Te],ee);if(je===null){me===null&&(me=_t);break}n&&me&&je.alternate===null&&i(U,me),V=g(je,V,Te),pe===null?he=je:pe.sibling=je,pe=je,me=_t}if(Te===B.length)return a(U,me),Ge&&Yi(U,Te),he;if(me===null){for(;Te<B.length;Te++)me=J(U,B[Te],ee),me!==null&&(V=g(me,V,Te),pe===null?he=me:pe.sibling=me,pe=me);return Ge&&Yi(U,Te),he}for(me=c(U,me);Te<B.length;Te++)_t=se(me,U,Te,B[Te],ee),_t!==null&&(n&&_t.alternate!==null&&me.delete(_t.key===null?Te:_t.key),V=g(_t,V,Te),pe===null?he=_t:pe.sibling=_t,pe=_t);return n&&me.forEach(function(li){return i(U,li)}),Ge&&Yi(U,Te),he}function ce(U,V,B,ee){var he=fe(B);if(typeof he!="function")throw Error(t(150));if(B=he.call(B),B==null)throw Error(t(151));for(var pe=he=null,me=V,Te=V=0,_t=null,je=B.next();me!==null&&!je.done;Te++,je=B.next()){me.index>Te?(_t=me,me=null):_t=me.sibling;var li=Y(U,me,je.value,ee);if(li===null){me===null&&(me=_t);break}n&&me&&li.alternate===null&&i(U,me),V=g(li,V,Te),pe===null?he=li:pe.sibling=li,pe=li,me=_t}if(je.done)return a(U,me),Ge&&Yi(U,Te),he;if(me===null){for(;!je.done;Te++,je=B.next())je=J(U,je.value,ee),je!==null&&(V=g(je,V,Te),pe===null?he=je:pe.sibling=je,pe=je);return Ge&&Yi(U,Te),he}for(me=c(U,me);!je.done;Te++,je=B.next())je=se(me,U,Te,je.value,ee),je!==null&&(n&&je.alternate!==null&&me.delete(je.key===null?Te:je.key),V=g(je,V,Te),pe===null?he=je:pe.sibling=je,pe=je);return n&&me.forEach(function(sE){return i(U,sE)}),Ge&&Yi(U,Te),he}function rt(U,V,B,ee){if(typeof B=="object"&&B!==null&&B.type===O&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case _e:e:{for(var he=B.key,pe=V;pe!==null;){if(pe.key===he){if(he=B.type,he===O){if(pe.tag===7){a(U,pe.sibling),V=d(pe,B.props.children),V.return=U,U=V;break e}}else if(pe.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===xt&&am(he)===pe.type){a(U,pe.sibling),V=d(pe,B.props),V.ref=_a(U,pe,B),V.return=U,U=V;break e}a(U,pe);break}else i(U,pe);pe=pe.sibling}B.type===O?(V=is(B.props.children,U.mode,ee,B.key),V.return=U,U=V):(ee=Cu(B.type,B.key,B.props,null,U.mode,ee),ee.ref=_a(U,V,B),ee.return=U,U=ee)}return _(U);case de:e:{for(pe=B.key;V!==null;){if(V.key===pe)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(U,V.sibling),V=d(V,B.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=dd(B,U.mode,ee),V.return=U,U=V}return _(U);case xt:return pe=B._init,rt(U,V,pe(B._payload),ee)}if(ur(B))return ue(U,V,B,ee);if(fe(B))return ce(U,V,B,ee);ou(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(U,V.sibling),V=d(V,B),V.return=U,U=V):(a(U,V),V=hd(B,U.mode,ee),V.return=U,U=V),_(U)):a(U,V)}return rt}var ro=lm(!0),um=lm(!1),wa={},Yn=Xr(wa),Ea=Xr(wa),Ta=Xr(wa);function Ji(n){if(n===wa)throw Error(t(174));return n}function xh(n,i){switch(We(Ta,i),We(Ea,n),We(Yn,wa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ut(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ut(i,n)}qe(Yn),We(Yn,i)}function io(){qe(Yn),qe(Ea),qe(Ta)}function cm(n){Ji(Ta.current);var i=Ji(Yn.current),a=ut(i,n.type);i!==a&&(We(Ea,n),We(Yn,a))}function Ph(n){Ea.current===n&&(qe(Yn),qe(Ea))}var Ye=Xr(0);function au(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nh=[];function Dh(){for(var n=0;n<Nh.length;n++)Nh[n]._workInProgressVersionPrimary=null;Nh.length=0}var lu=ie.ReactCurrentDispatcher,bh=ie.ReactCurrentBatchConfig,Zi=0,Xe=null,ht=null,yt=null,uu=!1,Ia=!1,Sa=0,Aw=0;function Dt(){throw Error(t(321))}function Oh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Nn(n[a],i[a]))return!1;return!0}function Vh(n,i,a,c,d,g){if(Zi=g,Xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,lu.current=n===null||n.memoizedState===null?Nw:Dw,n=a(c,d),Ia){g=0;do{if(Ia=!1,Sa=0,25<=g)throw Error(t(301));g+=1,yt=ht=null,i.updateQueue=null,lu.current=bw,n=a(c,d)}while(Ia)}if(lu.current=du,i=ht!==null&&ht.next!==null,Zi=0,yt=ht=Xe=null,uu=!1,i)throw Error(t(300));return n}function Lh(){var n=Sa!==0;return Sa=0,n}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Xe.memoizedState=yt=n:yt=yt.next=n,yt}function vn(){if(ht===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=ht.next;var i=yt===null?Xe.memoizedState:yt.next;if(i!==null)yt=i,ht=n;else{if(n===null)throw Error(t(310));ht=n,n={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?Xe.memoizedState=yt=n:yt=yt.next=n}return yt}function Ca(n,i){return typeof i=="function"?i(n):i}function Mh(n){var i=vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=ht,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var _=d.next;d.next=g.next,g.next=_}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var R=_=null,P=null,W=g;do{var X=W.lane;if((Zi&X)===X)P!==null&&(P=P.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:n(c,W.action);else{var J={lane:X,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};P===null?(R=P=J,_=c):P=P.next=J,Xe.lanes|=X,es|=X}W=W.next}while(W!==null&&W!==g);P===null?_=c:P.next=R,Nn(c,i.memoizedState)||(Gt=!0),i.memoizedState=c,i.baseState=_,i.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,Xe.lanes|=g,es|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function jh(n){var i=vn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do g=n(g,_.action),_=_.next;while(_!==d);Nn(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function hm(){}function dm(n,i){var a=Xe,c=vn(),d=i(),g=!Nn(c.memoizedState,d);if(g&&(c.memoizedState=d,Gt=!0),c=c.queue,Fh(mm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||yt!==null&&yt.memoizedState.tag&1){if(a.flags|=2048,Ra(9,pm.bind(null,a,c,d,i),void 0,null),vt===null)throw Error(t(349));(Zi&30)!==0||fm(a,i,d)}return d}function fm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Xe.updateQueue,i===null?(i={lastEffect:null,stores:null},Xe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function pm(n,i,a,c){i.value=a,i.getSnapshot=c,gm(i)&&ym(n)}function mm(n,i,a){return a(function(){gm(i)&&ym(n)})}function gm(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Nn(n,a)}catch{return!0}}function ym(n){var i=Tr(n,1);i!==null&&Ln(i,n,1,-1)}function vm(n){var i=Xn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:n},i.queue=n,n=n.dispatch=Pw.bind(null,Xe,n),[i.memoizedState,n]}function Ra(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Xe.updateQueue,i===null?(i={lastEffect:null,stores:null},Xe.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function _m(){return vn().memoizedState}function cu(n,i,a,c){var d=Xn();Xe.flags|=n,d.memoizedState=Ra(1|i,a,void 0,c===void 0?null:c)}function hu(n,i,a,c){var d=vn();c=c===void 0?null:c;var g=void 0;if(ht!==null){var _=ht.memoizedState;if(g=_.destroy,c!==null&&Oh(c,_.deps)){d.memoizedState=Ra(i,a,g,c);return}}Xe.flags|=n,d.memoizedState=Ra(1|i,a,g,c)}function wm(n,i){return cu(8390656,8,n,i)}function Fh(n,i){return hu(2048,8,n,i)}function Em(n,i){return hu(4,2,n,i)}function Tm(n,i){return hu(4,4,n,i)}function Im(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Sm(n,i,a){return a=a!=null?a.concat([n]):null,hu(4,4,Im.bind(null,i,n),a)}function Uh(){}function Cm(n,i){var a=vn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Oh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Rm(n,i){var a=vn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Oh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Am(n,i,a){return(Zi&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(Nn(a,i)||(a=zi(),Xe.lanes|=a,es|=a,n.baseState=!0),i)}function kw(n,i){var a=Pe;Pe=a!==0&&4>a?a:4,n(!0);var c=bh.transition;bh.transition={};try{n(!1),i()}finally{Pe=a,bh.transition=c}}function km(){return vn().memoizedState}function xw(n,i,a){var c=si(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},xm(n))Pm(i,a);else if(a=Zp(n,i,a,c),a!==null){var d=zt();Ln(a,n,c,d),Nm(a,i,c)}}function Pw(n,i,a){var c=si(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(xm(n))Pm(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var _=i.lastRenderedState,R=g(_,a);if(d.hasEagerState=!0,d.eagerState=R,Nn(R,_)){var P=i.interleaved;P===null?(d.next=d,Ch(i)):(d.next=P.next,P.next=d),i.interleaved=d;return}}catch{}finally{}a=Zp(n,i,d,c),a!==null&&(d=zt(),Ln(a,n,c,d),Nm(a,i,c))}}function xm(n){var i=n.alternate;return n===Xe||i!==null&&i===Xe}function Pm(n,i){Ia=uu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Nm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Wr(n,a)}}var du={readContext:yn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Nw={readContext:yn,useCallback:function(n,i){return Xn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:wm,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,cu(4194308,4,Im.bind(null,i,n),a)},useLayoutEffect:function(n,i){return cu(4194308,4,n,i)},useInsertionEffect:function(n,i){return cu(4,2,n,i)},useMemo:function(n,i){var a=Xn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Xn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=xw.bind(null,Xe,n),[c.memoizedState,n]},useRef:function(n){var i=Xn();return n={current:n},i.memoizedState=n},useState:vm,useDebugValue:Uh,useDeferredValue:function(n){return Xn().memoizedState=n},useTransition:function(){var n=vm(!1),i=n[0];return n=kw.bind(null,n[1]),Xn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Xe,d=Xn();if(Ge){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),vt===null)throw Error(t(349));(Zi&30)!==0||fm(c,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,wm(mm.bind(null,c,g,n),[n]),c.flags|=2048,Ra(9,pm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Xn(),i=vt.identifierPrefix;if(Ge){var a=Er,c=wr;a=(c&~(1<<32-Ft(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Sa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Aw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Dw={readContext:yn,useCallback:Cm,useContext:yn,useEffect:Fh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Rm,useReducer:Mh,useRef:_m,useState:function(){return Mh(Ca)},useDebugValue:Uh,useDeferredValue:function(n){var i=vn();return Am(i,ht.memoizedState,n)},useTransition:function(){var n=Mh(Ca)[0],i=vn().memoizedState;return[n,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:km,unstable_isNewReconciler:!1},bw={readContext:yn,useCallback:Cm,useContext:yn,useEffect:Fh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:Rm,useReducer:jh,useRef:_m,useState:function(){return jh(Ca)},useDebugValue:Uh,useDeferredValue:function(n){var i=vn();return ht===null?i.memoizedState=n:Am(i,ht.memoizedState,n)},useTransition:function(){var n=jh(Ca)[0],i=vn().memoizedState;return[n,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:km,unstable_isNewReconciler:!1};function so(n,i){try{var a="",c=i;do a+=Ve(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:d,digest:null}}function Bh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function zh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Ow=typeof WeakMap=="function"?WeakMap:Map;function Dm(n,i,a){a=Ir(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){_u||(_u=!0,rd=c),zh(n,i)},a}function bm(n,i,a){a=Ir(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){zh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){zh(n,i),typeof c!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),a}function Om(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Ow;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=Gw.bind(null,n,i,a),i.then(n,n))}function Vm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Lm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ir(-1,1),i.tag=2,ti(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Vw=ie.ReactCurrentOwner,Gt=!1;function Bt(n,i,a,c){i.child=n===null?um(i,null,a,c):ro(i,n.child,a,c)}function Mm(n,i,a,c,d){a=a.render;var g=i.ref;return no(i,d),c=Vh(n,i,a,c,g,d),a=Lh(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Sr(n,i,d)):(Ge&&a&&gh(i),i.flags|=1,Bt(n,i,c,d),i.child)}function jm(n,i,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!cd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Fm(n,i,g,c,d)):(n=Cu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,(n.lanes&d)===0){var _=g.memoizedProps;if(a=a.compare,a=a!==null?a:da,a(_,c)&&n.ref===i.ref)return Sr(n,i,d)}return i.flags|=1,n=ai(g,c),n.ref=i.ref,n.return=i,i.child=n}function Fm(n,i,a,c,d){if(n!==null){var g=n.memoizedProps;if(da(g,c)&&n.ref===i.ref)if(Gt=!1,i.pendingProps=c=g,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Gt=!0);else return i.lanes=n.lanes,Sr(n,i,d)}return $h(n,i,a,c,d)}function Um(n,i,a){var c=i.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ao,an),an|=a;else{if((a&1073741824)===0)return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(ao,an),an|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(ao,an),an|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,We(ao,an),an|=c;return Bt(n,i,d,a),i.child}function Bm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function $h(n,i,a,c,d){var g=Kt(a)?Gi:Nt.current;return g=Xs(i,g),no(i,d),a=Vh(n,i,a,c,g,d),c=Lh(),n!==null&&!Gt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Sr(n,i,d)):(Ge&&c&&gh(i),i.flags|=1,Bt(n,i,a,d),i.child)}function zm(n,i,a,c,d){if(Kt(a)){var g=!0;Yl(i)}else g=!1;if(no(i,d),i.stateNode===null)pu(n,i),sm(i,a,c),kh(i,a,c,d),c=!0;else if(n===null){var _=i.stateNode,R=i.memoizedProps;_.props=R;var P=_.context,W=a.contextType;typeof W=="object"&&W!==null?W=yn(W):(W=Kt(a)?Gi:Nt.current,W=Xs(i,W));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==c||P!==W)&&om(i,_,c,W),ei=!1;var Y=i.memoizedState;_.state=Y,iu(i,c,_,d),P=i.memoizedState,R!==c||Y!==P||qt.current||ei?(typeof X=="function"&&(Ah(i,a,X,c),P=i.memoizedState),(R=ei||im(i,a,R,c,Y,P,W))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=P),_.props=c,_.state=P,_.context=W,c=R):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,em(n,i),R=i.memoizedProps,W=i.type===i.elementType?R:bn(i.type,R),_.props=W,J=i.pendingProps,Y=_.context,P=a.contextType,typeof P=="object"&&P!==null?P=yn(P):(P=Kt(a)?Gi:Nt.current,P=Xs(i,P));var se=a.getDerivedStateFromProps;(X=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==J||Y!==P)&&om(i,_,c,P),ei=!1,Y=i.memoizedState,_.state=Y,iu(i,c,_,d);var ue=i.memoizedState;R!==J||Y!==ue||qt.current||ei?(typeof se=="function"&&(Ah(i,a,se,c),ue=i.memoizedState),(W=ei||im(i,a,W,c,Y,ue,P)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ue,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ue,P)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ue),_.props=c,_.state=ue,_.context=P,c=W):(typeof _.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return Wh(n,i,a,c,g,d)}function Wh(n,i,a,c,d,g){Bm(n,i);var _=(i.flags&128)!==0;if(!c&&!_)return d&&qp(i,a,!1),Sr(n,i,g);c=i.stateNode,Vw.current=i;var R=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&_?(i.child=ro(i,n.child,null,g),i.child=ro(i,null,R,g)):Bt(n,i,R,g),i.memoizedState=c.state,d&&qp(i,a,!0),i.child}function $m(n){var i=n.stateNode;i.pendingContext?Wp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Wp(n,i.context,!1),xh(n,i.containerInfo)}function Wm(n,i,a,c,d){return eo(),wh(d),i.flags|=256,Bt(n,i,a,c),i.child}var Hh={dehydrated:null,treeContext:null,retryLane:0};function qh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Hm(n,i,a){var c=i.pendingProps,d=Ye.current,g=!1,_=(i.flags&128)!==0,R;if((R=_)||(R=n!==null&&n.memoizedState===null?!1:(d&2)!==0),R?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Ye,d&1),n===null)return _h(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(_=c.children,n=c.fallback,g?(c=i.mode,g=i.child,_={mode:"hidden",children:_},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=_):g=Ru(_,c,0,null),n=is(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=qh(a),i.memoizedState=Hh,n):Kh(i,_));if(d=n.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return Lw(n,i,_,c,R,d,a);if(g){g=c.fallback,_=i.mode,d=n.child,R=d.sibling;var P={mode:"hidden",children:c.children};return(_&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=P,i.deletions=null):(c=ai(d,P),c.subtreeFlags=d.subtreeFlags&14680064),R!==null?g=ai(R,g):(g=is(g,_,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,_=n.child.memoizedState,_=_===null?qh(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},g.memoizedState=_,g.childLanes=n.childLanes&~a,i.memoizedState=Hh,c}return g=n.child,n=g.sibling,c=ai(g,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Kh(n,i){return i=Ru({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function fu(n,i,a,c){return c!==null&&wh(c),ro(i,n.child,null,a),n=Kh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Lw(n,i,a,c,d,g,_){if(a)return i.flags&256?(i.flags&=-257,c=Bh(Error(t(422))),fu(n,i,_,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,d=i.mode,c=Ru({mode:"visible",children:c.children},d,0,null),g=is(g,d,_,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,(i.mode&1)!==0&&ro(i,n.child,null,_),i.child.memoizedState=qh(_),i.memoizedState=Hh,g);if((i.mode&1)===0)return fu(n,i,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=Bh(g,c,void 0),fu(n,i,_,c)}if(R=(_&n.childLanes)!==0,Gt||R){if(c=vt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|_))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Tr(n,d),Ln(c,n,d,-1))}return ud(),c=Bh(Error(t(421))),fu(n,i,_,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Qw.bind(null,n),d._reactRetry=i,null):(n=g.treeContext,on=Yr(d.nextSibling),sn=i,Ge=!0,Dn=null,n!==null&&(mn[gn++]=wr,mn[gn++]=Er,mn[gn++]=Qi,wr=n.id,Er=n.overflow,Qi=i),i=Kh(i,c.children),i.flags|=4096,i)}function qm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Sh(n.return,i,a)}function Gh(n,i,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function Km(n,i,a){var c=i.pendingProps,d=c.revealOrder,g=c.tail;if(Bt(n,i,c.children,a),c=Ye.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&qm(n,a,i);else if(n.tag===19)qm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Ye,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&au(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Gh(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&au(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Gh(i,!0,a,null,g);break;case"together":Gh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function pu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Sr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),es|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ai(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ai(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Mw(n,i,a){switch(i.tag){case 3:$m(i),eo();break;case 5:cm(i);break;case 1:Kt(i.type)&&Yl(i);break;case 4:xh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;We(tu,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Ye,Ye.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Hm(n,i,a):(We(Ye,Ye.current&1),n=Sr(n,i,a),n!==null?n.sibling:null);We(Ye,Ye.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Km(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Ye,Ye.current),c)break;return null;case 22:case 23:return i.lanes=0,Um(n,i,a)}return Sr(n,i,a)}var Gm,Qh,Qm,Ym;Gm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Qh=function(){},Qm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Ji(Yn.current);var g=null;switch(a){case"input":d=Ni(n,d),c=Ni(n,c),g=[];break;case"select":d=x({},d,{value:void 0}),c=x({},c,{value:void 0}),g=[];break;case"textarea":d=Bo(n,d),c=Bo(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Kl)}Ko(a,c);var _;a=null;for(W in d)if(!c.hasOwnProperty(W)&&d.hasOwnProperty(W)&&d[W]!=null)if(W==="style"){var R=d[W];for(_ in R)R.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in c){var P=c[W];if(R=d!=null?d[W]:void 0,c.hasOwnProperty(W)&&P!==R&&(P!=null||R!=null))if(W==="style")if(R){for(_ in R)!R.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in P)P.hasOwnProperty(_)&&R[_]!==P[_]&&(a||(a={}),a[_]=P[_])}else a||(g||(g=[]),g.push(W,a)),a=P;else W==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(g=g||[]).push(W,P)):W==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(W,""+P):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(P!=null&&W==="onScroll"&&He("scroll",n),g||R===P||(g=[])):(g=g||[]).push(W,P))}a&&(g=g||[]).push("style",a);var W=g;(i.updateQueue=W)&&(i.flags|=4)}},Ym=function(n,i,a,c){a!==c&&(i.flags|=4)};function Aa(n,i){if(!Ge)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function jw(n,i,a){var c=i.pendingProps;switch(yh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return Kt(i.type)&&Ql(),bt(i),null;case 3:return c=i.stateNode,io(),qe(qt),qe(Nt),Dh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(eu(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dn!==null&&(od(Dn),Dn=null))),Qh(n,i),bt(i),null;case 5:Ph(i);var d=Ji(Ta.current);if(a=i.type,n!==null&&i.stateNode!=null)Qm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return bt(i),null}if(n=Ji(Yn.current),eu(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[Qn]=i,c[ya]=g,n=(i.mode&1)!==0,a){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(d=0;d<pa.length;d++)He(pa[d],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":_s(c,g),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},He("invalid",c);break;case"textarea":Es(c,g),He("invalid",c)}Ko(a,g),d=null;for(var _ in g)if(g.hasOwnProperty(_)){var R=g[_];_==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&ql(c.textContent,R,n),d=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&ql(c.textContent,R,n),d=["children",""+R]):o.hasOwnProperty(_)&&R!=null&&_==="onScroll"&&He("scroll",c)}switch(a){case"input":lr(c),vl(c,g,!0);break;case"textarea":lr(c),zo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Kl)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[Qn]=i,n[ya]=c,Gm(n,i,!1,!1),i.stateNode=n;e:{switch(_=Go(a,c),a){case"dialog":He("cancel",n),He("close",n),d=c;break;case"iframe":case"object":case"embed":He("load",n),d=c;break;case"video":case"audio":for(d=0;d<pa.length;d++)He(pa[d],n);d=c;break;case"source":He("error",n),d=c;break;case"img":case"image":case"link":He("error",n),He("load",n),d=c;break;case"details":He("toggle",n),d=c;break;case"input":_s(n,c),d=Ni(n,c),He("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=x({},c,{value:void 0}),He("invalid",n);break;case"textarea":Es(n,c),d=Bo(n,c),He("invalid",n);break;default:d=c}Ko(a,d),R=d;for(g in R)if(R.hasOwnProperty(g)){var P=R[g];g==="style"?Ho(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&$o(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Fr(n,P):typeof P=="number"&&Fr(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&He("scroll",n):P!=null&&te(n,g,P,_))}switch(a){case"input":lr(n),vl(n,c,!1);break;case"textarea":lr(n),zo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Me(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?cr(n,!!c.multiple,g,!1):c.defaultValue!=null&&cr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return bt(i),null;case 6:if(n&&i.stateNode!=null)Ym(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ji(Ta.current),Ji(Yn.current),eu(i)){if(c=i.stateNode,a=i.memoizedProps,c[Qn]=i,(g=c.nodeValue!==a)&&(n=sn,n!==null))switch(n.tag){case 3:ql(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ql(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Qn]=i,i.stateNode=c}return bt(i),null;case 13:if(qe(Ye),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ge&&on!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Jp(),eo(),i.flags|=98560,g=!1;else if(g=eu(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Qn]=i}else eo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),g=!1}else Dn!==null&&(od(Dn),Dn=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(Ye.current&1)!==0?dt===0&&(dt=3):ud())),i.updateQueue!==null&&(i.flags|=4),bt(i),null);case 4:return io(),Qh(n,i),n===null&&ma(i.stateNode.containerInfo),bt(i),null;case 10:return Ih(i.type._context),bt(i),null;case 17:return Kt(i.type)&&Ql(),bt(i),null;case 19:if(qe(Ye),g=i.memoizedState,g===null)return bt(i),null;if(c=(i.flags&128)!==0,_=g.rendering,_===null)if(c)Aa(g,!1);else{if(dt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=au(n),_!==null){for(i.flags|=128,Aa(g,!1),c=_.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,_=g.alternate,_===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=_.childLanes,g.lanes=_.lanes,g.child=_.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=_.memoizedProps,g.memoizedState=_.memoizedState,g.updateQueue=_.updateQueue,g.type=_.type,n=_.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Ye,Ye.current&1|2),i.child}n=n.sibling}g.tail!==null&&$e()>lo&&(i.flags|=128,c=!0,Aa(g,!1),i.lanes=4194304)}else{if(!c)if(n=au(_),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Aa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Ge)return bt(i),null}else 2*$e()-g.renderingStartTime>lo&&a!==1073741824&&(i.flags|=128,c=!0,Aa(g,!1),i.lanes=4194304);g.isBackwards?(_.sibling=i.child,i.child=_):(a=g.last,a!==null?a.sibling=_:i.child=_,g.last=_)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=$e(),i.sibling=null,a=Ye.current,We(Ye,c?a&1|2:a&1),i):(bt(i),null);case 22:case 23:return ld(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(an&1073741824)!==0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Fw(n,i){switch(yh(i),i.tag){case 1:return Kt(i.type)&&Ql(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return io(),qe(qt),qe(Nt),Dh(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Ph(i),null;case 13:if(qe(Ye),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));eo()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return qe(Ye),null;case 4:return io(),null;case 10:return Ih(i.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var mu=!1,Ot=!1,Uw=typeof WeakSet=="function"?WeakSet:Set,ae=null;function oo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ze(n,i,c)}else a.current=null}function Yh(n,i,a){try{a()}catch(c){Ze(n,i,c)}}var Xm=!1;function Bw(n,i){if(lh=Kr,n=kp(),eh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var _=0,R=-1,P=-1,W=0,X=0,J=n,Y=null;t:for(;;){for(var se;J!==a||d!==0&&J.nodeType!==3||(R=_+d),J!==g||c!==0&&J.nodeType!==3||(P=_+c),J.nodeType===3&&(_+=J.nodeValue.length),(se=J.firstChild)!==null;)Y=J,J=se;for(;;){if(J===n)break t;if(Y===a&&++W===d&&(R=_),Y===g&&++X===c&&(P=_),(se=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=se}a=R===-1||P===-1?null:{start:R,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:n,selectionRange:a},Kr=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var ue=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,rt=ue.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?ce:bn(i.type,ce),rt);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){Ze(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return ue=Xm,Xm=!1,ue}function ka(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&Yh(i,a,g)}d=d.next}while(d!==c)}}function gu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Xh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Jm(n){var i=n.alternate;i!==null&&(n.alternate=null,Jm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Qn],delete i[ya],delete i[fh],delete i[Iw],delete i[Sw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zm(n){return n.tag===5||n.tag===3||n.tag===4}function eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kl));else if(c!==4&&(n=n.child,n!==null))for(Jh(n,i,a),n=n.sibling;n!==null;)Jh(n,i,a),n=n.sibling}function Zh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Zh(n,i,a),n=n.sibling;n!==null;)Zh(n,i,a),n=n.sibling}var It=null,On=!1;function ni(n,i,a){for(a=a.child;a!==null;)tg(n,i,a),a=a.sibling}function tg(n,i,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ui,a)}catch{}switch(a.tag){case 5:Ot||oo(a,i);case 6:var c=It,d=On;It=null,ni(n,i,a),It=c,On=d,It!==null&&(On?(n=It,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):It.removeChild(a.stateNode));break;case 18:It!==null&&(On?(n=It,a=a.stateNode,n.nodeType===8?dh(n.parentNode,a):n.nodeType===1&&dh(n,a),xn(n)):dh(It,a.stateNode));break;case 4:c=It,d=On,It=a.stateNode.containerInfo,On=!0,ni(n,i,a),It=c,On=d;break;case 0:case 11:case 14:case 15:if(!Ot&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,_=g.destroy;g=g.tag,_!==void 0&&((g&2)!==0||(g&4)!==0)&&Yh(a,i,_),d=d.next}while(d!==c)}ni(n,i,a);break;case 1:if(!Ot&&(oo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){Ze(a,i,R)}ni(n,i,a);break;case 21:ni(n,i,a);break;case 22:a.mode&1?(Ot=(c=Ot)||a.memoizedState!==null,ni(n,i,a),Ot=c):ni(n,i,a);break;default:ni(n,i,a)}}function ng(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Uw),i.forEach(function(c){var d=Yw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Vn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,_=i,R=_;e:for(;R!==null;){switch(R.tag){case 5:It=R.stateNode,On=!1;break e;case 3:It=R.stateNode.containerInfo,On=!0;break e;case 4:It=R.stateNode.containerInfo,On=!0;break e}R=R.return}if(It===null)throw Error(t(160));tg(g,_,d),It=null,On=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(W){Ze(d,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rg(i,n),i=i.sibling}function rg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Vn(i,n),Jn(n),c&4){try{ka(3,n,n.return),gu(3,n)}catch(ce){Ze(n,n.return,ce)}try{ka(5,n,n.return)}catch(ce){Ze(n,n.return,ce)}}break;case 1:Vn(i,n),Jn(n),c&512&&a!==null&&oo(a,a.return);break;case 5:if(Vn(i,n),Jn(n),c&512&&a!==null&&oo(a,a.return),n.flags&32){var d=n.stateNode;try{Fr(d,"")}catch(ce){Ze(n,n.return,ce)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,_=a!==null?a.memoizedProps:g,R=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&Fo(d,g),Go(R,_);var W=Go(R,g);for(_=0;_<P.length;_+=2){var X=P[_],J=P[_+1];X==="style"?Ho(d,J):X==="dangerouslySetInnerHTML"?$o(d,J):X==="children"?Fr(d,J):te(d,X,J,W)}switch(R){case"input":Uo(d,g);break;case"textarea":Ts(d,g);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var se=g.value;se!=null?cr(d,!!g.multiple,se,!1):Y!==!!g.multiple&&(g.defaultValue!=null?cr(d,!!g.multiple,g.defaultValue,!0):cr(d,!!g.multiple,g.multiple?[]:"",!1))}d[ya]=g}catch(ce){Ze(n,n.return,ce)}}break;case 6:if(Vn(i,n),Jn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(ce){Ze(n,n.return,ce)}}break;case 3:if(Vn(i,n),Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{xn(i.containerInfo)}catch(ce){Ze(n,n.return,ce)}break;case 4:Vn(i,n),Jn(n);break;case 13:Vn(i,n),Jn(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(nd=$e())),c&4&&ng(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Ot=(W=Ot)||X,Vn(i,n),Ot=W):Vn(i,n),Jn(n),c&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!X&&(n.mode&1)!==0)for(ae=n,X=n.child;X!==null;){for(J=ae=X;ae!==null;){switch(Y=ae,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:ka(4,Y,Y.return);break;case 1:oo(Y,Y.return);var ue=Y.stateNode;if(typeof ue.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,ue.props=i.memoizedProps,ue.state=i.memoizedState,ue.componentWillUnmount()}catch(ce){Ze(c,a,ce)}}break;case 5:oo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){og(J);continue}}se!==null?(se.return=Y,ae=se):og(J)}X=X.sibling}e:for(X=null,J=n;;){if(J.tag===5){if(X===null){X=J;try{d=J.stateNode,W?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=J.stateNode,P=J.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=Wo("display",_))}catch(ce){Ze(n,n.return,ce)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=W?"":J.memoizedProps}catch(ce){Ze(n,n.return,ce)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Vn(i,n),Jn(n),c&4&&ng(n);break;case 21:break;default:Vn(i,n),Jn(n)}}function Jn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Zm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Fr(d,""),c.flags&=-33);var g=eg(n);Zh(n,g,d);break;case 3:case 4:var _=c.stateNode.containerInfo,R=eg(n);Jh(n,R,_);break;default:throw Error(t(161))}}catch(P){Ze(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function zw(n,i,a){ae=n,ig(n)}function ig(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,g=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||mu;if(!_){var R=d.alternate,P=R!==null&&R.memoizedState!==null||Ot;R=mu;var W=Ot;if(mu=_,(Ot=P)&&!W)for(ae=d;ae!==null;)_=ae,P=_.child,_.tag===22&&_.memoizedState!==null?ag(d):P!==null?(P.return=_,ae=P):ag(d);for(;g!==null;)ae=g,ig(g),g=g.sibling;ae=d,mu=R,Ot=W}sg(n)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,ae=g):sg(n)}}function sg(n){for(;ae!==null;){var i=ae;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ot||gu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ot)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:bn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&nm(i,g,c);break;case 3:var _=i.updateQueue;if(_!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}nm(i,_,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var X=W.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&xn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||i.flags&512&&Xh(i)}catch(Y){Ze(i,i.return,Y)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function og(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function ag(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{gu(4,i)}catch(P){Ze(i,a,P)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(P){Ze(i,d,P)}}var g=i.return;try{Xh(i)}catch(P){Ze(i,g,P)}break;case 5:var _=i.return;try{Xh(i)}catch(P){Ze(i,_,P)}}}catch(P){Ze(i,i.return,P)}if(i===n){ae=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ae=R;break}ae=i.return}}var $w=Math.ceil,yu=ie.ReactCurrentDispatcher,ed=ie.ReactCurrentOwner,_n=ie.ReactCurrentBatchConfig,Oe=0,vt=null,ot=null,St=0,an=0,ao=Xr(0),dt=0,xa=null,es=0,vu=0,td=0,Pa=null,Qt=null,nd=0,lo=1/0,Cr=null,_u=!1,rd=null,ri=null,wu=!1,ii=null,Eu=0,Na=0,id=null,Tu=-1,Iu=0;function zt(){return(Oe&6)!==0?$e():Tu!==-1?Tu:Tu=$e()}function si(n){return(n.mode&1)===0?1:(Oe&2)!==0&&St!==0?St&-St:Rw.transition!==null?(Iu===0&&(Iu=zi()),Iu):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:sa(n.type)),n)}function Ln(n,i,a,c){if(50<Na)throw Na=0,id=null,Error(t(185));$r(n,a,c),((Oe&2)===0||n!==vt)&&(n===vt&&((Oe&2)===0&&(vu|=a),dt===4&&oi(n,St)),Yt(n,c),a===1&&Oe===0&&(i.mode&1)===0&&(lo=$e()+500,Xl&&Zr()))}function Yt(n,i){var a=n.callbackNode;fr(n,i);var c=Bi(n,n===vt?St:0);if(c===0)a!==null&&ea(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&ea(a),i===1)n.tag===0?Cw(ug.bind(null,n)):Kp(ug.bind(null,n)),Ew(function(){(Oe&6)===0&&Zr()}),a=null;else{switch(Hr(c)){case 1:a=Fi;break;case 4:a=Ur;break;case 16:a=dn;break;case 536870912:a=Il;break;default:a=dn}a=yg(a,lg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function lg(n,i){if(Tu=-1,Iu=0,(Oe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(uo()&&n.callbackNode!==a)return null;var c=Bi(n,n===vt?St:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Su(n,c);else{i=c;var d=Oe;Oe|=2;var g=hg();(vt!==n||St!==i)&&(Cr=null,lo=$e()+500,ns(n,i));do try{qw();break}catch(R){cg(n,R)}while(!0);Th(),yu.current=g,Oe=d,ot!==null?i=0:(vt=null,St=0,i=dt)}if(i!==0){if(i===2&&(d=tn(n),d!==0&&(c=d,i=sd(n,d))),i===1)throw a=xa,ns(n,0),oi(n,c),Yt(n,$e()),a;if(i===6)oi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Ww(d)&&(i=Su(n,c),i===2&&(g=tn(n),g!==0&&(c=g,i=sd(n,g))),i===1))throw a=xa,ns(n,0),oi(n,c),Yt(n,$e()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:rs(n,Qt,Cr);break;case 3:if(oi(n,c),(c&130023424)===c&&(i=nd+500-$e(),10<i)){if(Bi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){zt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=hh(rs.bind(null,n,Qt,Cr),i);break}rs(n,Qt,Cr);break;case 4:if(oi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var _=31-Ft(c);g=1<<_,_=i[_],_>d&&(d=_),c&=~g}if(c=d,c=$e()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*$w(c/1960))-c,10<c){n.timeoutHandle=hh(rs.bind(null,n,Qt,Cr),c);break}rs(n,Qt,Cr);break;case 5:rs(n,Qt,Cr);break;default:throw Error(t(329))}}}return Yt(n,$e()),n.callbackNode===a?lg.bind(null,n):null}function sd(n,i){var a=Pa;return n.current.memoizedState.isDehydrated&&(ns(n,i).flags|=256),n=Su(n,i),n!==2&&(i=Qt,Qt=a,i!==null&&od(i)),n}function od(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function Ww(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!Nn(g(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oi(n,i){for(i&=~td,i&=~vu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Ft(i),c=1<<a;n[a]=-1,i&=~c}}function ug(n){if((Oe&6)!==0)throw Error(t(327));uo();var i=Bi(n,0);if((i&1)===0)return Yt(n,$e()),null;var a=Su(n,i);if(n.tag!==0&&a===2){var c=tn(n);c!==0&&(i=c,a=sd(n,c))}if(a===1)throw a=xa,ns(n,0),oi(n,i),Yt(n,$e()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,rs(n,Qt,Cr),Yt(n,$e()),null}function ad(n,i){var a=Oe;Oe|=1;try{return n(i)}finally{Oe=a,Oe===0&&(lo=$e()+500,Xl&&Zr())}}function ts(n){ii!==null&&ii.tag===0&&(Oe&6)===0&&uo();var i=Oe;Oe|=1;var a=_n.transition,c=Pe;try{if(_n.transition=null,Pe=1,n)return n()}finally{Pe=c,_n.transition=a,Oe=i,(Oe&6)===0&&Zr()}}function ld(){an=ao.current,qe(ao)}function ns(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ww(a)),ot!==null)for(a=ot.return;a!==null;){var c=a;switch(yh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ql();break;case 3:io(),qe(qt),qe(Nt),Dh();break;case 5:Ph(c);break;case 4:io();break;case 13:qe(Ye);break;case 19:qe(Ye);break;case 10:Ih(c.type._context);break;case 22:case 23:ld()}a=a.return}if(vt=n,ot=n=ai(n.current,null),St=an=i,dt=0,xa=null,td=vu=es=0,Qt=Pa=null,Xi!==null){for(i=0;i<Xi.length;i++)if(a=Xi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var _=g.next;g.next=d,c.next=_}a.pending=c}Xi=null}return n}function cg(n,i){do{var a=ot;try{if(Th(),lu.current=du,uu){for(var c=Xe.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}uu=!1}if(Zi=0,yt=ht=Xe=null,Ia=!1,Sa=0,ed.current=null,a===null||a.return===null){dt=1,xa=i,ot=null;break}e:{var g=n,_=a.return,R=a,P=i;if(i=St,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var W=P,X=R,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var se=Vm(_);if(se!==null){se.flags&=-257,Lm(se,_,R,g,i),se.mode&1&&Om(g,W,i),i=se,P=W;var ue=i.updateQueue;if(ue===null){var ce=new Set;ce.add(P),i.updateQueue=ce}else ue.add(P);break e}else{if((i&1)===0){Om(g,W,i),ud();break e}P=Error(t(426))}}else if(Ge&&R.mode&1){var rt=Vm(_);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Lm(rt,_,R,g,i),wh(so(P,R));break e}}g=P=so(P,R),dt!==4&&(dt=2),Pa===null?Pa=[g]:Pa.push(g),g=_;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=Dm(g,P,i);tm(g,U);break e;case 1:R=P;var V=g.type,B=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ri===null||!ri.has(B)))){g.flags|=65536,i&=-i,g.lanes|=i;var ee=bm(g,R,i);tm(g,ee);break e}}g=g.return}while(g!==null)}fg(a)}catch(he){i=he,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(!0)}function hg(){var n=yu.current;return yu.current=du,n===null?du:n}function ud(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||(es&268435455)===0&&(vu&268435455)===0||oi(vt,St)}function Su(n,i){var a=Oe;Oe|=2;var c=hg();(vt!==n||St!==i)&&(Cr=null,ns(n,i));do try{Hw();break}catch(d){cg(n,d)}while(!0);if(Th(),Oe=a,yu.current=c,ot!==null)throw Error(t(261));return vt=null,St=0,dt}function Hw(){for(;ot!==null;)dg(ot)}function qw(){for(;ot!==null&&!El();)dg(ot)}function dg(n){var i=gg(n.alternate,n,an);n.memoizedProps=n.pendingProps,i===null?fg(n):ot=i,ed.current=null}function fg(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=jw(a,i,an),a!==null){ot=a;return}}else{if(a=Fw(a,i),a!==null){a.flags&=32767,ot=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{dt=6,ot=null;return}}if(i=i.sibling,i!==null){ot=i;return}ot=i=n}while(i!==null);dt===0&&(dt=5)}function rs(n,i,a){var c=Pe,d=_n.transition;try{_n.transition=null,Pe=1,Kw(n,i,a,c)}finally{_n.transition=d,Pe=c}return null}function Kw(n,i,a,c){do uo();while(ii!==null);if((Oe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(ze(n,g),n===vt&&(ot=vt=null,St=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||wu||(wu=!0,yg(dn,function(){return uo(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=_n.transition,_n.transition=null;var _=Pe;Pe=1;var R=Oe;Oe|=4,ed.current=null,Bw(n,a),rg(a,n),fw(uh),Kr=!!lh,uh=lh=null,n.current=a,zw(a),qc(),Oe=R,Pe=_,_n.transition=g}else n.current=a;if(wu&&(wu=!1,ii=n,Eu=d),g=n.pendingLanes,g===0&&(ri=null),Sl(a.stateNode),Yt(n,$e()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(_u)throw _u=!1,n=rd,rd=null,n;return(Eu&1)!==0&&n.tag!==0&&uo(),g=n.pendingLanes,(g&1)!==0?n===id?Na++:(Na=0,id=n):Na=0,Zr(),null}function uo(){if(ii!==null){var n=Hr(Eu),i=_n.transition,a=Pe;try{if(_n.transition=null,Pe=16>n?16:n,ii===null)var c=!1;else{if(n=ii,ii=null,Eu=0,(Oe&6)!==0)throw Error(t(331));var d=Oe;for(Oe|=4,ae=n.current;ae!==null;){var g=ae,_=g.child;if((ae.flags&16)!==0){var R=g.deletions;if(R!==null){for(var P=0;P<R.length;P++){var W=R[P];for(ae=W;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:ka(8,X,g)}var J=X.child;if(J!==null)J.return=X,ae=J;else for(;ae!==null;){X=ae;var Y=X.sibling,se=X.return;if(Jm(X),X===W){ae=null;break}if(Y!==null){Y.return=se,ae=Y;break}ae=se}}}var ue=g.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var rt=ce.sibling;ce.sibling=null,ce=rt}while(ce!==null)}}ae=g}}if((g.subtreeFlags&2064)!==0&&_!==null)_.return=g,ae=_;else e:for(;ae!==null;){if(g=ae,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:ka(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ae=U;break e}ae=g.return}}var V=n.current;for(ae=V;ae!==null;){_=ae;var B=_.child;if((_.subtreeFlags&2064)!==0&&B!==null)B.return=_,ae=B;else e:for(_=V;ae!==null;){if(R=ae,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:gu(9,R)}}catch(he){Ze(R,R.return,he)}if(R===_){ae=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,ae=ee;break e}ae=R.return}}if(Oe=d,Zr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ui,n)}catch{}c=!0}return c}finally{Pe=a,_n.transition=i}}return!1}function pg(n,i,a){i=so(a,i),i=Dm(n,i,1),n=ti(n,i,1),i=zt(),n!==null&&($r(n,1,i),Yt(n,i))}function Ze(n,i,a){if(n.tag===3)pg(n,n,a);else for(;i!==null;){if(i.tag===3){pg(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ri===null||!ri.has(c))){n=so(a,n),n=bm(i,n,1),i=ti(i,n,1),n=zt(),i!==null&&($r(i,1,n),Yt(i,n));break}}i=i.return}}function Gw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=zt(),n.pingedLanes|=n.suspendedLanes&a,vt===n&&(St&a)===a&&(dt===4||dt===3&&(St&130023424)===St&&500>$e()-nd?ns(n,0):td|=a),Yt(n,i)}function mg(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ds,Ds<<=1,(Ds&130023424)===0&&(Ds=4194304)));var a=zt();n=Tr(n,i),n!==null&&($r(n,i,a),Yt(n,a))}function Qw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),mg(n,a)}function Yw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),mg(n,a)}var gg;gg=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||qt.current)Gt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Gt=!1,Mw(n,i,a);Gt=(n.flags&131072)!==0}else Gt=!1,Ge&&(i.flags&1048576)!==0&&Gp(i,Zl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;pu(n,i),n=i.pendingProps;var d=Xs(i,Nt.current);no(i,a),d=Vh(null,i,c,n,d,a);var g=Lh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Kt(c)?(g=!0,Yl(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Rh(i),d.updater=su,i.stateNode=d,d._reactInternals=i,kh(i,c,n,a),i=Wh(null,i,c,!0,g,a)):(i.tag=0,Ge&&g&&gh(i),Bt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(pu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=Jw(c),n=bn(c,n),d){case 0:i=$h(null,i,c,n,a);break e;case 1:i=zm(null,i,c,n,a);break e;case 11:i=Mm(null,i,c,n,a);break e;case 14:i=jm(null,i,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),$h(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),zm(n,i,c,d,a);case 3:e:{if($m(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,d=g.element,em(n,i),iu(i,c,null,a);var _=i.memoizedState;if(c=_.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=so(Error(t(423)),i),i=Wm(n,i,c,a,d);break e}else if(c!==d){d=so(Error(t(424)),i),i=Wm(n,i,c,a,d);break e}else for(on=Yr(i.stateNode.containerInfo.firstChild),sn=i,Ge=!0,Dn=null,a=um(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(eo(),c===d){i=Sr(n,i,a);break e}Bt(n,i,c,a)}i=i.child}return i;case 5:return cm(i),n===null&&_h(i),c=i.type,d=i.pendingProps,g=n!==null?n.memoizedProps:null,_=d.children,ch(c,d)?_=null:g!==null&&ch(c,g)&&(i.flags|=32),Bm(n,i),Bt(n,i,_,a),i.child;case 6:return n===null&&_h(i),null;case 13:return Hm(n,i,a);case 4:return xh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ro(i,null,c,a):Bt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),Mm(n,i,c,d,a);case 7:return Bt(n,i,i.pendingProps,a),i.child;case 8:return Bt(n,i,i.pendingProps.children,a),i.child;case 12:return Bt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,g=i.memoizedProps,_=d.value,We(tu,c._currentValue),c._currentValue=_,g!==null)if(Nn(g.value,_)){if(g.children===d.children&&!qt.current){i=Sr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var R=g.dependencies;if(R!==null){_=g.child;for(var P=R.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=Ir(-1,a&-a),P.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var X=W.pending;X===null?P.next=P:(P.next=X.next,X.next=P),W.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),Sh(g.return,a,i),R.lanes|=a;break}P=P.next}}else if(g.tag===10)_=g.type===i.type?null:g.child;else if(g.tag===18){if(_=g.return,_===null)throw Error(t(341));_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Sh(_,a,i),_=g.sibling}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}Bt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,no(i,a),d=yn(d),c=c(d),i.flags|=1,Bt(n,i,c,a),i.child;case 14:return c=i.type,d=bn(c,i.pendingProps),d=bn(c.type,d),jm(n,i,c,d,a);case 15:return Fm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:bn(c,d),pu(n,i),i.tag=1,Kt(c)?(n=!0,Yl(i)):n=!1,no(i,a),sm(i,c,d),kh(i,c,d,a),Wh(null,i,c,!0,n,a);case 19:return Km(n,i,a);case 22:return Um(n,i,a)}throw Error(t(156,i.tag))};function yg(n,i){return Ps(n,i)}function Xw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,c){return new Xw(n,i,a,c)}function cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jw(n){if(typeof n=="function")return cd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===kt)return 14}return 2}function ai(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Cu(n,i,a,c,d,g){var _=2;if(c=n,typeof n=="function")cd(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case O:return is(a.children,d,g,i);case C:_=8,d|=8;break;case A:return n=wn(12,a,i,d|2),n.elementType=A,n.lanes=g,n;case k:return n=wn(13,a,i,d),n.elementType=k,n.lanes=g,n;case tt:return n=wn(19,a,i,d),n.elementType=tt,n.lanes=g,n;case Be:return Ru(a,d,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:_=10;break e;case L:_=9;break e;case M:_=11;break e;case kt:_=14;break e;case xt:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=wn(_,a,i,d),i.elementType=n,i.type=c,i.lanes=g,i}function is(n,i,a,c){return n=wn(7,n,c,i),n.lanes=a,n}function Ru(n,i,a,c){return n=wn(22,n,c,i),n.elementType=Be,n.lanes=a,n.stateNode={isHidden:!1},n}function hd(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function dd(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Zw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zr(0),this.expirationTimes=zr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function fd(n,i,a,c,d,g,_,R,P){return n=new Zw(n,i,a,R,P),i===1?(i=1,g===!0&&(i|=8)):i=0,g=wn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rh(g),n}function eE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function vg(n){if(!n)return Jr;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return Hp(n,a,i)}return i}function _g(n,i,a,c,d,g,_,R,P){return n=fd(a,c,!0,n,d,g,_,R,P),n.context=vg(null),a=n.current,c=zt(),d=si(a),g=Ir(c,d),g.callback=i??null,ti(a,g,d),n.current.lanes=d,$r(n,d,c),Yt(n,c),n}function Au(n,i,a,c){var d=i.current,g=zt(),_=si(d);return a=vg(a),i.context===null?i.context=a:i.pendingContext=a,i=Ir(g,_),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ti(d,i,_),n!==null&&(Ln(n,d,_,g),ru(n,d,_)),_}function ku(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function pd(n,i){wg(n,i),(n=n.alternate)&&wg(n,i)}function tE(){return null}var Eg=typeof reportError=="function"?reportError:function(n){console.error(n)};function md(n){this._internalRoot=n}xu.prototype.render=md.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Au(n,i,null,null)},xu.prototype.unmount=md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ts(function(){Au(null,n,null,null)}),i[vr]=null}};function xu(n){this._internalRoot=n}xu.prototype.unstable_scheduleHydration=function(n){if(n){var i=xl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Hn.length&&i!==0&&i<Hn[a].priority;a++);Hn.splice(a,0,n),a===0&&Dl(n)}};function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function nE(n,i,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var W=ku(_);g.call(W)}}var _=_g(i,c,n,0,null,!1,!1,"",Tg);return n._reactRootContainer=_,n[vr]=_.current,ma(n.nodeType===8?n.parentNode:n),ts(),_}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var R=c;c=function(){var W=ku(P);R.call(W)}}var P=fd(n,0,!1,null,null,!1,!1,"",Tg);return n._reactRootContainer=P,n[vr]=P.current,ma(n.nodeType===8?n.parentNode:n),ts(function(){Au(i,P,a,c)}),P}function Nu(n,i,a,c,d){var g=a._reactRootContainer;if(g){var _=g;if(typeof d=="function"){var R=d;d=function(){var P=ku(_);R.call(P)}}Au(i,_,n,d)}else _=nE(a,i,n,d,c);return ku(_)}Al=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Br(i.pendingLanes);a!==0&&(Wr(i,a|1),Yt(i,$e()),(Oe&6)===0&&(lo=$e()+500,Zr()))}break;case 13:ts(function(){var c=Tr(n,1);if(c!==null){var d=zt();Ln(c,n,1,d)}}),pd(n,1)}},bs=function(n){if(n.tag===13){var i=Tr(n,134217728);if(i!==null){var a=zt();Ln(i,n,134217728,a)}pd(n,134217728)}},kl=function(n){if(n.tag===13){var i=si(n),a=Tr(n,i);if(a!==null){var c=zt();Ln(a,n,i,c)}pd(n,i)}},xl=function(){return Pe},Pl=function(n,i){var a=Pe;try{return Pe=n,i()}finally{Pe=a}},Ss=function(n,i,a){switch(i){case"input":if(Uo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=Gl(c);if(!d)throw Error(t(90));vs(c),Uo(c,d)}}}break;case"textarea":Ts(n,a);break;case"select":i=a.value,i!=null&&cr(n,!!a.multiple,i,!1)}},Vi=ad,Yo=ts;var rE={usingClientEntryPoint:!1,Events:[va,Qs,Gl,$n,Qo,ad]},Da={findFiberByHostInstance:Ki,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iE={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zo(n),n===null?null:n.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||tE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Ui=Du.inject(iE),en=Du}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE,Xt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(i))throw Error(t(200));return eE(n,i,null,a)},Xt.createRoot=function(n,i){if(!gd(n))throw Error(t(299));var a=!1,c="",d=Eg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=fd(n,1,!1,null,null,a,!1,c,d),n[vr]=i.current,ma(n.nodeType===8?n.parentNode:n),new md(i)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Zo(i),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return ts(n)},Xt.hydrate=function(n,i,a){if(!Pu(i))throw Error(t(200));return Nu(null,n,i,!0,a)},Xt.hydrateRoot=function(n,i,a){if(!gd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",_=Eg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),i=_g(i,null,n,1,a??null,d,!1,g,_),n[vr]=i.current,ma(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new xu(i)},Xt.render=function(n,i,a){if(!Pu(i))throw Error(t(200));return Nu(null,n,i,!1,a)},Xt.unmountComponentAtNode=function(n){if(!Pu(n))throw Error(t(40));return n._reactRootContainer?(ts(function(){Nu(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},Xt.unstable_batchedUpdates=ad,Xt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Pu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Nu(n,i,a,!1,c)},Xt.version="18.2.0-next-9e3b772b8-20220608",Xt}var Pg;function dE(){if(Pg)return _d.exports;Pg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_d.exports=hE(),_d.exports}var Ng;function fE(){if(Ng)return bu;Ng=1;var r=dE();return bu.createRoot=r.createRoot,bu.hydrateRoot=r.hydrateRoot,bu}var pE=fE(),Oa={},Dg;function mE(){if(Dg)return Oa;Dg=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.parse=h,Oa.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,b){const N=new l,z=I.length;if(z<2)return N;const F=(b==null?void 0:b.decode)||E;let q=0;do{const G=I.indexOf("=",q);if(G===-1)break;const te=I.indexOf(";",q),ie=te===-1?z:te;if(G>ie){q=I.lastIndexOf(";",G-1)+1;continue}const _e=f(I,q,G),de=m(I,G,_e),O=I.slice(_e,de);if(N[O]===void 0){let C=f(I,G+1,ie),A=m(I,ie,C);const D=F(I.slice(C,A));N[O]=D}q=ie+1}while(q<z);return N}function f(I,b,N){do{const z=I.charCodeAt(b);if(z!==32&&z!==9)return b}while(++b<N);return N}function m(I,b,N){for(;b>N;){const z=I.charCodeAt(--b);if(z!==32&&z!==9)return b+1}return N}function y(I,b,N){const z=(N==null?void 0:N.encode)||encodeURIComponent;if(!r.test(I))throw new TypeError(`argument name is invalid: ${I}`);const F=z(b);if(!e.test(F))throw new TypeError(`argument val is invalid: ${b}`);let q=I+"="+F;if(!N)return q;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);q+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);q+="; Domain="+N.domain}if(N.path){if(!s.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);q+="; Path="+N.path}if(N.expires){if(!S(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);q+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(q+="; HttpOnly"),N.secure&&(q+="; Secure"),N.partitioned&&(q+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return q}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function S(I){return o.call(I)==="[object Date]"}return Oa}mE();var bg="popstate";function gE(r={}){function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return Ld("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Qa(o)}return vE(e,t,null,r)}function Qe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Fn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yE(){return Math.random().toString(36).substring(2,10)}function Og(r,e){return{usr:r.state,key:r.key,idx:e}}function Ld(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?xo(e):e,state:t,key:e&&e.key||s||yE()}}function Qa({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function xo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function vE(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f="POP",m=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function S(){f="POP";let F=E(),q=F==null?null:F-y;y=F,m&&m({action:f,location:z.location,delta:q})}function I(F,q){f="PUSH";let G=Ld(z.location,F,q);y=E()+1;let te=Og(G,y),ie=z.createHref(G);try{h.pushState(te,"",ie)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;o.location.assign(ie)}l&&m&&m({action:f,location:z.location,delta:1})}function b(F,q){f="REPLACE";let G=Ld(z.location,F,q);y=E();let te=Og(G,y),ie=z.createHref(G);h.replaceState(te,"",ie),l&&m&&m({action:f,location:z.location,delta:0})}function N(F){return _E(F)}let z={get action(){return f},get location(){return r(o,h)},listen(F){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(bg,S),m=F,()=>{o.removeEventListener(bg,S),m=null}},createHref(F){return e(o,F)},createURL:N,encodeLocation(F){let q=N(F);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:I,replace:b,go(F){return h.go(F)}};return z}function _E(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Qa(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function fv(r,e,t="/"){return wE(r,e,t,!1)}function wE(r,e,t,s){let o=typeof e=="string"?xo(e):e,l=Nr(o.pathname||"/",t);if(l==null)return null;let h=pv(r);EE(h);let f=null;for(let m=0;f==null&&m<h.length;++m){let y=DE(l);f=PE(h[m],y,s)}return f}function pv(r,e=[],t=[],s=""){let o=(l,h,f)=>{let m={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Qe(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length));let y=xr([s,m.relativePath]),E=t.concat(m);l.children&&l.children.length>0&&(Qe(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),pv(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:kE(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let m of mv(l.path))o(l,h,m)}),e}function mv(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=mv(s.join("/")),f=[];return f.push(...h.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...h),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function EE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:xE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var TE=/^:[\w-]+$/,IE=3,SE=2,CE=1,RE=10,AE=-2,Vg=r=>r==="*";function kE(r,e){let t=r.split("/"),s=t.length;return t.some(Vg)&&(s+=AE),e&&(s+=SE),t.filter(o=>!Vg(o)).reduce((o,l)=>o+(TE.test(l)?IE:l===""?CE:RE),s)}function xE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function PE(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let m=s[f],y=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",S=Zu({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},E),I=m.route;if(!S&&y&&t&&!s[s.length-1].route.index&&(S=Zu({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},E)),!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:xr([l,S.pathname]),pathnameBase:LE(xr([l,S.pathnameBase])),route:I}),S.pathnameBase!=="/"&&(l=xr([l,S.pathnameBase]))}return h}function Zu(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=NE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:S},I)=>{if(E==="*"){let N=f[I]||"";h=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const b=f[I];return S&&!b?y[E]=void 0:y[E]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function NE(r,e=!1,t=!0){Fn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,m)=>(s.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function DE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Nr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function bE(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?xo(r):r;return{pathname:t?t.startsWith("/")?t:OE(t,e):e,search:ME(s),hash:jE(o)}}function OE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Td(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VE(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mf(r){let e=VE(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function gf(r,e,t,s=!1){let o;typeof r=="string"?o=xo(r):(o={...r},Qe(!o.pathname||!o.pathname.includes("?"),Td("?","pathname","search",o)),Qe(!o.pathname||!o.pathname.includes("#"),Td("#","pathname","hash",o)),Qe(!o.search||!o.search.includes("#"),Td("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let S=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),S-=1;o.pathname=I.join("/")}f=S>=0?e[S]:"/"}let m=bE(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(y||E)&&(m.pathname+="/"),m}var xr=r=>r.join("/").replace(/\/\/+/g,"/"),LE=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ME=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,jE=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function FE(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var gv=["POST","PUT","PATCH","DELETE"];new Set(gv);var UE=["GET",...gv];new Set(UE);var Po=$.createContext(null);Po.displayName="DataRouter";var Ec=$.createContext(null);Ec.displayName="DataRouterState";var yv=$.createContext({isTransitioning:!1});yv.displayName="ViewTransition";var BE=$.createContext(new Map);BE.displayName="Fetchers";var zE=$.createContext(null);zE.displayName="Await";var Un=$.createContext(null);Un.displayName="Navigation";var sl=$.createContext(null);sl.displayName="Location";var Bn=$.createContext({outlet:null,matches:[],isDataRoute:!1});Bn.displayName="Route";var yf=$.createContext(null);yf.displayName="RouteError";function $E(r,{relative:e}={}){Qe(No(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=$.useContext(Un),{hash:o,pathname:l,search:h}=ol(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:xr([t,l])),s.createHref({pathname:f,search:h,hash:o})}function No(){return $.useContext(sl)!=null}function ar(){return Qe(No(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(sl).location}var vv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _v(r){$.useContext(Un).static||$.useLayoutEffect(r)}function Lr(){let{isDataRoute:r}=$.useContext(Bn);return r?nT():WE()}function WE(){Qe(No(),"useNavigate() may be used only in the context of a <Router> component.");let r=$.useContext(Po),{basename:e,navigator:t}=$.useContext(Un),{matches:s}=$.useContext(Bn),{pathname:o}=ar(),l=JSON.stringify(mf(s)),h=$.useRef(!1);return _v(()=>{h.current=!0}),$.useCallback((m,y={})=>{if(Fn(h.current,vv),!h.current)return;if(typeof m=="number"){t.go(m);return}let E=gf(m,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:xr([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}$.createContext(null);function wv(){let{matches:r}=$.useContext(Bn),e=r[r.length-1];return e?e.params:{}}function ol(r,{relative:e}={}){let{matches:t}=$.useContext(Bn),{pathname:s}=ar(),o=JSON.stringify(mf(t));return $.useMemo(()=>gf(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function HE(r,e){return Ev(r,e)}function Ev(r,e,t,s){var q;Qe(No(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=$.useContext(Un),{matches:l}=$.useContext(Bn),h=l[l.length-1],f=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",E=h&&h.route;{let G=E&&E.path||"";Tv(m,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let S=ar(),I;if(e){let G=typeof e=="string"?xo(e):e;Qe(y==="/"||((q=G.pathname)==null?void 0:q.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${G.pathname}" was given in the \`location\` prop.`),I=G}else I=S;let b=I.pathname||"/",N=b;if(y!=="/"){let G=y.replace(/^\//,"").split("/");N="/"+b.replace(/^\//,"").split("/").slice(G.length).join("/")}let z=fv(r,{pathname:N});Fn(E||z!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Fn(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=YE(z&&z.map(G=>Object.assign({},G,{params:Object.assign({},f,G.params),pathname:xr([y,o.encodeLocation?o.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:xr([y,o.encodeLocation?o.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),l,t,s);return e&&F?$.createElement(sl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},F):F}function qE(){let r=tT(),e=FE(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:o},t):null,h)}var KE=$.createElement(qE,null),GE=class extends $.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?$.createElement(Bn.Provider,{value:this.props.routeContext},$.createElement(yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QE({routeContext:r,match:e,children:t}){let s=$.useContext(Po);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Bn.Provider,{value:r},t)}function YE(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let m=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Qe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,f=-1;if(t)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:E,errors:S}=t,I=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||I){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,y,E)=>{let S,I=!1,b=null,N=null;t&&(S=l&&y.route.id?l[y.route.id]:void 0,b=y.route.errorElement||KE,h&&(f<0&&E===0?(Tv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,N=null):f===E&&(I=!0,N=y.route.hydrateFallbackElement||null)));let z=e.concat(o.slice(0,E+1)),F=()=>{let q;return S?q=b:I?q=N:y.route.Component?q=$.createElement(y.route.Component,null):y.route.element?q=y.route.element:q=m,$.createElement(QE,{match:y,routeContext:{outlet:m,matches:z,isDataRoute:t!=null},children:q})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?$.createElement(GE,{location:t.location,revalidation:t.revalidation,component:b,error:S,children:F(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):F()},null)}function vf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(r){let e=$.useContext(Po);return Qe(e,vf(r)),e}function JE(r){let e=$.useContext(Ec);return Qe(e,vf(r)),e}function ZE(r){let e=$.useContext(Bn);return Qe(e,vf(r)),e}function _f(r){let e=ZE(r),t=e.matches[e.matches.length-1];return Qe(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function eT(){return _f("useRouteId")}function tT(){var s;let r=$.useContext(yf),e=JE("useRouteError"),t=_f("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function nT(){let{router:r}=XE("useNavigate"),e=_f("useNavigate"),t=$.useRef(!1);return _v(()=>{t.current=!0}),$.useCallback(async(o,l={})=>{Fn(t.current,vv),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Lg={};function Tv(r,e,t){!e&&!Lg[r]&&(Lg[r]=!0,Fn(!1,t))}$.memo(rT);function rT({routes:r,future:e,state:t}){return Ev(r,void 0,t,e)}function iT({to:r,replace:e,state:t,relative:s}){Qe(No(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=$.useContext(Un);Fn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=$.useContext(Bn),{pathname:h}=ar(),f=Lr(),m=gf(r,mf(l),h,s==="path"),y=JSON.stringify(m);return $.useEffect(()=>{f(JSON.parse(y),{replace:e,state:t,relative:s})},[f,y,s,e,t]),null}function Rr(r){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){Qe(!No(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),f=$.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=xo(t));let{pathname:m="/",search:y="",hash:E="",state:S=null,key:I="default"}=t,b=$.useMemo(()=>{let N=Nr(m,h);return N==null?null:{location:{pathname:N,search:y,hash:E,state:S,key:I},navigationType:s}},[h,m,y,E,S,I,s]);return Fn(b!=null,`<Router basename="${h}"> is not able to match the URL "${m}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:$.createElement(Un.Provider,{value:f},$.createElement(sl.Provider,{children:e,value:b}))}function oT({children:r,location:e}){return HE(Md(r),e)}function Md(r,e=[]){let t=[];return $.Children.forEach(r,(s,o)=>{if(!$.isValidElement(s))return;let l=[...e,o];if(s.type===$.Fragment){t.push.apply(t,Md(s.props.children,l));return}Qe(s.type===Rr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Md(s.props.children,l)),t.push(h)}),t}var Bu="get",zu="application/x-www-form-urlencoded";function Tc(r){return r!=null&&typeof r.tagName=="string"}function aT(r){return Tc(r)&&r.tagName.toLowerCase()==="button"}function lT(r){return Tc(r)&&r.tagName.toLowerCase()==="form"}function uT(r){return Tc(r)&&r.tagName.toLowerCase()==="input"}function cT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function hT(r,e){return r.button===0&&(!e||e==="_self")&&!cT(r)}var Ou=null;function dT(){if(Ou===null)try{new FormData(document.createElement("form"),0),Ou=!1}catch{Ou=!0}return Ou}var fT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(r){return r!=null&&!fT.has(r)?(Fn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zu}"`),null):r}function pT(r,e){let t,s,o,l,h;if(lT(r)){let f=r.getAttribute("action");s=f?Nr(f,e):null,t=r.getAttribute("method")||Bu,o=Id(r.getAttribute("enctype"))||zu,l=new FormData(r)}else if(aT(r)||uT(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||f.getAttribute("action");if(s=m?Nr(m,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Bu,o=Id(r.getAttribute("formenctype"))||Id(f.getAttribute("enctype"))||zu,l=new FormData(f,r),!dT()){let{name:y,type:E,value:S}=r;if(E==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,S)}}else{if(Tc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bu,s=null,o=zu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}function wf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function mT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function yT(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await mT(l,t);return h.links?h.links():[]}return[]}));return ET(s.flat(1).filter(gT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mg(r,e,t,s,o,l){let h=(m,y)=>t[y]?m.route.id!==t[y].route.id:!0,f=(m,y)=>{var E;return t[y].pathname!==m.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,y)=>h(m,y)||f(m,y)):l==="data"?e.filter((m,y)=>{var S;let E=s.routes[m.route.id];if(!E||!E.hasLoader)return!1;if(h(m,y)||f(m,y))return!0;if(m.route.shouldRevalidate){let I=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=t[0])==null?void 0:S.params)||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function vT(r,e,{includeHydrateFallback:t}={}){return _T(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function _T(r){return[...new Set(r)]}function wT(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function ET(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(wT(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var TT=new Set([100,101,204,205]);function IT(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Nr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Iv(){let r=$.useContext(Po);return wf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function ST(){let r=$.useContext(Ec);return wf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Ef=$.createContext(void 0);Ef.displayName="FrameworkContext";function Sv(){let r=$.useContext(Ef);return wf(r,"You must render this element inside a <HydratedRouter> element"),r}function CT(r,e){let t=$.useContext(Ef),[s,o]=$.useState(!1),[l,h]=$.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:y,onMouseLeave:E,onTouchStart:S}=e,I=$.useRef(null);$.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let z=q=>{q.forEach(G=>{h(G.isIntersecting)})},F=new IntersectionObserver(z,{threshold:.5});return I.current&&F.observe(I.current),()=>{F.disconnect()}}},[r]),$.useEffect(()=>{if(s){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[s]);let b=()=>{o(!0)},N=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:Va(f,b),onBlur:Va(m,N),onMouseEnter:Va(y,b),onMouseLeave:Va(E,N),onTouchStart:Va(S,b)}]:[!1,I,{}]}function Va(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function RT({page:r,...e}){let{router:t}=Iv(),s=$.useMemo(()=>fv(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?$.createElement(kT,{page:r,matches:s,...e}):null}function AT(r){let{manifest:e,routeModules:t}=Sv(),[s,o]=$.useState([]);return $.useEffect(()=>{let l=!1;return yT(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function kT({page:r,matches:e,...t}){let s=ar(),{manifest:o,routeModules:l}=Sv(),{basename:h}=Iv(),{loaderData:f,matches:m}=ST(),y=$.useMemo(()=>Mg(r,e,m,o,s,"data"),[r,e,m,o,s]),E=$.useMemo(()=>Mg(r,e,m,o,s,"assets"),[r,e,m,o,s]),S=$.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let N=new Set,z=!1;if(e.forEach(q=>{var te;let G=o.routes[q.route.id];!G||!G.hasLoader||(!y.some(ie=>ie.route.id===q.route.id)&&q.route.id in f&&((te=l[q.route.id])!=null&&te.shouldRevalidate)||G.hasClientLoader?z=!0:N.add(q.route.id))}),N.size===0)return[];let F=IT(r,h);return z&&N.size>0&&F.searchParams.set("_routes",e.filter(q=>N.has(q.route.id)).map(q=>q.route.id).join(",")),[F.pathname+F.search]},[h,f,s,o,y,e,r,l]),I=$.useMemo(()=>vT(E,o),[E,o]),b=AT(E);return $.createElement($.Fragment,null,S.map(N=>$.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),I.map(N=>$.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),b.map(({key:N,link:z})=>$.createElement("link",{key:N,...z})))}function xT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cv&&(window.__reactRouterVersion="7.6.2")}catch{}function PT({basename:r,children:e,window:t}){let s=$.useRef();s.current==null&&(s.current=gE({window:t,v5Compat:!0}));let o=s.current,[l,h]=$.useState({action:o.action,location:o.location}),f=$.useCallback(m=>{$.startTransition(()=>h(m))},[h]);return $.useLayoutEffect(()=>o.listen(f),[o,f]),$.createElement(sT,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var Rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ic=$.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:f,target:m,to:y,preventScrollReset:E,viewTransition:S,...I},b){let{basename:N}=$.useContext(Un),z=typeof y=="string"&&Rv.test(y),F,q=!1;if(typeof y=="string"&&z&&(F=y,Cv))try{let A=new URL(window.location.href),D=y.startsWith("//")?new URL(A.protocol+y):new URL(y),L=Nr(D.pathname,N);D.origin===A.origin&&L!=null?y=L+D.search+D.hash:q=!0}catch{Fn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=$E(y,{relative:o}),[te,ie,_e]=CT(s,I),de=OT(y,{replace:h,state:f,target:m,preventScrollReset:E,relative:o,viewTransition:S});function O(A){e&&e(A),A.defaultPrevented||de(A)}let C=$.createElement("a",{...I,..._e,href:F||G,onClick:q||l?e:O,ref:xT(b,ie),target:m,"data-discover":!z&&t==="render"?"true":void 0});return te&&!z?$.createElement($.Fragment,null,C,$.createElement(RT,{page:G})):C});Ic.displayName="Link";var NT=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:f,children:m,...y},E){let S=ol(h,{relative:y.relative}),I=ar(),b=$.useContext(Ec),{navigator:N,basename:z}=$.useContext(Un),F=b!=null&&FT(S)&&f===!0,q=N.encodeLocation?N.encodeLocation(S).pathname:S.pathname,G=I.pathname,te=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(G=G.toLowerCase(),te=te?te.toLowerCase():null,q=q.toLowerCase()),te&&z&&(te=Nr(te,z)||te);const ie=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let _e=G===q||!o&&G.startsWith(q)&&G.charAt(ie)==="/",de=te!=null&&(te===q||!o&&te.startsWith(q)&&te.charAt(q.length)==="/"),O={isActive:_e,isPending:de,isTransitioning:F},C=_e?e:void 0,A;typeof s=="function"?A=s(O):A=[s,_e?"active":null,de?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(O):l;return $.createElement(Ic,{...y,"aria-current":C,className:A,ref:E,style:D,to:h,viewTransition:f},typeof m=="function"?m(O):m)});NT.displayName="NavLink";var DT=$.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=Bu,action:f,onSubmit:m,relative:y,preventScrollReset:E,viewTransition:S,...I},b)=>{let N=MT(),z=jT(f,{relative:y}),F=h.toLowerCase()==="get"?"get":"post",q=typeof f=="string"&&Rv.test(f),G=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let ie=te.nativeEvent.submitter,_e=(ie==null?void 0:ie.getAttribute("formmethod"))||h;N(ie||te.currentTarget,{fetcherKey:e,method:_e,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:S})};return $.createElement("form",{ref:b,method:F,action:z,onSubmit:s?m:G,...I,"data-discover":!q&&r==="render"?"true":void 0})});DT.displayName="Form";function bT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Av(r){let e=$.useContext(Po);return Qe(e,bT(r)),e}function OT(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let f=Lr(),m=ar(),y=ol(r,{relative:l});return $.useCallback(E=>{if(hT(E,e)){E.preventDefault();let S=t!==void 0?t:Qa(m)===Qa(y);f(r,{replace:S,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[m,f,y,t,s,e,r,o,l,h])}var VT=0,LT=()=>`__${String(++VT)}__`;function MT(){let{router:r}=Av("useSubmit"),{basename:e}=$.useContext(Un),t=eT();return $.useCallback(async(s,o={})=>{let{action:l,method:h,encType:f,formData:m,body:y}=pT(s,e);if(o.navigate===!1){let E=o.fetcherKey||LT();await r.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||h,formEncType:o.encType||f,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||h,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function jT(r,{relative:e}={}){let{basename:t}=$.useContext(Un),s=$.useContext(Bn);Qe(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...ol(r||".",{relative:e})},h=ar();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(E=>E==="")){f.delete("index"),m.filter(S=>S).forEach(S=>f.append("index",S));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xr([t,l.pathname])),Qa(l)}function FT(r,e={}){let t=$.useContext(yv);Qe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Av("useViewTransitionState"),o=ol(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Nr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Nr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Zu(o.pathname,h)!=null||Zu(o.pathname,l)!=null}[...TT];const UT=()=>{var r;return typeof window<"u"&&(r=window)!=null&&(r=r.Telegram)!=null&&r.WebApp?window.Telegram.WebApp:null},BT=$.createContext(UT()),zT={smoothButtonsTransition:!1,smoothButtonsTransitionMs:10};$.createContext(zT);$.createContext({MainButton:{current:null},BackButton:{current:null}});const kv=()=>$.useContext(BT),$T=()=>{const r=kv(),[e,t]=$.useState(r==null?void 0:r.colorScheme),[s,o]=$.useState((r==null?void 0:r.themeParams)||{});return $.useEffect(()=>{if(!r)return;const l=()=>{t(r.colorScheme),o(r.themeParams)};return r.onEvent("themeChanged",l),()=>{r.offEvent("themeChanged",l)}},[r]),[e,s]},WT=()=>{const r=kv();return[r==null?void 0:r.initDataUnsafe,r==null?void 0:r.initData]},HT=()=>{};var jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,m=o+2<r.length,y=m?r[o+2]:0,E=l>>2,S=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,b=y&63;m||(b=64,h||(I=64)),s.push(t[E],t[S],t[I],t[b])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(xv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||S==null)throw new KT;const I=l<<2|f>>4;if(s.push(I),y!==64){const b=f<<4&240|y>>2;if(s.push(b),S!==64){const N=y<<6&192|S;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class KT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GT=function(r){const e=xv(r);return Pv.encodeByteArray(e,!0)},ec=function(r){return GT(r).replace(/\./g,"")},Nv=function(r){try{return Pv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=()=>QT().__FIREBASE_DEFAULTS__,XT=()=>{if(typeof process>"u"||typeof jg>"u")return;const r=jg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},JT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Nv(r[1]);return e&&JSON.parse(e)},Sc=()=>{try{return HT()||YT()||XT()||JT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Dv=r=>{var e,t;return(t=(e=Sc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},ZT=r=>{const e=Dv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},bv=()=>{var r;return(r=Sc())===null||r===void 0?void 0:r.config},Ov=r=>{var e;return(e=Sc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(r){return r.endsWith(".cloudworkstations.dev")}async function Vv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ec(JSON.stringify(t)),ec(JSON.stringify(h)),""].join(".")}const $a={};function nI(){const r={prod:[],emulator:[]};for(const e of Object.keys($a))$a[e]?r.emulator.push(e):r.prod.push(e);return r}function rI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Fg=!1;function Lv(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||$a[r]===e||$a[r]||Fg)return;$a[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=nI().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function m(I,b){I.setAttribute("width","24"),I.setAttribute("id",b),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Fg=!0,h()},I}function E(I,b){I.setAttribute("id",b),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function S(){const I=rI(s),b=t("text"),N=document.getElementById(b)||document.createElement("span"),z=t("learnmore"),F=document.getElementById(z)||document.createElement("a"),q=t("preprendIcon"),G=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const te=I.element;f(te),E(F,z);const ie=y();m(G,q),te.append(G,N,F,ie),document.body.appendChild(te)}l?(N.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function sI(){var r;const e=(r=Sc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function lI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function cI(){return!sI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function dI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="FirebaseError";class Mr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=fI,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?pI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Mr(o,f,s)}}function pI(r,e){return r.replace(mI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const mI=/\{\$([^}]+)}/g;function gI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _i(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Ug(l)&&Ug(h)){if(!_i(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Ug(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function La(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ma(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function yI(r,e){const t=new vI(r,e);return t.subscribe.bind(t)}class vI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");_I(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Sd),o.error===void 0&&(o.error=Sd),o.complete===void 0&&(o.complete=Sd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _I(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(r){return r&&r._delegate?r._delegate:r}class us{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new eI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TI(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:EI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EI(r){return r===ss?void 0:r}function TI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const SI={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},CI=ke.INFO,RI={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},AI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=RI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=CI,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const kI=(r,e)=>e.some(t=>r instanceof t);let Bg,zg;function xI(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PI(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mv=new WeakMap,jd=new WeakMap,jv=new WeakMap,Cd=new WeakMap,If=new WeakMap;function NI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(pi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Mv.set(t,r)}).catch(()=>{}),If.set(e,r),e}function DI(r){if(jd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});jd.set(r,e)}let Fd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return jd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||jv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bI(r){Fd=r(Fd)}function OI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Rd(this),e,...t);return jv.set(s,e.sort?e.sort():[e]),pi(s)}:PI().includes(r)?function(...e){return r.apply(Rd(this),e),pi(Mv.get(this))}:function(...e){return pi(r.apply(Rd(this),e))}}function VI(r){return typeof r=="function"?OI(r):(r instanceof IDBTransaction&&DI(r),kI(r,xI())?new Proxy(r,Fd):r)}function pi(r){if(r instanceof IDBRequest)return NI(r);if(Cd.has(r))return Cd.get(r);const e=VI(r);return e!==r&&(Cd.set(r,e),If.set(e,r)),e}const Rd=r=>If.get(r);function LI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=pi(h);return s&&h.addEventListener("upgradeneeded",m=>{s(pi(h.result),m.oldVersion,m.newVersion,pi(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const MI=["get","getKey","getAll","getAllKeys","count"],jI=["put","add","delete","clear"],Ad=new Map;function $g(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ad.get(e))return Ad.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=jI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MI.includes(t)))return;const l=async function(h,...f){const m=this.transaction(h,o?"readwrite":"readonly");let y=m.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&m.done]))[0]};return Ad.set(e,l),l}bI(r=>({...r,get:(e,t,s)=>$g(e,t)||r.get(e,t,s),has:(e,t)=>!!$g(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function UI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",Wg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Tf("@firebase/app"),BI="@firebase/app-compat",zI="@firebase/analytics-compat",$I="@firebase/analytics",WI="@firebase/app-check-compat",HI="@firebase/app-check",qI="@firebase/auth",KI="@firebase/auth-compat",GI="@firebase/database",QI="@firebase/data-connect",YI="@firebase/database-compat",XI="@firebase/functions",JI="@firebase/functions-compat",ZI="@firebase/installations",eS="@firebase/installations-compat",tS="@firebase/messaging",nS="@firebase/messaging-compat",rS="@firebase/performance",iS="@firebase/performance-compat",sS="@firebase/remote-config",oS="@firebase/remote-config-compat",aS="@firebase/storage",lS="@firebase/storage-compat",uS="@firebase/firestore",cS="@firebase/ai",hS="@firebase/firestore-compat",dS="firebase",fS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]",pS={[Ud]:"fire-core",[BI]:"fire-core-compat",[$I]:"fire-analytics",[zI]:"fire-analytics-compat",[HI]:"fire-app-check",[WI]:"fire-app-check-compat",[qI]:"fire-auth",[KI]:"fire-auth-compat",[GI]:"fire-rtdb",[QI]:"fire-data-connect",[YI]:"fire-rtdb-compat",[XI]:"fire-fn",[JI]:"fire-fn-compat",[ZI]:"fire-iid",[eS]:"fire-iid-compat",[tS]:"fire-fcm",[nS]:"fire-fcm-compat",[rS]:"fire-perf",[iS]:"fire-perf-compat",[sS]:"fire-rc",[oS]:"fire-rc-compat",[aS]:"fire-gcs",[lS]:"fire-gcs-compat",[uS]:"fire-fst",[hS]:"fire-fst-compat",[cS]:"fire-vertex","fire-js":"fire-js",[dS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,mS=new Map,zd=new Map;function Hg(r,e){try{r.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function wo(r){const e=r.name;if(zd.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;zd.set(e,r);for(const t of tc.values())Hg(t,r);for(const t of mS.values())Hg(t,r);return!0}function Sf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ln(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new al("app","Firebase",gS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=fS;function Fv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Bd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw mi.create("bad-app-name",{appName:String(o)});if(t||(t=bv()),!t)throw mi.create("no-options");const l=tc.get(o);if(l){if(_i(t,l.options)&&_i(s,l.config))return l;throw mi.create("duplicate-app",{appName:o})}const h=new II(o);for(const m of zd.values())h.addComponent(m);const f=new yS(t,s,h);return tc.set(o,f),f}function Uv(r=Bd){const e=tc.get(r);if(!e&&r===Bd&&bv())return Fv();if(!e)throw mi.create("no-app",{appName:r});return e}function gi(r,e,t){var s;let o=(s=pS[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(f.join(" "));return}wo(new us(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebase-heartbeat-database",_S=1,Ya="firebase-heartbeat-store";let kd=null;function Bv(){return kd||(kd=LI(vS,_S,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ya)}catch(t){console.warn(t)}}}}).catch(r=>{throw mi.create("idb-open",{originalErrorMessage:r.message})})),kd}async function wS(r){try{const t=(await Bv()).transaction(Ya),s=await t.objectStore(Ya).get(zv(r));return await t.done,s}catch(e){if(e instanceof Mr)Dr.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function qg(r,e){try{const s=(await Bv()).transaction(Ya,"readwrite");await s.objectStore(Ya).put(e,zv(r)),await s.done}catch(t){if(t instanceof Mr)Dr.warn(t.message);else{const s=mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(s.message)}}}function zv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=1024,TS=30;class IS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Kg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>TS){const h=RS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kg(),{heartbeatsToSend:s,unsentEntries:o}=SS(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Dr.warn(t),""}}}function Kg(){return new Date().toISOString().substring(0,10)}function SS(r,e=ES){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Gg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class CS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hI()?dI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Gg(r){return ec(JSON.stringify({version:2,heartbeats:r})).length}function RS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){wo(new us("platform-logger",e=>new FI(e),"PRIVATE")),wo(new us("heartbeat",e=>new IS(e),"PRIVATE")),gi(Ud,Wg,r),gi(Ud,Wg,"esm2017"),gi("fire-js","")}AS("");function Cf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function $v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kS=$v,Wv=new al("auth","Firebase",$v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Tf("@firebase/auth");function xS(r,...e){nc.logLevel<=ke.WARN&&nc.warn(`Auth (${bo}): ${r}`,...e)}function $u(r,...e){nc.logLevel<=ke.ERROR&&nc.error(`Auth (${bo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(r,...e){throw Af(r,...e)}function jn(r,...e){return Af(r,...e)}function Rf(r,e,t){const s=Object.assign(Object.assign({},kS()),{[e]:t});return new al("auth","Firebase",s).create(e,{appName:r.name})}function Pr(r){return Rf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PS(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&En(r,"argument-error"),Rf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Af(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Wv.create(r,...e)}function we(r,e,...t){if(!r)throw Af(e,...t)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $u(e),new Error(e)}function br(r,e){r||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function NS(){return Qg()==="http:"||Qg()==="https:"}function Qg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NS()||aI()||"connection"in navigator)?navigator.onLine:!0}function bS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=iI()||lI()}get(){return DS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r,e){br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LS=new ul(3e4,6e4);function Ri(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ai(r,e,t,s,o={}){return qv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=ll(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:m},l);return oI()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(y.credentials="include"),Hv.fetch()(await Kv(r,r.config.apiHost,t,f),y)})}async function qv(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},OS),e);try{const o=new jS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Vu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vu(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Vu(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw Vu(r,"user-disabled",h);const E=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Rf(r,E,y);En(r,E)}}catch(o){if(o instanceof Mr)throw o;En(r,"network-request-failed",{message:String(o)})}}async function cl(r,e,t,s,o={}){const l=await Ai(r,e,t,s,o);return"mfaPendingCredential"in l&&En(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Kv(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?kf(r.config,o):`${r.config.apiScheme}://${o}`;return VS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function MS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(jn(this.auth,"network-request-failed")),LS.get())})}}function Vu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=jn(r,e,s);return o.customData._tokenResponse=t,o}function Yg(r){return r!==void 0&&r.enterprise!==void 0}class FS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function US(r,e){return Ai(r,"GET","/v2/recaptchaConfig",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(r,e){return Ai(r,"POST","/v1/accounts:delete",e)}async function rc(r,e){return Ai(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zS(r,e=!1){const t=$t(r),s=await t.getIdToken(e),o=xf(s);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Wa(xd(o.auth_time)),issuedAtTime:Wa(xd(o.iat)),expirationTime:Wa(xd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function xd(r){return Number(r)*1e3}function xf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return $u("JWT malformed, contained fewer than 3 sections"),null;try{const o=Nv(t);return o?JSON.parse(o):($u("Failed to decode base64 JWT payload"),null)}catch(o){return $u("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Xg(r){const e=xf(r);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Mr&&$S(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function $S({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Xa(r,rc(t,{idToken:s}));we(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Gv(l.providerUserInfo):[],f=qS(r.providerData,h),m=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=m?y:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Wd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,S)}async function HS(r){const e=$t(r);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Gv(r){return r.map(e=>{var{providerId:t}=e,s=Cf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r,e){const t=await qv(r,{},async()=>{const s=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Kv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(m.credentials="include"),Hv.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GS(r,e){return Ai(r,"POST","/v2/accounts:revokeToken",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=Xg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await KS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new go;return s&&(we(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(we(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(r,e){we(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Mn{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Cf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zS(this,e)}reload(){return HS(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ic(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Pr(this.auth));const e=await this.getIdToken();return await Xa(this,BS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,f,m,y,E;const S=(s=t.displayName)!==null&&s!==void 0?s:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(h=t.photoURL)!==null&&h!==void 0?h:void 0,z=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,q=(y=t.createdAt)!==null&&y!==void 0?y:void 0,G=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:te,emailVerified:ie,isAnonymous:_e,providerData:de,stsTokenManager:O}=t;we(te&&O,e,"internal-error");const C=go.fromJSON(this.name,O);we(typeof te=="string",e,"internal-error"),ui(S,e.name),ui(I,e.name),we(typeof ie=="boolean",e,"internal-error"),we(typeof _e=="boolean",e,"internal-error"),ui(b,e.name),ui(N,e.name),ui(z,e.name),ui(F,e.name),ui(q,e.name),ui(G,e.name);const A=new Mn({uid:te,auth:e,email:I,emailVerified:ie,displayName:S,isAnonymous:_e,photoURL:N,phoneNumber:b,tenantId:z,stsTokenManager:C,createdAt:q,lastLoginAt:G});return de&&Array.isArray(de)&&(A.providerData=de.map(D=>Object.assign({},D))),F&&(A._redirectEventId=F),A}static async _fromIdTokenResponse(e,t,s=!1){const o=new go;o.updateFromServerResponse(t);const l=new Mn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ic(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];we(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Gv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new go;f.updateFromIdToken(s);const m=new Mn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=new Map;function kr(r){br(r instanceof Function,"Expected a class definition");let e=Jg.get(r);return e?(br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qv.type="NONE";const Zg=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(r,e,t){return`firebase:${r}:${e}:${t}`}class yo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?Mn._fromGetAccountInfoResponse(this.auth,t,e):null}return Mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new yo(kr(Zg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||kr(Zg);const h=Wu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){let S;if(typeof E=="string"){const I=await rc(e,{idToken:E}).catch(()=>{});if(!I)break;S=await Mn._fromGetAccountInfoResponse(e,I,E)}else S=Mn._fromJSON(e,E);y!==l&&(f=S),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new yo(l,e,s):(l=m[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new yo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t_(e))return"Blackberry";if(n_(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||Jv(e))&&!e.includes("edge/"))return"Chrome";if(e_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Yv(r=jt()){return/firefox\//i.test(r)}function Xv(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jv(r=jt()){return/crios\//i.test(r)}function Zv(r=jt()){return/iemobile/i.test(r)}function e_(r=jt()){return/android/i.test(r)}function t_(r=jt()){return/blackberry/i.test(r)}function n_(r=jt()){return/webos/i.test(r)}function Pf(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function QS(r=jt()){var e;return Pf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YS(){return uI()&&document.documentMode===10}function r_(r=jt()){return Pf(r)||e_(r)||n_(r)||t_(r)||/windows phone/i.test(r)||Zv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r,e=[]){let t;switch(r){case"Browser":t=ey(jt());break;case"Worker":t=`${ey(jt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const m=e(l);h(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(r,e={}){return Ai(r,"GET","/v2/passwordPolicy",Ri(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=6;class e1{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:ZS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ty(this),this.idTokenSubscription=new ty(this),this.beforeStateQueue=new XS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),s=await Mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ln(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Pr(this));const t=e?$t(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JS(this),t=new e1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await GS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ki(r){return $t(r)}class ty{constructor(e){this.auth=e,this.observer=null,this.addObserver=yI(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n1(r){Cc=r}function s_(r){return Cc.loadJS(r)}function r1(){return Cc.recaptchaEnterpriseScript}function i1(){return Cc.gapiScript}function s1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class o1{constructor(){this.enterprise=new a1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class a1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const l1="recaptcha-enterprise",o_="NO_RECAPTCHA";class u1{constructor(e){this.type=l1,this.auth=ki(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{US(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new FS(m);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(m=>{f(m)})})}function o(l,h,f){const m=window.grecaptcha;Yg(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(o_)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new o1().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&Yg(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=r1();m.length!==0&&(m+=f),s_(m).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function ny(r,e,t,s=!1,o=!1){const l=new u1(r);let h;if(o)h=o_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Hd(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await ny(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ny(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(r,e){const t=Sf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_i(l,e??{}))return o;En(o,"already-initialized")}return t.initialize({options:e})}function h1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(kr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function d1(r,e,t){const s=ki(r);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=a_(e),{host:h,port:f}=f1(e),m=f===null?"":`:${f}`,y={url:`${l}//${h}${m}/`},E=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(_i(y,s.config.emulator)&&_i(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(h)?(Vv(`${l}//${h}${m}`),Lv("Auth",!0)):p1()}function a_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function f1(r){const e=a_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ry(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:ry(h)}}}function ry(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function p1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function m1(r,e){return Ai(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,e){return cl(r,"POST","/v1/accounts:signInWithPassword",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}async function v1(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Nf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ja(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ja(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hd(e,t,"signInWithPassword",g1);case"emailLink":return y1(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hd(e,s,"signUpPassword",m1);case"emailLink":return v1(e,{idToken:t,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(r,e){return cl(r,"POST","/v1/accounts:signInWithIdp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="http://localhost";class cs extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):En("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Cf(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new cs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,vo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:_1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function E1(r){const e=La(Ma(r)).link,t=e?La(Ma(e)).deep_link_id:null,s=La(Ma(r)).deep_link_id;return(s?La(Ma(s)).link:null)||s||t||e||r}class Df{constructor(e){var t,s,o,l,h,f;const m=La(Ma(e)),y=(t=m.apiKey)!==null&&t!==void 0?t:null,E=(s=m.oobCode)!==null&&s!==void 0?s:null,S=w1((o=m.mode)!==null&&o!==void 0?o:null);we(y&&E&&S,"argument-error"),this.apiKey=y,this.operation=S,this.code=E,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.lang)!==null&&h!==void 0?h:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=E1(e);try{return new Df(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Ja._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Df.parseLink(t);return we(s,"argument-error"),Ja._fromEmailAndCode(e,s.code,s.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends bf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends hl{constructor(){super("facebook.com")}static credential(e){return cs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cs._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return er.credential(t,s)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends hl{constructor(){super("github.com")}static credential(e){return cs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends hl{constructor(){super("twitter.com")}static credential(e,t){return cs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,e){return cl(r,"POST","/v1/accounts:signUp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Mn._fromIdTokenResponse(e,s,o),h=iy(s);return new hs({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=iy(s);return new hs({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function iy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Mr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new sc(e,t,s,o)}}function l_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(r,l,e,s):l})}async function I1(r,e,t=!1){const s=await Xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return hs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(r,e,t=!1){const{auth:s}=r;if(ln(s.app))return Promise.reject(Pr(s));const o="reauthenticate";try{const l=await Xa(r,l_(s,o,e,r),t);we(l.idToken,s,"internal-error");const h=xf(l.idToken);we(h,s,"internal-error");const{sub:f}=h;return we(r.uid===f,s,"user-mismatch"),hs._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&En(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u_(r,e,t=!1){if(ln(r.app))return Promise.reject(Pr(r));const s="signIn",o=await l_(r,s,e),l=await hs._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function C1(r,e){return u_(ki(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(r){const e=ki(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R1(r,e,t){if(ln(r.app))return Promise.reject(Pr(r));const s=ki(r),h=await Hd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",T1).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&c_(r),m}),f=await hs._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function A1(r,e,t){return ln(r.app)?Promise.reject(Pr(r)):C1($t(r),Oo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&c_(r),s})}function k1(r,e,t,s){return $t(r).onIdTokenChanged(e,t,s)}function x1(r,e,t){return $t(r).beforeAuthStateChanged(e,t)}function P1(r){return $t(r).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=1e3,D1=10;class d_ extends h_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,m)=>{this.notifyListeners(h,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);YS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,D1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},N1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}d_.type="LOCAL";const b1=d_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_ extends h_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}f_.type="SESSION";const p_=f_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Rc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),m=await O1(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,m)=>{const y=Of("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const I=S;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(E),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function L1(r){tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function M1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function F1(){return m_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="firebaseLocalStorageDb",U1=1,ac="firebaseLocalStorage",y_="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ac(r,e){return r.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function B1(){const r=indexedDB.deleteDatabase(g_);return new dl(r).toPromise()}function qd(){const r=indexedDB.open(g_,U1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ac,{keyPath:y_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ac)?e(s):(s.close(),await B1(),e(await qd()))})})}async function sy(r,e,t){const s=Ac(r,!0).put({[y_]:e,value:t});return new dl(s).toPromise()}async function z1(r,e){const t=Ac(r,!1).get(e),s=await new dl(t).toPromise();return s===void 0?null:s.value}function oy(r,e){const t=Ac(r,!0).delete(e);return new dl(t).toPromise()}const $1=800,W1=3;class v_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>W1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(F1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await M1(),!this.activeServiceWorker)return;this.sender=new V1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qd();return await sy(e,oc,"1"),await oy(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>sy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>z1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ac(o,!1).getAll();return new dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v_.type="LOCAL";const H1=v_;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(r,e){return e?kr(e):(we(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function q1(r){return u_(r.auth,new Vf(r),r.bypassAuthState)}function K1(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),S1(t,new Vf(r),r.bypassAuthState)}async function G1(r){const{auth:e,user:t}=r;return we(t,e,"internal-error"),I1(t,new Vf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q1;case"linkViaPopup":case"linkViaRedirect":return G1;case"reauthViaPopup":case"reauthViaRedirect":return K1;default:En(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new ul(2e3,1e4);async function E_(r,e,t){if(ln(r.app))return Promise.reject(jn(r,"operation-not-supported-in-this-environment"));const s=ki(r);PS(r,e,bf);const o=__(s,t);return new os(s,"signInViaPopup",e,o).executeNotNull()}class os extends w_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,os.currentPopupAction&&os.currentPopupAction.cancel(),os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q1.get())};e()}}os.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="pendingRedirect",Hu=new Map;class X1 extends w_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const s=await J1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J1(r,e){const t=tC(e),s=eC(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Z1(r,e){Hu.set(r._key(),e)}function eC(r){return kr(r._redirectPersistence)}function tC(r){return Wu(Y1,r.config.apiKey,r.name)}async function nC(r,e,t=!1){if(ln(r.app))return Promise.reject(Pr(r));const s=ki(r),o=__(s,e),h=await new X1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=10*60*1e3;class iC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!T_(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(jn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ay(e))}saveEventToCache(e){this.cachedEventUids.add(ay(e)),this.lastProcessedEventTime=Date.now()}}function ay(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function T_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(r,e={}){return Ai(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lC=/^https?/;async function uC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await oC(r);for(const t of e)try{if(cC(t))return}catch{}En(r,"unauthorized-domain")}function cC(r){const e=$d(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!lC.test(t))return!1;if(aC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new ul(3e4,6e4);function ly(){const r=tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function dC(r){return new Promise((e,t)=>{var s,o,l;function h(){ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ly(),t(jn(r,"network-request-failed"))},timeout:hC.get()})}if(!((o=(s=tr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=tr().gapi)===null||l===void 0)&&l.load)h();else{const f=s1("iframefcb");return tr()[f]=()=>{gapi.load?h():t(jn(r,"network-request-failed"))},s_(`${i1()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw qu=null,e})}let qu=null;function fC(r){return qu=qu||dC(r),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new ul(5e3,15e3),mC="__/auth/iframe",gC="emulator/auth/iframe",yC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _C(r){const e=r.config;we(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?kf(e,gC):`https://${r.config.authDomain}/${mC}`,s={apiKey:e.apiKey,appName:r.name,v:bo},o=vC.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ll(s).slice(1)}`}async function wC(r){const e=await fC(r),t=tr().gapi;return we(t,r,"internal-error"),e.open({where:document.body,url:_C(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yC,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=jn(r,"network-request-failed"),f=tr().setTimeout(()=>{l(h)},pC.get());function m(){tr().clearTimeout(f),o(s)}s.ping(m).then(m,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TC=500,IC=600,SC="_blank",CC="http://localhost";class uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RC(r,e,t,s=TC,o=IC){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},EC),{width:s.toString(),height:o.toString(),top:l,left:h}),y=jt().toLowerCase();t&&(f=Jv(y)?SC:t),Yv(y)&&(e=e||CC,m.scrollbars="yes");const E=Object.entries(m).reduce((I,[b,N])=>`${I}${b}=${N},`,"");if(QS(y)&&f!=="_self")return AC(e||"",f),new uy(null);const S=window.open(e||"",f,E);we(S,r,"popup-blocked");try{S.focus()}catch{}return new uy(S)}function AC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="__/auth/handler",xC="emulator/auth/handler",PC=encodeURIComponent("fac");async function cy(r,e,t,s,o,l){we(r.config.authDomain,r,"auth-domain-config-required"),we(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:bo,eventId:o};if(e instanceof bf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",gI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof hl){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const m=await r._getAppCheckToken(),y=m?`#${PC}=${encodeURIComponent(m)}`:"";return`${NC(r)}?${ll(f).slice(1)}${y}`}function NC({config:r}){return r.emulator?kf(r,xC):`https://${r.authDomain}/${kC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="webStorageSupport";class DC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p_,this._completeRedirectFn=nC,this._overrideRedirectResult=Z1}async _openPopup(e,t,s,o){var l;br((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await cy(e,t,s,$d(),o);return RC(e,h,Of())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await cy(e,t,s,$d(),o);return L1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await wC(e),s=new iC(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pd,{type:Pd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Pd];h!==void 0&&t(!!h),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r_()||Xv()||Pf()}}const bC=DC;var hy="@firebase/auth",dy="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LC(r){wo(new us("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i_(r)},y=new t1(s,o,l,m);return h1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),wo(new us("auth-internal",e=>{const t=ki(e.getProvider("auth").getImmediate());return(s=>new OC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(hy,dy,VC(r)),gi(hy,dy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=5*60,jC=Ov("authIdTokenMaxAge")||MC;let fy=null;const FC=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>jC)return;const o=t==null?void 0:t.token;fy!==o&&(fy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function I_(r=Uv()){const e=Sf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=c1(r,{popupRedirectResolver:bC,persistence:[H1,b1,p_]}),s=Ov("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=FC(l.toString());x1(t,h,()=>h(t.currentUser)),k1(t,f=>h(f))}}const o=Dv("auth");return o&&d1(t,`http://${o}`),t}function UC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}n1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=jn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",UC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LC("Browser");var BC="firebase",zC="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(BC,zC,"app");const $C={apiKey:"AIzaSyDO5YcqXk5nhPT2OXyCScTamwmedBEFxTE",authDomain:"collabrianexus.firebaseapp.com",projectId:"collabrianexus",storageBucket:"collabrianexus.firebasestorage.app",messagingSenderId:"1047185526287",appId:"1:1047185526287:web:ada10cb1be8c92c0799d7a",measurementId:"G-PNZLHYBXYT"},WC=Fv($C),ls=I_(WC),HC=$.createContext();function qC(){return $.useContext(HC)}const S_=1e3,Kd=60*S_,Gd=60*Kd,Nd=24*Gd;function py(r){const e=Date.now(),t=Math.max(r-e,0),s=Math.floor(t/Gd),o=Math.floor(t%Gd/Kd),l=Math.floor(t%Kd/S_);return{hours:s,minutes:o,seconds:l,total:t}}function KC({hours:r,minutes:e,seconds:t}){const s=o=>o.toString().padStart(2,"0");return`${s(r)}:${s(e)}:${s(t)}`}function GC(r=1,e=3){return Math.floor(Math.random()*(e-r+1))+r}function Qd(){const r=localStorage.getItem("miningState");return r?JSON.parse(r):null}function QC(r){localStorage.setItem("miningState",JSON.stringify(r))}const C_=[{id:"news_001",title:"TON Blockchain Hits New All-Time High",body:"The TON blockchain reached a new all-time high in daily transactions, marking a significant milestone for the network and its growing ecosystem.",source:"CryptoNews",sourceUrl:"https://cryptonews.com/ton-all-time-high",authorName:"Jane Reporter",createdAt:"2025-06-18T12:00:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1383710952/photo/ethereum-coin-token-with-candlestick-chart-background-digital-currency-cryptocurrency.jpg?s=612x612&w=0&k=20&c=3UZ1_4uXtyKq-UMKsf4fYd0fzPR8DWTnS_MxgrbJoOs=",tags:["TON","milestone"],summary:"TON blockchain breaks records with daily transactions.",published:!0},{id:"news_002",title:"Ethereum Gas Fees Drop to 2023 Levels",body:"Ethereum users are celebrating as gas fees return to levels not seen since 2023, making transactions more affordable for everyone.",source:"BlockTimes",sourceUrl:"https://blocktimes.com/eth-gas-fees",authorName:"Sam Crypto",createdAt:"2025-06-17T09:30:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1383710952/photo/ethereum-coin-token-with-candlestick-chart-background-digital-currency-cryptocurrency.jpg?s=612x612&w=0&k=20&c=3UZ1_4uXtyKq-UMKsf4fYd0fzPR8DWTnS_MxgrbJoOs=",tags:["Ethereum","fees","market"],summary:"ETH gas fees hit a two-year low.",published:!0},{id:"news_003",title:"Crypto Project Launches Telegram Mini App",body:"A new Telegram Mini App aims to make crypto onboarding easier than ever, integrating wallet creation and token swaps directly in chat.",source:"DappDaily",sourceUrl:"https://dappdaily.com/telegram-miniapp-launch",authorName:"Alex Blockchain",createdAt:"2025-06-15T17:45:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1383710952/photo/ethereum-coin-token-with-candlestick-chart-background-digital-currency-cryptocurrency.jpg?s=612x612&w=0&k=20&c=3UZ1_4uXtyKq-UMKsf4fYd0fzPR8DWTnS_MxgrbJoOs=",tags:["Telegram","miniapp","launch"],summary:"New Mini App simplifies crypto onboarding.",published:!0}],YC=({news:r})=>{const e=Lr();return w.jsxs("div",{className:"mining-card",style:{marginBottom:20,cursor:"pointer",transition:"box-shadow 0.2s",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",display:"flex",flexDirection:"row",alignItems:"flex-start",padding:0,overflow:"hidden",minHeight:120,maxWidth:300,border:"1px solid rgba(255, 255, 255, 0.1)"},tabIndex:0,onClick:()=>e(`/news/${r.id}`),"aria-label":`Read news: ${r.title}`,children:[r.bannerImageUrl&&w.jsx("img",{src:r.bannerImageUrl,alt:r.title,style:{width:110,height:110,objectFit:"cover",borderRadius:"16px 0 0 16px",flexShrink:0}}),w.jsxs("div",{style:{padding:"16px",flex:1},children:[w.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:6,color:"var(--text-main)"},children:r.title}),w.jsxs("div",{style:{display:"flex",alignItems:"center",fontSize:10,paddingTop:4},children:[w.jsx("span",{style:{fontWeight:500,marginRight:8},children:r.source}),w.jsx("span",{className:"news-date",style:{color:"#888",fontSize:11},children:new Date(r.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]})]})]})},XC=()=>w.jsxs("main",{style:{maxWidth:540,margin:"0 auto",padding:"0 1.2rem 1.2rem 0rem",width:"100%"},children:[w.jsx("div",{className:"divider"}),w.jsx("h2",{className:"section-header",style:{margin:"24px 0 16px 0",padding:"0 1.2rem"},children:"News"}),C_.filter(r=>r.published).map(r=>w.jsx(YC,{news:r},r.id))]}),Lf="/WebApp/assets/logo-CVABkKps.webp",ja=()=>w.jsxs("header",{className:"main-header",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"18px 0 0 0"},children:[w.jsx("img",{src:Lf,alt:"Collabria Nexus Logo",style:{height:48,width:48,marginRight:12,borderRadius:12,boxShadow:"0 0 8px #00ff41cc"}}),w.jsx("span",{className:"app-title",style:{fontSize:28,fontWeight:700,color:"#00ff41",textShadow:"0 0 8px #00ff41cc",letterSpacing:1},children:"Collabria Nexus"})]}),JC="/WebApp/assets/rotatingImg-CZMXQk1B.png";function ZC({open:r}){return r?w.jsx("div",{className:"modal-overlay",children:w.jsx("div",{className:"modal-content",children:w.jsx("h2",{children:"Mining Completed!"})})}):null}function eR({coins:r,setCoins:e,baseRate:t=1,userName:s="User"}){const[o,l]=$.useState(()=>{const ie=Qd();return(ie==null?void 0:ie.target)||Date.now()+Nd}),[h,f]=$.useState(py(o)),[m,y]=$.useState(!1),[E,S]=$.useState(!1),[I,b]=$.useState(!1),[N,z]=$.useState(()=>{const ie=Qd();return(ie==null?void 0:ie.streak)||1}),F=h.total>0;$.useEffect(()=>{const ie=setInterval(()=>{const _e=py(o);f(_e),_e.total===0&&y(!0)},1e3);return()=>clearInterval(ie)},[o]),$.useEffect(()=>{QC({target:o,coins:r,streak:N})},[o,r,N]);const q=()=>{S(!0),setTimeout(()=>{const ie=GC(),_e=r+t+ie;e(_e),l(Date.now()+Nd),y(!1),S(!1),b(!0),z(de=>de+1),setTimeout(()=>b(!1),1200)},1200)},G=1-h.total/Nd,te=Math.min(N%7,7)/7;return w.jsxs("div",{className:"mining-card",tabIndex:0,"aria-label":"Mining Card",children:[w.jsxs("div",{className:"greeting",children:["Welcome back, ",s,"!"]}),w.jsxs("div",{className:"mining-ring",children:[F&&w.jsx("span",{className:"pulse"}),w.jsx("div",{className:"mining-icon",style:{background:"none",boxShadow:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:w.jsx("img",{src:JC,alt:"Mining Triangle",className:F?"rotating-triangle-animate":"",style:{width:64,height:64,objectFit:"contain",display:"block",filter:"drop-shadow(0 0 8px #2CFF05)"}})})]}),w.jsx("div",{className:"balance",children:r.toFixed(5)}),w.jsxs("div",{className:"usd",children:["$ ",(r*5.54).toFixed(5)]}),w.jsxs("div",{className:"streak-label",children:["Daily Streak: ",N," days"]}),w.jsx("div",{className:"streak-bar","aria-label":"Streak Progress",children:w.jsx("div",{className:"streak-bar-inner",style:{width:`${te*100}%`}})}),w.jsx("div",{className:"mining-progress-bar","aria-label":"Mining Progress",children:w.jsx("div",{className:"mining-progress-inner",style:{width:`${Math.max(0,Math.min(G*100,100))}%`}})}),w.jsx("div",{className:"mining-timer",children:KC(h)}),w.jsxs("button",{className:"action-btn",style:{marginTop:"1.1rem",padding:"0.7rem 1.2rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},onClick:ie=>{const _e=ie.currentTarget,de=document.createElement("span"),O=Math.max(_e.clientWidth,_e.clientHeight),C=O/2;de.classList.add("ripple"),de.style.width=de.style.height=`${O}px`,de.style.left=`${ie.clientX-_e.getBoundingClientRect().left-C}px`,de.style.top=`${ie.clientY-_e.getBoundingClientRect().top-C}px`,_e.appendChild(de),de.addEventListener("animationend",()=>de.remove()),F||q()},disabled:F,tabIndex:0,"aria-label":F?"Mining in progress":"Start Mining",children:[w.jsx("span",{className:"icon-play"}),F?"Mining...":"Start Mining"]}),w.jsx(ZC,{open:m})]})}const tR=()=>{const[r,e]=$.useState(()=>{const o=Qd();return(o==null?void 0:o.coins)||0}),t="Alex",s=.4;return w.jsxs("div",{className:"main-bg",children:[w.jsx(ja,{}),w.jsx("div",{className:"divider"}),w.jsxs("main",{style:{width:"100%",maxWidth:540,margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[w.jsx(eR,{coins:r,setCoins:e,userName:t}),w.jsxs("div",{className:"referral-card",tabIndex:0,"aria-label":"Referral Group Card",children:[w.jsxs("div",{className:"avatar-cluster",children:[w.jsx("div",{className:"avatar",children:"A"}),w.jsx("div",{className:"avatar",children:"B"}),w.jsx("div",{className:"avatar",children:"C"}),w.jsx("div",{className:"avatar",children:"+"})]}),w.jsx("div",{className:"referral-title",children:"Group Mining Boost"}),w.jsx("div",{className:"referral-desc",children:"Invite friends to your group and increase your mining rate by 10% for each member!"}),w.jsxs("div",{className:"group-progress-label",children:["Group Boost: ",(s*100).toFixed(0),"%"]}),w.jsx("div",{className:"group-progress-bar","aria-label":"Group Mining Progress",children:w.jsx("div",{className:"group-progress-inner",style:{width:`${s*100}%`}})}),w.jsxs("button",{className:"invite-btn",children:[w.jsx("span",{className:"material-symbols-outlined",style:{fontSize:24,verticalAlign:"middle"},children:"group_add"}),w.jsx("span",{className:"btn-text",children:"Invite your friends now"})]})]})]})]})};function Fa(){const r=$.useRef(null);return $.useEffect(()=>{const e=r.current,t=e.getContext("2d");let s,o=window.innerWidth,l=window.innerHeight;e.width=o,e.height=l;const h=["0","1"],f=22,m=Math.floor(o/f),y=Array(m).fill(0).map(()=>Math.random()*-l);function E(){t.clearRect(0,0,o,l),t.font=`${f}px monospace`,t.fillStyle="#2CFF05",t.globalAlpha=.38;for(let S=0;S<m;S++){if(Math.random()>.93)continue;const I=h[Math.floor(Math.random()*h.length)],b=S*f,N=y[S]*f;t.save(),t.globalAlpha=Math.max(0,1-y[S]/(l/f)),t.fillText(I,b,N),t.restore(),y[S]+=.18+Math.random()*.08,N>l&&Math.random()>.98&&(y[S]=Math.random()*-20)}s=requestAnimationFrame(E)}return E(),()=>cancelAnimationFrame(s)},[]),w.jsx("div",{className:"matrix-bg",children:w.jsx("canvas",{ref:r,className:"matrix-canvas"})})}var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,R_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,C){function A(){}A.prototype=C.prototype,O.D=C.prototype,O.prototype=new A,O.prototype.constructor=O,O.C=function(D,L,M){for(var k=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)k[tt-2]=arguments[tt];return C.prototype[L].apply(D,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,C,A){A||(A=0);var D=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)D[L]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(L=0;16>L;++L)D[L]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=O.g[0],A=O.g[1],L=O.g[2];var M=O.g[3],k=C+(M^A&(L^M))+D[0]+3614090360&4294967295;C=A+(k<<7&4294967295|k>>>25),k=M+(L^C&(A^L))+D[1]+3905402710&4294967295,M=C+(k<<12&4294967295|k>>>20),k=L+(A^M&(C^A))+D[2]+606105819&4294967295,L=M+(k<<17&4294967295|k>>>15),k=A+(C^L&(M^C))+D[3]+3250441966&4294967295,A=L+(k<<22&4294967295|k>>>10),k=C+(M^A&(L^M))+D[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=M+(L^C&(A^L))+D[5]+1200080426&4294967295,M=C+(k<<12&4294967295|k>>>20),k=L+(A^M&(C^A))+D[6]+2821735955&4294967295,L=M+(k<<17&4294967295|k>>>15),k=A+(C^L&(M^C))+D[7]+4249261313&4294967295,A=L+(k<<22&4294967295|k>>>10),k=C+(M^A&(L^M))+D[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=M+(L^C&(A^L))+D[9]+2336552879&4294967295,M=C+(k<<12&4294967295|k>>>20),k=L+(A^M&(C^A))+D[10]+4294925233&4294967295,L=M+(k<<17&4294967295|k>>>15),k=A+(C^L&(M^C))+D[11]+2304563134&4294967295,A=L+(k<<22&4294967295|k>>>10),k=C+(M^A&(L^M))+D[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=M+(L^C&(A^L))+D[13]+4254626195&4294967295,M=C+(k<<12&4294967295|k>>>20),k=L+(A^M&(C^A))+D[14]+2792965006&4294967295,L=M+(k<<17&4294967295|k>>>15),k=A+(C^L&(M^C))+D[15]+1236535329&4294967295,A=L+(k<<22&4294967295|k>>>10),k=C+(L^M&(A^L))+D[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=M+(A^L&(C^A))+D[6]+3225465664&4294967295,M=C+(k<<9&4294967295|k>>>23),k=L+(C^A&(M^C))+D[11]+643717713&4294967295,L=M+(k<<14&4294967295|k>>>18),k=A+(M^C&(L^M))+D[0]+3921069994&4294967295,A=L+(k<<20&4294967295|k>>>12),k=C+(L^M&(A^L))+D[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=M+(A^L&(C^A))+D[10]+38016083&4294967295,M=C+(k<<9&4294967295|k>>>23),k=L+(C^A&(M^C))+D[15]+3634488961&4294967295,L=M+(k<<14&4294967295|k>>>18),k=A+(M^C&(L^M))+D[4]+3889429448&4294967295,A=L+(k<<20&4294967295|k>>>12),k=C+(L^M&(A^L))+D[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=M+(A^L&(C^A))+D[14]+3275163606&4294967295,M=C+(k<<9&4294967295|k>>>23),k=L+(C^A&(M^C))+D[3]+4107603335&4294967295,L=M+(k<<14&4294967295|k>>>18),k=A+(M^C&(L^M))+D[8]+1163531501&4294967295,A=L+(k<<20&4294967295|k>>>12),k=C+(L^M&(A^L))+D[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=M+(A^L&(C^A))+D[2]+4243563512&4294967295,M=C+(k<<9&4294967295|k>>>23),k=L+(C^A&(M^C))+D[7]+1735328473&4294967295,L=M+(k<<14&4294967295|k>>>18),k=A+(M^C&(L^M))+D[12]+2368359562&4294967295,A=L+(k<<20&4294967295|k>>>12),k=C+(A^L^M)+D[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=M+(C^A^L)+D[8]+2272392833&4294967295,M=C+(k<<11&4294967295|k>>>21),k=L+(M^C^A)+D[11]+1839030562&4294967295,L=M+(k<<16&4294967295|k>>>16),k=A+(L^M^C)+D[14]+4259657740&4294967295,A=L+(k<<23&4294967295|k>>>9),k=C+(A^L^M)+D[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=M+(C^A^L)+D[4]+1272893353&4294967295,M=C+(k<<11&4294967295|k>>>21),k=L+(M^C^A)+D[7]+4139469664&4294967295,L=M+(k<<16&4294967295|k>>>16),k=A+(L^M^C)+D[10]+3200236656&4294967295,A=L+(k<<23&4294967295|k>>>9),k=C+(A^L^M)+D[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=M+(C^A^L)+D[0]+3936430074&4294967295,M=C+(k<<11&4294967295|k>>>21),k=L+(M^C^A)+D[3]+3572445317&4294967295,L=M+(k<<16&4294967295|k>>>16),k=A+(L^M^C)+D[6]+76029189&4294967295,A=L+(k<<23&4294967295|k>>>9),k=C+(A^L^M)+D[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=M+(C^A^L)+D[12]+3873151461&4294967295,M=C+(k<<11&4294967295|k>>>21),k=L+(M^C^A)+D[15]+530742520&4294967295,L=M+(k<<16&4294967295|k>>>16),k=A+(L^M^C)+D[2]+3299628645&4294967295,A=L+(k<<23&4294967295|k>>>9),k=C+(L^(A|~M))+D[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=M+(A^(C|~L))+D[7]+1126891415&4294967295,M=C+(k<<10&4294967295|k>>>22),k=L+(C^(M|~A))+D[14]+2878612391&4294967295,L=M+(k<<15&4294967295|k>>>17),k=A+(M^(L|~C))+D[5]+4237533241&4294967295,A=L+(k<<21&4294967295|k>>>11),k=C+(L^(A|~M))+D[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=M+(A^(C|~L))+D[3]+2399980690&4294967295,M=C+(k<<10&4294967295|k>>>22),k=L+(C^(M|~A))+D[10]+4293915773&4294967295,L=M+(k<<15&4294967295|k>>>17),k=A+(M^(L|~C))+D[1]+2240044497&4294967295,A=L+(k<<21&4294967295|k>>>11),k=C+(L^(A|~M))+D[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=M+(A^(C|~L))+D[15]+4264355552&4294967295,M=C+(k<<10&4294967295|k>>>22),k=L+(C^(M|~A))+D[6]+2734768916&4294967295,L=M+(k<<15&4294967295|k>>>17),k=A+(M^(L|~C))+D[13]+1309151649&4294967295,A=L+(k<<21&4294967295|k>>>11),k=C+(L^(A|~M))+D[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=M+(A^(C|~L))+D[11]+3174756917&4294967295,M=C+(k<<10&4294967295|k>>>22),k=L+(C^(M|~A))+D[2]+718787259&4294967295,L=M+(k<<15&4294967295|k>>>17),k=A+(M^(L|~C))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(L+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+M&4294967295}s.prototype.u=function(O,C){C===void 0&&(C=O.length);for(var A=C-this.blockSize,D=this.B,L=this.h,M=0;M<C;){if(L==0)for(;M<=A;)o(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<C;)if(D[L++]=O.charCodeAt(M++),L==this.blockSize){o(this,D),L=0;break}}else for(;M<C;)if(D[L++]=O[M++],L==this.blockSize){o(this,D),L=0;break}}this.h=L,this.o+=C},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;var A=8*this.o;for(C=O.length-8;C<O.length;++C)O[C]=A&255,A/=256;for(this.u(O),O=Array(16),C=A=0;4>C;++C)for(var D=0;32>D;D+=8)O[A++]=this.g[C]>>>D&255;return O};function l(O,C){var A=f;return Object.prototype.hasOwnProperty.call(A,O)?A[O]:A[O]=C(O)}function h(O,C){this.h=C;for(var A=[],D=!0,L=O.length-1;0<=L;L--){var M=O[L]|0;D&&M==C||(A[L]=M,D=!1)}this.g=A}var f={};function m(O){return-128<=O&&128>O?l(O,function(C){return new h([C|0],0>C?-1:0)}):new h([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return S;if(0>O)return F(y(-O));for(var C=[],A=1,D=0;O>=A;D++)C[D]=O/A|0,A*=4294967296;return new h(C,0)}function E(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return F(E(O.substring(1),C));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=y(Math.pow(C,8)),D=S,L=0;L<O.length;L+=8){var M=Math.min(8,O.length-L),k=parseInt(O.substring(L,L+M),C);8>M?(M=y(Math.pow(C,M)),D=D.j(M).add(y(k))):(D=D.j(A),D=D.add(y(k)))}return D}var S=m(0),I=m(1),b=m(16777216);r=h.prototype,r.m=function(){if(z(this))return-F(this).m();for(var O=0,C=1,A=0;A<this.g.length;A++){var D=this.i(A);O+=(0<=D?D:4294967296+D)*C,C*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(z(this))return"-"+F(this).toString(O);for(var C=y(Math.pow(O,6)),A=this,D="";;){var L=ie(A,C).g;A=q(A,L.j(C));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(O);if(A=L,N(A))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function z(O){return O.h==-1}r.l=function(O){return O=q(this,O),z(O)?-1:N(O)?0:1};function F(O){for(var C=O.g.length,A=[],D=0;D<C;D++)A[D]=~O.g[D];return new h(A,~O.h).add(I)}r.abs=function(){return z(this)?F(this):this},r.add=function(O){for(var C=Math.max(this.g.length,O.g.length),A=[],D=0,L=0;L<=C;L++){var M=D+(this.i(L)&65535)+(O.i(L)&65535),k=(M>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);D=k>>>16,M&=65535,k&=65535,A[L]=k<<16|M}return new h(A,A[A.length-1]&-2147483648?-1:0)};function q(O,C){return O.add(F(C))}r.j=function(O){if(N(this)||N(O))return S;if(z(this))return z(O)?F(this).j(F(O)):F(F(this).j(O));if(z(O))return F(this.j(F(O)));if(0>this.l(b)&&0>O.l(b))return y(this.m()*O.m());for(var C=this.g.length+O.g.length,A=[],D=0;D<2*C;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var L=0;L<O.g.length;L++){var M=this.i(D)>>>16,k=this.i(D)&65535,tt=O.i(L)>>>16,kt=O.i(L)&65535;A[2*D+2*L]+=k*kt,G(A,2*D+2*L),A[2*D+2*L+1]+=M*kt,G(A,2*D+2*L+1),A[2*D+2*L+1]+=k*tt,G(A,2*D+2*L+1),A[2*D+2*L+2]+=M*tt,G(A,2*D+2*L+2)}for(D=0;D<C;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=C;D<2*C;D++)A[D]=0;return new h(A,0)};function G(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function te(O,C){this.g=O,this.h=C}function ie(O,C){if(N(C))throw Error("division by zero");if(N(O))return new te(S,S);if(z(O))return C=ie(F(O),C),new te(F(C.g),F(C.h));if(z(C))return C=ie(O,F(C)),new te(F(C.g),C.h);if(30<O.g.length){if(z(O)||z(C))throw Error("slowDivide_ only works with positive integers.");for(var A=I,D=C;0>=D.l(O);)A=_e(A),D=_e(D);var L=de(A,1),M=de(D,1);for(D=de(D,2),A=de(A,2);!N(D);){var k=M.add(D);0>=k.l(O)&&(L=L.add(A),M=k),D=de(D,1),A=de(A,1)}return C=q(O,L.j(C)),new te(L,C)}for(L=S;0<=O.l(C);){for(A=Math.max(1,Math.floor(O.m()/C.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=y(A),k=M.j(C);z(k)||0<k.l(O);)A-=D,M=y(A),k=M.j(C);N(M)&&(M=I),L=L.add(M),O=q(O,k)}return new te(L,O)}r.A=function(O){return ie(this,O).h},r.and=function(O){for(var C=Math.max(this.g.length,O.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)&O.i(D);return new h(A,this.h&O.h)},r.or=function(O){for(var C=Math.max(this.g.length,O.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)|O.i(D);return new h(A,this.h|O.h)},r.xor=function(O){for(var C=Math.max(this.g.length,O.g.length),A=[],D=0;D<C;D++)A[D]=this.i(D)^O.i(D);return new h(A,this.h^O.h)};function _e(O){for(var C=O.g.length+1,A=[],D=0;D<C;D++)A[D]=O.i(D)<<1|O.i(D-1)>>>31;return new h(A,O.h)}function de(O,C){var A=C>>5;C%=32;for(var D=O.g.length-A,L=[],M=0;M<D;M++)L[M]=0<C?O.i(M+A)>>>C|O.i(M+A+1)<<32-C:O.i(M+A);return new h(L,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,R_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,yi=h}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A_,Ua,k_,Ku,Yd,x_,P_,N_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var v=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in v))break e;v=v[j]}u=u[u.length-1],T=v[u],p=p(T),p!=T&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var v=0,T=!1,j={next:function(){if(!T&&v<u.length){var H=v++;return{value:p(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,v){return u.call.apply(u.bind,arguments)}function S(u,p,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(p,j)}}return function(){return u.apply(p,arguments)}}function I(u,p,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,I.apply(null,arguments)}function b(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function N(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,j,H){for(var ne=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ne[Ue-2]=arguments[Ue];return p.prototype[j].apply(T,ne)}}function z(u){const p=u.length;if(0<p){const v=Array(p);for(let T=0;T<p;T++)v[T]=u[T];return v}return[]}function F(u,p){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(m(T)){const j=u.length||0,H=T.length||0;u.length=j+H;for(let ne=0;ne<H;ne++)u[j+ne]=T[ne]}else u.push(T)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function G(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ie(u){return ie[" "](u),u}ie[" "]=function(){};var _e=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function de(u,p,v){for(const T in u)p.call(v,u[T],T,u)}function O(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function C(u){const p={};for(const v in u)p[v]=u[v];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,p){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)u[v]=T[v];for(let H=0;H<A.length;H++)v=A[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function L(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function M(u){f.setTimeout(()=>{throw u},0)}function k(){var u=fe;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class tt{constructor(){this.h=this.g=null}add(p,v){const T=kt.get();T.set(p,v),this.h?this.h.next=T:this.g=T,this.h=T}}var kt=new q(()=>new xt,u=>u.reset());class xt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,re=!1,fe=new tt,x=()=>{const u=f.Promise.resolve(void 0);Be=()=>{u.then(Q)}};var Q=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){M(v)}var p=kt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}re=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return u}();function Ve(u,p){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(_e){e:{try{ie(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ve.aa.h.call(this)}}N(Ve,ye);var be={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Pt(u,p,v,T,j){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!T,this.ha=j,this.key=++Me,this.da=this.fa=!1}function ys(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function lr(u){this.src=u,this.g={},this.h=0}lr.prototype.add=function(u,p,v,T,j){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ne=jr(u,p,T,j);return-1<ne?(p=u[ne],v||(p.fa=!1)):(p=new Pt(p,this.src,H,!!T,j),p.fa=v,u.push(p)),p};function vs(u,p){var v=p.type;if(v in u.g){var T=u.g[v],j=Array.prototype.indexOf.call(T,p,void 0),H;(H=0<=j)&&Array.prototype.splice.call(T,j,1),H&&(ys(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function jr(u,p,v,T){for(var j=0;j<u.length;++j){var H=u[j];if(!H.da&&H.listener==p&&H.capture==!!v&&H.ha==T)return j}return-1}var Ni="closure_lm_"+(1e6*Math.random()|0),_s={};function Fo(u,p,v,T,j){if(Array.isArray(p)){for(var H=0;H<p.length;H++)Fo(u,p[H],v,T,j);return null}return v=zo(v),u&&u[Le]?u.K(p,v,y(T)?!!T.capture:!1,j):Uo(u,p,v,!1,T,j)}function Uo(u,p,v,T,j,H){if(!p)throw Error("Invalid event type");var ne=y(j)?!!j.capture:!!j,Ue=Es(u);if(Ue||(u[Ni]=Ue=new lr(u)),v=Ue.add(p,v,T,ne,H),v.proxy)return v;if(T=vl(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Ce||(j=ne),j===void 0&&(j=!1),u.addEventListener(p.toString(),T,j);else if(u.attachEvent)u.attachEvent(cr(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function vl(){function u(v){return p.call(u.src,u.listener,v)}const p=Bo;return u}function ws(u,p,v,T,j){if(Array.isArray(p))for(var H=0;H<p.length;H++)ws(u,p[H],v,T,j);else T=y(T)?!!T.capture:!!T,v=zo(v),u&&u[Le]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],v=jr(H,v,T,j),-1<v&&(ys(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=Es(u))&&(p=u.g[p.toString()],u=-1,p&&(u=jr(p,v,T,j)),(v=-1<u?p[u]:null)&&ur(v))}function ur(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Le])vs(p.i,u);else{var v=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(v,T,u.capture):p.detachEvent?p.detachEvent(cr(v),T):p.addListener&&p.removeListener&&p.removeListener(T),(v=Es(p))?(vs(v,u),v.h==0&&(v.src=null,p[Ni]=null)):ys(u)}}}function cr(u){return u in _s?_s[u]:_s[u]="on"+u}function Bo(u,p){if(u.da)u=!0;else{p=new Ve(p,this);var v=u.listener,T=u.ha||u.src;u.fa&&ur(u),u=v.call(T,p)}return u}function Es(u){return u=u[Ni],u instanceof lr?u:null}var Ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function zo(u){return typeof u=="function"?u:(u[Ts]||(u[Ts]=function(p){return u.handleEvent(p)}),u[Ts])}function lt(){le.call(this),this.i=new lr(this),this.M=this,this.F=null}N(lt,le),lt.prototype[Le]=!0,lt.prototype.removeEventListener=function(u,p,v,T){ws(this,u,p,v,T)};function ut(u,p){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ye(p,u);else if(p instanceof ye)p.target=p.target||u;else{var j=p;p=new ye(T,u),D(p,j)}if(j=!0,v)for(var H=v.length-1;0<=H;H--){var ne=p.g=v[H];j=hr(ne,T,!0,p)&&j}if(ne=p.g=u,j=hr(ne,T,!0,p)&&j,j=hr(ne,T,!1,p)&&j,v)for(H=0;H<v.length;H++)ne=p.g=v[H],j=hr(ne,T,!1,p)&&j}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],T=0;T<v.length;T++)ys(v[T]);delete u.g[p],u.h--}}this.F=null},lt.prototype.K=function(u,p,v,T){return this.i.add(String(u),p,!1,v,T)},lt.prototype.L=function(u,p,v,T){return this.i.add(String(u),p,!0,v,T)};function hr(u,p,v,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,H=0;H<p.length;++H){var ne=p[H];if(ne&&!ne.da&&ne.capture==v){var Ue=ne.listener,ct=ne.ha||ne.src;ne.fa&&vs(u.i,ne),j=Ue.call(ct,T)!==!1&&j}}return j&&!T.defaultPrevented}function $o(u,p,v){if(typeof u=="function")v&&(u=I(u,v));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Fr(u){u.g=$o(()=>{u.g=null,u.i&&(u.i=!1,Fr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Di extends le{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(u){le.call(this),this.h=u,this.g={}}N(bi,le);var Wo=[];function Ho(u){de(u.g,function(p,v){this.g.hasOwnProperty(v)&&ur(p)},u),u.g={}}bi.prototype.N=function(){bi.aa.N.call(this),Ho(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qo=f.JSON.stringify,Ko=f.JSON.parse,Go=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Oi(){}Oi.prototype.h=null;function Is(u){return u.h||(u.h=u.i())}function Ss(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){ye.call(this,"d")}N(zn,ye);function Cs(){ye.call(this,"c")}N(Cs,ye);var $n={},Qo=null;function Vi(){return Qo=Qo||new lt}$n.La="serverreachability";function Yo(u){ye.call(this,$n.La,u)}N(Yo,ye);function dr(u){const p=Vi();ut(p,new Yo(p))}$n.STAT_EVENT="statevent";function Xo(u,p){ye.call(this,$n.STAT_EVENT,u),this.stat=p}N(Xo,ye);function nt(u){const p=Vi();ut(p,new Xo(p,u))}$n.Ma="timingevent";function Rs(u,p){ye.call(this,$n.Ma,u),this.size=p}N(Rs,ye);function Tn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Li(){this.g=!0}Li.prototype.xa=function(){this.g=!1};function Mi(u,p,v,T,j,H){u.info(function(){if(u.g)if(H)for(var ne="",Ue=H.split("&"),ct=0;ct<Ue.length;ct++){var Ne=Ue[ct].split("=");if(1<Ne.length){var gt=Ne[0];Ne=Ne[1];var st=gt.split("_");ne=2<=st.length&&st[1]=="type"?ne+(gt+"="+Ne+"&"):ne+(gt+"=redacted&")}}else ne=null;else ne=H;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+p+`
`+v+`
`+ne})}function As(u,p,v,T,j,H,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+p+`
`+v+`
`+H+" "+ne})}function In(u,p,v,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Hc(u,v)+(T?" "+T:"")})}function Jo(u,p){u.info(function(){return"TIMEOUT: "+p})}Li.prototype.info=function(){};function Hc(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ne=1;ne<j.length;ne++)j[ne]=""}}}}return qo(v)}catch{return p}}var ks={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_l={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function ji(){}N(ji,Oi),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},Sn=new ji;function Cn(u,p,v,T){this.j=u,this.i=p,this.l=v,this.R=T||1,this.U=new bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wl}function wl(){this.i=null,this.g="",this.h=!1}var Zo={},xs={};function Ps(u,p,v){u.L=1,u.v=Wr(tn(p)),u.m=v,u.P=!0,ea(u,null)}function ea(u,p){u.F=Date.now(),$e(u),u.A=tn(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),qr(v.i,"t",T),u.C=0,v=u.j.J,u.h=new wl,u.g=jl(u.j,v?p:null,!u.m),0<u.O&&(u.M=new Di(I(u.Y,u,u.g),u.O)),p=u.U,v=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Wo[0]=j.toString()),j=Wo);for(var H=0;H<j.length;H++){var ne=Fo(v,j[H],T||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),dr(),Mi(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Ht(u)==3?p.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const st=Ht(this.g);var p=this.g.Ba();const pn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||oa(this.g)))){this.J||st!=4||p==7||(p==8||0>=pn?dr(3):dr(2)),Fi(this);var v=this.g.Z();this.X=v;t:if(El(this)){var T=oa(this.g);u="";var j=T.length,H=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Ur(this);var ne="";break t}this.h.i=new f.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(H&&p==j-1)});T.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=v==200,As(this.i,this.u,this.A,this.l,this.R,st,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ct=this.g;if((Ue=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ue)){var Ne=Ue;break t}}Ne=null}if(v=Ne)In(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,v);else{this.o=!1,this.s=3,nt(12),dn(this),Ur(this);break e}}if(this.P){v=!0;let rn;for(;!this.J&&this.C<ne.length;)if(rn=qc(this,ne),rn==xs){st==4&&(this.s=4,nt(14),v=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Zo){this.s=4,nt(15),In(this.i,this.l,ne,"[Invalid Chunk]"),v=!1;break}else In(this.i,this.l,rn,null),ta(this,rn);if(El(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||ne.length!=0||this.h.h||(this.s=1,nt(16),v=!1),this.o=this.o&&v,!v)In(this.i,this.l,ne,"[Invalid Chunked Response]"),dn(this),Ur(this);else if(0<ne.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),la(gt),gt.M=!0,nt(11))}}else In(this.i,this.l,ne,null),ta(this,ne);st==4&&dn(this),this.o&&!this.J&&(st==4?Bs(this.j,this):(this.o=!1,$e(this)))}else Ls(this.g),v==400&&0<ne.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),dn(this),Ur(this)}}}catch{}finally{}};function El(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qc(u,p){var v=u.C,T=p.indexOf(`
`,v);return T==-1?xs:(v=Number(p.substring(v,T)),isNaN(v)?Zo:(T+=1,T+v>p.length?xs:(p=p.slice(T,T+v),u.C=T+v,p)))}Cn.prototype.cancel=function(){this.J=!0,dn(this)};function $e(u){u.S=Date.now()+u.I,Tl(u,u.I)}function Tl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tn(I(u.ba,u),p)}function Fi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Jo(this.i,this.A),this.L!=2&&(dr(),nt(17)),dn(this),this.s=2,Ur(this)):Tl(this,this.S-u)};function Ur(u){u.j.G==0||u.J||Bs(u.j,u)}function dn(u){Fi(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ho(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ta(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||Ft(v.h,u))){if(!u.K&&Ft(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Us(v),Pn(v);else break e;Fs(v),nt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Tn(I(v.Za,v),6e3));if(1>=Sl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else yr(v,11)}else if((u.K||v.g==u)&&Us(v),!G(p))for(j=v.Da.g.parse(p),p=0;p<j.length;p++){let Ne=j[p];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const gt=Ne[3];gt!=null&&(v.la=gt,v.j.info("VER="+v.la));const st=Ne[4];st!=null&&(v.Aa=st,v.j.info("SVER="+v.Aa));const pn=Ne[5];pn!=null&&typeof pn=="number"&&0<pn&&(T=1.5*pn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const rn=u.g;if(rn){const qi=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var H=T.h;H.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(na(H,H.h),H.h=null))}if(T.D){const $s=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;$s&&(T.ya=$s,ze(T.I,T.D,$s))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ne=u;if(T.qa=Ml(T,T.J?T.ia:null,T.W),ne.K){Cl(T.h,ne);var Ue=ne,ct=T.L;ct&&(Ue.I=ct),Ue.B&&(Fi(Ue),$e(Ue)),T.g=ne}else Hi(T);0<v.i.length&&Kn(v)}else Ne[0]!="stop"&&Ne[0]!="close"||yr(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?yr(v,7):Tt(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}dr(4)}catch{}}var Il=class{constructor(u,p){this.g=u,this.map=p}};function Ui(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sl(u){return u.h?1:u.g?u.g.size:0}function Ft(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function na(u,p){u.g?u.g.add(p):u.h=p}function Cl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ui.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Rl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return z(u.i)}function Ns(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],v=u.length,T=0;T<v;T++)p.push(u[T]);return p}p=[],v=0;for(T in u)p[v++]=u[T];return p}function Ds(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const T in u)p[v++]=T;return p}}}function Br(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Ds(u),T=Ns(u),j=T.length,H=0;H<j;H++)p.call(void 0,T[H],v&&v[H],u)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kc(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),j=null;if(0<=T){var H=u[v].substring(0,T);j=u[v].substring(T+1)}else H=u[v];p(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fr){this.h=u.h,zi(this,u.j),this.o=u.o,this.g=u.g,zr(this,u.s),this.l=u.l;var p=u.i,v=new Wn;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),$r(this,v),this.m=u.m}else u&&(p=String(u).match(Bi))?(this.h=!1,zi(this,p[1]||"",!0),this.o=Pe(p[2]||""),this.g=Pe(p[3]||"",!0),zr(this,p[4]),this.l=Pe(p[5]||"",!0),$r(this,p[6]||"",!0),this.m=Pe(p[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}fr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Hr(p,bs,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Hr(p,bs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Hr(v,v.charAt(0)=="/"?xl:kl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Hr(v,ra)),u.join("")};function tn(u){return new fr(u)}function zi(u,p,v){u.j=v?Pe(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function zr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function $r(u,p,v){p instanceof Wn?(u.i=p,Hn(u.i,u.h)):(v||(p=Hr(p,Pl)),u.i=new Wn(p,u.h))}function ze(u,p,v){u.i.set(p,v)}function Wr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pe(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Al),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Al(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bs=/[#\/\?@]/g,kl=/[#\?:]/g,xl=/[#\?]/g,Pl=/[#\?@]/g,ra=/#/g;function Wn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Et(u){u.g||(u.g=new Map,u.h=0,u.i&&Kc(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=Wn.prototype,r.add=function(u,p){Et(this),this.i=null,u=fn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Rn(u,p){Et(u),p=fn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function An(u,p){return Et(u),p=fn(u,p),u.g.has(p)}r.forEach=function(u,p){Et(this),this.g.forEach(function(v,T){v.forEach(function(j){u.call(p,j,T,this)},this)},this)},r.na=function(){Et(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let T=0;T<p.length;T++){const j=u[T];for(let H=0;H<j.length;H++)v.push(p[T])}return v},r.V=function(u){Et(this);let p=[];if(typeof u=="string")An(this,u)&&(p=p.concat(this.g.get(fn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},r.set=function(u,p){return Et(this),this.i=null,u=fn(this,u),An(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function qr(u,p,v){Rn(u,p),0<v.length&&(u.i=null,u.g.set(fn(u,p),z(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var T=p[v];const H=encodeURIComponent(String(T)),ne=this.V(T);for(T=0;T<ne.length;T++){var j=H;ne[T]!==""&&(j+="="+encodeURIComponent(String(ne[T]))),u.push(j)}}return this.i=u.join("&")};function fn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Hn(u,p){p&&!u.j&&(Et(u),u.i=null,u.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(Rn(this,T),qr(this,j,v))},u)),u.j=p}function Gc(u,p){const v=new Li;if(f.Image){const T=new Image;T.onload=b(Wt,v,"TestLoadImage: loaded",!0,p,T),T.onerror=b(Wt,v,"TestLoadImage: error",!1,p,T),T.onabort=b(Wt,v,"TestLoadImage: abort",!1,p,T),T.ontimeout=b(Wt,v,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Nl(u,p){const v=new Li,T=new AbortController,j=setTimeout(()=>{T.abort(),Wt(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(j),H.ok?Wt(v,"TestPingServer: ok",!0,p):Wt(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Wt(v,"TestPingServer: error",!1,p)})}function Wt(u,p,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function Qc(){this.g=new Go}function Dl(u,p,v){const T=v||"";try{Br(u,function(j,H){let ne=j;y(j)&&(ne=qo(j)),p.push(T+H+"="+encodeURIComponent(ne))})}catch(j){throw p.push(T+"type="+encodeURIComponent("_badmap")),j}}function pr(u){this.l=u.Ub||null,this.j=u.eb||!1}N(pr,Oi),pr.prototype.g=function(){return new $i(this.l,this.j)},pr.prototype.i=function(u){return function(){return u}}({});function $i(u,p){lt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N($i,lt),r=$i.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,xn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function bl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?kn(this):xn(this),this.readyState==3&&bl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,kn(this))},r.Qa=function(u){this.g&&(this.response=u,kn(this))},r.ga=function(){this.g&&kn(this)};function kn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function xn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mr(u){let p="";return de(u,function(v,T){p+=T,p+=":",p+=v,p+=`\r
`}),p}function Kr(u,p,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=mr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):ze(u,p,v))}function Ke(u){lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ke,lt);var Yc=/^https?$/i,ia=["POST","PUT"];r=Ke.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?Is(this.o):Is(Sn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){Wi(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),j=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ia,p,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of v)this.g.setRequestHeader(H,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vs(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Wi(this,H)}};function Wi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Os(u),nn(u)}function Os(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ut(this,"complete"),ut(this,"abort"),nn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Ke.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?sa(this):this.bb())},r.bb=function(){sa(this)};function sa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Ht(u)!=4||u.Z()!=2)){if(u.u&&Ht(u)==4)$o(u.Ea,0,u);else if(ut(u,"readystatechange"),Ht(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var T;if(T=ne===0){var j=String(u.D).match(Bi)[1]||null;!j&&f.self&&f.self.location&&(j=f.self.location.protocol.slice(0,-1)),T=!Yc.test(j?j.toLowerCase():"")}v=T}if(v)ut(u,"complete"),ut(u,"success");else{u.m=6;try{var H=2<Ht(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Os(u)}}finally{nn(u)}}}}function nn(u,p){if(u.g){Vs(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ut(u,"ready");try{v.onreadystatechange=T}catch{}}}function Vs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Ht(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ko(p)}};function oa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ls(u){const p={};u=(u.g&&2<=Ht(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(G(u[T]))continue;var v=L(u[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=p[j]||[];p[j]=H,H.push(v)}O(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function aa(u){this.Aa=0,this.i=[],this.j=new Li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qn("baseRetryDelayMs",5e3,u),this.cb=qn("retryDelaySeedMs",1e4,u),this.Wa=qn("forwardChannelMaxRetries",2,u),this.wa=qn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(u&&u.concurrentRequestLimit),this.Da=new Qc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=aa.prototype,r.la=8,r.G=1,r.connect=function(u,p,v,T){nt(0),this.W=u,this.H=p||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Ml(this,null,this.W),Kn(this)};function Tt(u){if(Ms(u),u.G==3){var p=u.U++,v=tn(u.I);if(ze(v,"SID",u.K),ze(v,"RID",p),ze(v,"TYPE","terminate"),gr(u,v),p=new Cn(u,u.j,p),p.L=2,p.v=Wr(tn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.v,v=!0),v||(p.g=jl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$e(p)}Ll(u)}function Pn(u){u.g&&(la(u),u.g.cancel(),u.g=null)}function Ms(u){Pn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Us(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Kn(u){if(!en(u.h)&&!u.s){u.s=!0;var p=u.Ga;Be||x(),re||(Be(),re=!0),fe.add(p,u),u.B=0}}function Xc(u,p){return Sl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tn(I(u.Ga,u,p),Vl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Cn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=C(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Gr(this,j,p),v=tn(this.I),ze(v,"RID",u),ze(v,"CVER",22),this.D&&ze(v,"X-HTTP-Session-Id",this.D),gr(this,v),H&&(this.O?p="headers="+encodeURIComponent(String(mr(H)))+"&"+p:this.m&&Kr(v,this.m,H)),na(this.h,j),this.Ua&&ze(v,"TYPE","init"),this.P?(ze(v,"$req",p),ze(v,"SID","null"),j.T=!0,Ps(j,v,null)):Ps(j,v,p),this.G=2}}else this.G==3&&(u?js(this,u):this.i.length==0||en(this.h)||js(this))};function js(u,p){var v;p?v=p.l:v=u.U++;const T=tn(u.I);ze(T,"SID",u.K),ze(T,"RID",v),ze(T,"AID",u.T),gr(u,T),u.m&&u.o&&Kr(T,u.m,u.o),v=new Cn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Gr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),na(u.h,v),Ps(v,T,p)}function gr(u,p){u.H&&de(u.H,function(v,T){ze(p,T,v)}),u.l&&Br({},function(v,T){ze(p,T,v)})}function Gr(u,p,v){v=Math.min(u.i.length,v);var T=u.l?I(u.l.Na,u.l,u):null;e:{var j=u.i;let H=-1;for(;;){const ne=["count="+v];H==-1?0<v?(H=j[0].g,ne.push("ofs="+H)):H=0:ne.push("ofs="+H);let Ue=!0;for(let ct=0;ct<v;ct++){let Ne=j[ct].g;const gt=j[ct].map;if(Ne-=H,0>Ne)H=Math.max(0,j[ct].g-100),Ue=!1;else try{Dl(gt,ne,"req"+Ne+"_")}catch{T&&T(gt)}}if(Ue){T=ne.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,T}function Hi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Be||x(),re||(Be(),re=!0),fe.add(p,u),u.v=0}}function Fs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tn(I(u.Fa,u),Vl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ol(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tn(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Pn(this),Ol(this))};function la(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ol(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=tn(u.qa);ze(p,"RID","rpc"),ze(p,"SID",u.K),ze(p,"AID",u.T),ze(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(p,"TO",u.ja),ze(p,"TYPE","xmlhttp"),gr(u,p),u.m&&u.o&&Kr(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Wr(tn(p)),v.m=null,v.P=!0,ea(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Pn(this),Fs(this),nt(19))};function Us(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Bs(u,p){var v=null;if(u.g==p){Us(u),la(u),u.g=null;var T=2}else if(Ft(u.h,p))v=p.D,Cl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var j=u.B;T=Vi(),ut(T,new Rs(T,v)),Kn(u)}else Hi(u);else if(j=p.s,j==3||j==0&&0<p.X||!(T==1&&Xc(u,p)||T==2&&Fs(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),j){case 1:yr(u,5);break;case 4:yr(u,10);break;case 3:yr(u,6);break;default:yr(u,2)}}}function Vl(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function yr(u,p){if(u.j.info("Error code "+p),p==2){var v=I(u.fb,u),T=u.Xa;const j=!T;T=new fr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||zi(T,"https"),Wr(T),j?Gc(T.toString(),v):Nl(T.toString(),v)}else nt(2);u.G=0,u.l&&u.l.sa(p),Ll(u),Ms(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ll(u){if(u.G=0,u.ka=[],u.l){const p=Rl(u.h);(p.length!=0||u.i.length!=0)&&(F(u.ka,p),F(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Ml(u,p,v){var T=v instanceof fr?tn(v):new fr(v);if(T.g!="")p&&(T.g=p+"."+T.g),zr(T,T.s);else{var j=f.location;T=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var H=new fr(null);T&&zi(H,T),p&&(H.g=p),j&&zr(H,j),v&&(H.l=v),T=H}return v=u.D,p=u.ya,v&&p&&ze(T,v,p),ze(T,"VER",u.la),gr(u,T),T}function jl(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ke(new pr({eb:v})):new Ke(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ua(){}r=ua.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function zs(){}zs.prototype.g=function(u,p){return new Ut(u,p)};function Ut(u,p){lt.call(this),this.g=new aa(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!G(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!G(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Gn(this)}N(Ut,lt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Tt(this.g)},Ut.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=qo(u),u=v);p.i.push(new Il(p.Ya++,u)),p.G==3&&Kn(p)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Tt(this.g),delete this.g,Ut.aa.N.call(this)};function Fl(u){zn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}N(Fl,zn);function Ul(){Cs.call(this),this.status=1}N(Ul,Cs);function Gn(u){this.g=u}N(Gn,ua),Gn.prototype.ua=function(){ut(this.g,"a")},Gn.prototype.ta=function(u){ut(this.g,new Fl(u))},Gn.prototype.sa=function(u){ut(this.g,new Ul)},Gn.prototype.ra=function(){ut(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,N_=function(){return new zs},P_=function(){return Vi()},x_=$n,Yd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ks.NO_ERROR=0,ks.TIMEOUT=8,ks.HTTP_ERROR=6,Ku=ks,_l.COMPLETE="complete",k_=_l,Ss.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ua=Ss,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,A_=Ke}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});const gy="@firebase/firestore",yy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Tf("@firebase/firestore");function ho(){return ds.logLevel}function oe(r,...e){if(ds.logLevel<=ke.DEBUG){const t=e.map(Mf);ds.debug(`Firestore (${Vo}): ${r}`,...t)}}function Or(r,...e){if(ds.logLevel<=ke.ERROR){const t=e.map(Mf);ds.error(`Firestore (${Vo}): ${r}`,...t)}}function Eo(r,...e){if(ds.logLevel<=ke.WARN){const t=e.map(Mf);ds.warn(`Firestore (${Vo}): ${r}`,...t)}}function Mf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,D_(r,s,t)}function D_(r,e,t){let s=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Or(s),new Error(s)}function Fe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||D_(e,o,s)}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lt.UNAUTHENTICATED))}shutdown(){}}class rR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iR{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},f=m=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string",31837,{l:s}),new b_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class sR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new sR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=lR(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Re(r,e){return r<e?-1:r>e?1:0}function Xd(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Re(s,o);{const l=O_(),h=uR(l.encode(_y(r,t)),l.encode(_y(e,t)));return h!==0?h:Re(s,o)}}t+=s>65535?2:1}return Re(r.length,e.length)}function _y(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function uR(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Re(r[t],e[t]);return Re(r.length,e.length)}function To(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-62135596800,Ey=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ey);return new pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wy)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ey}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new pt(0,0))}static max(){return new Ie(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="__name__";class Zn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Zn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zn?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Zn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const s=Zn.isNumericId(e),o=Zn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Zn.extractNumericId(e).compare(Zn.extractNumericId(t)):Xd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class et extends Zn{construct(e,t,s){return new et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new et(t)}static emptyPath(){return new et([])}}const cR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Zn{construct(e,t,s){return new Rt(e,t,s)}static isValidIdentifier(e){return cR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ty}static keyField(){return new Rt([Ty])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=-1;function hR(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new pt(t+1,0):new pt(t,s));return new wi(o,ve.empty(),e)}function dR(r){return new wi(r.readTime,r.key,Za)}class wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new wi(Ie.min(),ve.empty(),Za)}static max(){return new wi(Ie.max(),ve.empty(),Za)}}function fR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Re(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==pR)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,s)=>{t(e)})}static reject(e){return new K((t,s)=>{s(e)})}static waitFor(e){return new K((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},m=>s(m))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next(o=>o?K.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new K((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next(E=>{h[y]=E,++f,f===l&&s(h)},E=>o(E))}})}static doWhile(e,t){return new K((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function gR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}kc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function xc(r){return r==null}function lc(r){return r===0&&1/r==-1/0}function yR(r){return typeof r=="number"&&Number.isInteger(r)&&!lc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="";function vR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Iy(e)),e=_R(r.get(t),e);return Iy(e)}function _R(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case L_:t+="";break;default:t+=l}}return t}function Iy(r){return r+L_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function xi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function M_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ct.RED,this.left=o??Ct.EMPTY,this.right=l??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ct(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ct.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cy(this.data.getIterator())}getIteratorFrom(e){return new Cy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class Cy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new un([])}unionWith(e){let t=new mt(Rt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new j_("Invalid base64 string: "+l):l}}(e);return new At(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new At(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const wR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(Fe(!!r,39018),typeof r=="string"){let e=0;const t=wR.exec(r);if(Fe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(r.seconds),nanos:it(r.nanos)}}function it(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ti(r){return typeof r=="string"?At.fromBase64String(r):At.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="server_timestamp",U_="__type__",B_="__previous_value__",z_="__local_write_time__";function Ff(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[U_])===null||t===void 0?void 0:t.stringValue)===F_}function Pc(r){const e=r.mapValue.fields[B_];return Ff(e)?Pc(e):e}function el(r){const e=Ei(r.mapValue.fields[z_].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t,s,o,l,h,f,m,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y,this.isUsingEmulator=E}}const uc="(default)";class tl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="__type__",TR="__max__",ju={mapValue:{}},W_="__vector__",cc="value";function Ii(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ff(r)?4:SR(r)?9007199254740991:IR(r)?10:11:Ee(28295,{value:r})}function sr(r,e){if(r===e)return!0;const t=Ii(r);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return el(r).isEqual(el(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ei(o.timestampValue),f=Ei(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ti(o.bytesValue).isEqual(Ti(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return it(o.geoPointValue.latitude)===it(l.geoPointValue.latitude)&&it(o.geoPointValue.longitude)===it(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return it(o.integerValue)===it(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=it(o.doubleValue),f=it(l.doubleValue);return h===f?lc(h)===lc(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return To(r.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Sy(h)!==Sy(f))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(f[m]===void 0||!sr(h[m],f[m])))return!1;return!0}(r,e);default:return Ee(52216,{left:r})}}function nl(r,e){return(r.values||[]).find(t=>sr(t,e))!==void 0}function Io(r,e){if(r===e)return 0;const t=Ii(r),s=Ii(e);if(t!==s)return Re(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=it(l.integerValue||l.doubleValue),m=it(h.integerValue||h.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(r,e);case 3:return Ry(r.timestampValue,e.timestampValue);case 4:return Ry(el(r),el(e));case 5:return Xd(r.stringValue,e.stringValue);case 6:return function(l,h){const f=Ti(l),m=Ti(h);return f.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),m=h.split("/");for(let y=0;y<f.length&&y<m.length;y++){const E=Re(f[y],m[y]);if(E!==0)return E}return Re(f.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Re(it(l.latitude),it(h.latitude));return f!==0?f:Re(it(l.longitude),it(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Ay(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,m,y,E;const S=l.fields||{},I=h.fields||{},b=(f=S[cc])===null||f===void 0?void 0:f.arrayValue,N=(m=I[cc])===null||m===void 0?void 0:m.arrayValue,z=Re(((y=b==null?void 0:b.values)===null||y===void 0?void 0:y.length)||0,((E=N==null?void 0:N.values)===null||E===void 0?void 0:E.length)||0);return z!==0?z:Ay(b,N)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===ju.mapValue&&h===ju.mapValue)return 0;if(l===ju.mapValue)return 1;if(h===ju.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=h.fields||{},E=Object.keys(y);m.sort(),E.sort();for(let S=0;S<m.length&&S<E.length;++S){const I=Xd(m[S],E[S]);if(I!==0)return I;const b=Io(f[m[S]],y[E[S]]);if(b!==0)return b}return Re(m.length,E.length)}(r.mapValue,e.mapValue);default:throw Ee(23264,{Pe:t})}}function Ry(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Re(r,e);const t=Ei(r),s=Ei(e),o=Re(t.seconds,s.seconds);return o!==0?o:Re(t.nanos,s.nanos)}function Ay(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Io(t[o],s[o]);if(l)return l}return Re(t.length,s.length)}function So(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ti(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ve.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Jd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Jd(t.fields[h])}`;return o+"}"}(r.mapValue):Ee(61005,{value:r})}function Gu(r){switch(Ii(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pc(r);return e?16+Gu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ti(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Gu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return xi(s.fields,(l,h)=>{o+=l.length+Gu(h)}),o}(r.mapValue);default:throw Ee(13486,{value:r})}}function Zd(r){return!!r&&"integerValue"in r}function Uf(r){return!!r&&"arrayValue"in r}function ky(r){return!!r&&"nullValue"in r}function xy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Qu(r){return!!r&&"mapValue"in r}function IR(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[$_])===null||t===void 0?void 0:t.stringValue)===W_}function Ha(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return xi(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ha(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(r.arrayValue.values[t]);return e}return Object.assign({},r)}function SR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===TR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=Rt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=Ha(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){xi(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Zt(Ha(this.value))}}function H_(r){const e=[];return xi(r.fields,(t,s)=>{const o=new Rt([t]);if(Qu(s)){const l=H_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Mt(e,0,Ie.min(),Ie.min(),Ie.min(),Zt.empty(),0)}static newFoundDocument(e,t,s,o){return new Mt(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new Mt(e,2,t,Ie.min(),Ie.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new Mt(e,3,t,Ie.min(),Ie.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function Py(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(h.referenceValue),t.key):s=Io(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ny(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!sr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function CR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{}class ft extends q_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new AR(e,t,s):t==="array-contains"?new PR(e,s):t==="in"?new NR(e,s):t==="not-in"?new DR(e,s):t==="array-contains-any"?new bR(e,s):new ft(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new kR(e,s):new xR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Io(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends q_{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new or(e,t)}matches(e){return K_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function K_(r){return r.op==="and"}function G_(r){return RR(r)&&K_(r)}function RR(r){for(const e of r.filters)if(e instanceof or)return!1;return!0}function ef(r){if(r instanceof ft)return r.field.canonicalString()+r.op.toString()+So(r.value);if(G_(r))return r.filters.map(e=>ef(e)).join(",");{const e=r.filters.map(t=>ef(t)).join(",");return`${r.op}(${e})`}}function Q_(r,e){return r instanceof ft?function(s,o){return o instanceof ft&&s.op===o.op&&s.field.isEqual(o.field)&&sr(s.value,o.value)}(r,e):r instanceof or?function(s,o){return o instanceof or&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&Q_(h,o.filters[f]),!0):!1}(r,e):void Ee(19439)}function Y_(r){return r instanceof ft?function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`}(r):r instanceof or?function(t){return t.op.toString()+" {"+t.getFilters().map(Y_).join(" ,")+"}"}(r):"Filter"}class AR extends ft{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class kR extends ft{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xR extends ft{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function X_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ve.fromName(s.referenceValue))}class PR extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uf(t)&&nl(t.arrayValue,this.value)}}class NR extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nl(this.value.arrayValue,t)}}class DR extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nl(this.value.arrayValue,t)}}class bR extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>nl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Ie=null}}function Dy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new OR(r,e,t,s,o,l,h)}function Bf(r){const e=Se(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>ef(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>So(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>So(s)).join(",")),e.Ie=t}return e.Ie}function zf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!CR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Q_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ny(r.startAt,e.startAt)&&Ny(r.endAt,e.endAt)}function tf(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function VR(r,e,t,s,o,l,h,f){return new Nc(r,e,t,s,o,l,h,f)}function $f(r){return new Nc(r)}function by(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function LR(r){return r.collectionGroup!==null}function qa(r){const e=Se(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new mt(Rt.comparator);return h.filters.forEach(m=>{m.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new dc(l,s))}),t.has(Rt.keyField().canonicalString())||e.Ee.push(new dc(Rt.keyField(),s))}return e.Ee}function nr(r){const e=Se(r);return e.de||(e.de=MR(e,qa(r))),e.de}function MR(r,e){if(r.limitType==="F")return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new dc(o.field,l)});const t=r.endAt?new hc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new hc(r.startAt.position,r.startAt.inclusive):null;return Dy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function nf(r,e,t){return new Nc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Dc(r,e){return zf(nr(r),nr(e))&&r.limitType===e.limitType}function J_(r){return`${Bf(nr(r))}|lt:${r.limitType}`}function fo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Y_(o)).join(", ")}]`),xc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>So(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>So(o)).join(",")),`Target(${s})`}(nr(r))}; limitType=${r.limitType})`}function bc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of qa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,m){const y=Py(h,f,m);return h.inclusive?y<=0:y<0}(s.startAt,qa(s),o)||s.endAt&&!function(h,f,m){const y=Py(h,f,m);return h.inclusive?y>=0:y>0}(s.endAt,qa(s),o))}(r,e)}function jR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Z_(r){return(e,t)=>{let s=!1;for(const o of qa(r)){const l=FR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function FR(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):function(l,h,f){const m=h.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Io(m,y):Ee(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return M_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new Je(ve.comparator);function Vr(){return UR}const e0=new Je(ve.comparator);function Ba(...r){let e=e0;for(const t of r)e=e.insert(t.key,t);return e}function t0(r){let e=e0;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function as(){return Ka()}function n0(){return Ka()}function Ka(){return new ms(r=>r.toString(),(r,e)=>r.isEqual(e))}const BR=new Je(ve.comparator),zR=new mt(ve.comparator);function xe(...r){let e=zR;for(const t of r)e=e.add(t);return e}const $R=new mt(Re);function WR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function r0(r){return{integerValue:""+r}}function HR(r,e){return yR(e)?r0(e):Wf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function qR(r,e,t){return r instanceof fc?function(o,l){const h={fields:{[U_]:{stringValue:F_},[z_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ff(l)&&(l=Pc(l)),l&&(h.fields[B_]=l),{mapValue:h}}(t,e):r instanceof Co?s0(r,e):r instanceof rl?o0(r,e):function(o,l){const h=i0(o,l),f=Oy(h)+Oy(o.Re);return Zd(h)&&Zd(o.Re)?r0(f):Wf(o.serializer,f)}(r,e)}function KR(r,e,t){return r instanceof Co?s0(r,e):r instanceof rl?o0(r,e):t}function i0(r,e){return r instanceof pc?function(s){return Zd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class fc extends Oc{}class Co extends Oc{constructor(e){super(),this.elements=e}}function s0(r,e){const t=a0(e);for(const s of r.elements)t.some(o=>sr(o,s))||t.push(s);return{arrayValue:{values:t}}}class rl extends Oc{constructor(e){super(),this.elements=e}}function o0(r,e){let t=a0(e);for(const s of r.elements)t=t.filter(o=>!sr(o,s));return{arrayValue:{values:t}}}class pc extends Oc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Oy(r){return it(r.integerValue||r.doubleValue)}function a0(r){return Uf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.field=e,this.transform=t}}function QR(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Co&&o instanceof Co||s instanceof rl&&o instanceof rl?To(s.elements,o.elements,sr):s instanceof pc&&o instanceof pc?sr(s.Re,o.Re):s instanceof fc&&o instanceof fc}(r.transform,e.transform)}class YR{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Vc{}function l0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new c0(r.key,rr.none()):new fl(r.key,r.data,rr.none());{const t=r.data,s=Zt.empty();let o=new mt(Rt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Pi(r.key,s,new un(o.toArray()),rr.none())}}function XR(r,e,t){r instanceof fl?function(o,l,h){const f=o.value.clone(),m=Ly(o.fieldTransforms,l,h.transformResults);f.setAll(m),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Pi?function(o,l,h){if(!Yu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Ly(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(u0(o)),m.setAll(f),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ga(r,e,t,s){return r instanceof fl?function(l,h,f,m){if(!Yu(l.precondition,h))return f;const y=l.value.clone(),E=My(l.fieldTransforms,m,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof Pi?function(l,h,f,m){if(!Yu(l.precondition,h))return f;const y=My(l.fieldTransforms,m,h),E=h.data;return E.setAll(u0(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(S=>S.field))}(r,e,t,s):function(l,h,f){return Yu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function JR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=i0(s.transform,o||null);l!=null&&(t===null&&(t=Zt.empty()),t.set(s.field,l))}return t||null}function Vy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&To(s,o,(l,h)=>QR(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class fl extends Vc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Pi extends Vc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function u0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Ly(r,e,t){const s=new Map;Fe(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,KR(h,f,t[o]))}return s}function My(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,qR(l,h,e))}return s}class c0 extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&XR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ga(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ga(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=n0();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const m=l0(h,f);m!==null&&s.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,s)=>Vy(t,s))&&To(this.baseMutations,e.baseMutations,(t,s)=>Vy(t,s))}}class Hf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return BR}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Hf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,De;function rA(r){switch(r){case Z.OK:return Ee(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function h0(r){if(r===void 0)return Or("GRPC error has no .code"),Z.UNKNOWN;switch(r){case at.OK:return Z.OK;case at.CANCELLED:return Z.CANCELLED;case at.UNKNOWN:return Z.UNKNOWN;case at.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case at.INTERNAL:return Z.INTERNAL;case at.UNAVAILABLE:return Z.UNAVAILABLE;case at.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case at.NOT_FOUND:return Z.NOT_FOUND;case at.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case at.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case at.ABORTED:return Z.ABORTED;case at.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case at.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case at.DATA_LOSS:return Z.DATA_LOSS;default:return Ee(39323,{code:r})}}(De=at||(at={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new yi([4294967295,4294967295],0);function jy(r){const e=O_().encode(r),t=new R_;return t.update(e),new Uint8Array(t.digest())}function Fy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new yi([t,s],0),new yi([o,l],0)]}class qf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new za(`Invalid padding: ${t}`);if(s<0)throw new za(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new za(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=yi.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(yi.fromNumber(s)));return o.compare(iA)===1&&(o=new yi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=jy(e),[s,o]=Fy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);if(!this.be(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new qf(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.pe===0)return;const t=jy(e),[s,o]=Fy(t);for(let l=0;l<this.hashCount;l++){const h=this.we(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Lc(Ie.min(),o,new Je(Re),Vr(),xe())}}class pl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pl(s,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class d0{constructor(e,t){this.targetId=e,this.Ce=t}}class f0{constructor(e,t,s=At.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Uy{constructor(){this.Fe=0,this.Me=By(),this.xe=At.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=xe(),t=xe(),s=xe();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:l})}}),new pl(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=By()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Fe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sA{constructor(e){this.ze=e,this.je=new Map,this.He=Vr(),this.Je=Fu(),this.Ye=Fu(),this.Ze=new Je(Re)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(tf(l))if(s===0){const h=new ve(l.path);this.tt(t,h,Mt.newNoDocument(h,Ie.min()))}else Fe(s===1,20013,{expectedCount:s});else{const h=this.ut(t);if(h!==s){const f=this.ct(e),m=f?this.lt(f,e,h):1;if(m!==0){this.st(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ti(s).toUint8Array()}catch(m){if(m instanceof j_)return Eo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new qf(h,o,l)}catch(m){return Eo(m instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.pe===0?null:f}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.ze.Pt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const f=this._t(h);if(f){if(l.current&&tf(f.target)){const m=new ve(f.target.path);this.Et(m).has(h)||this.dt(h,m)||this.tt(h,m,Mt.newNoDocument(m,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let s=xe();this.Ye.forEach((l,h)=>{let f=!0;h.forEachWhile(m=>{const y=this._t(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Lc(e,t,this.Ze,this.He,s);return this.He=Vr(),this.Je=Fu(),this.Ye=Fu(),this.Ze=new Je(Re),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Uy,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new mt(Re),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new mt(Re),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Uy),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Fu(){return new Je(ve.comparator)}function By(){return new Je(ve.comparator)}const oA={asc:"ASCENDING",desc:"DESCENDING"},aA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class uA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rf(r,e){return r.useProto3Json||xc(e)?e:{value:e}}function mc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cA(r,e){return mc(r,e.toTimestamp())}function ir(r){return Fe(!!r,49232),Ie.fromTimestamp(function(t){const s=Ei(t);return new pt(s.seconds,s.nanos)}(r))}function Kf(r,e){return sf(r,e).canonicalString()}function sf(r,e){const t=function(o){return new et(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function m0(r){const e=et.fromString(r);return Fe(w0(e),10190,{key:e.toString()}),e}function of(r,e){return Kf(r.databaseId,e.path)}function Dd(r,e){const t=m0(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(y0(t))}function g0(r,e){return Kf(r.databaseId,e)}function hA(r){const e=m0(r);return e.length===4?et.emptyPath():y0(e)}function af(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function y0(r){return Fe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function zy(r,e,t){return{name:of(r,e),fields:t.value.mapValue.fields}}function dA(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,E){return y.useProto3Json?(Fe(E===void 0||typeof E=="string",58123),At.fromBase64String(E||"")):(Fe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),At.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(y){const E=y.code===void 0?Z.UNKNOWN:h0(y.code);return new ge(E,y.message||"")}(h);t=new f0(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Dd(r,s.document.name),l=ir(s.document.updateTime),h=s.document.createTime?ir(s.document.createTime):Ie.min(),f=new Zt({mapValue:{fields:s.document.fields}}),m=Mt.newFoundDocument(o,l,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new Xu(y,E,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Dd(r,s.document),l=s.readTime?ir(s.readTime):Ie.min(),h=Mt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Xu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Dd(r,s.document),l=s.removedTargetIds||[];t=new Xu([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new nA(o,l),f=s.targetId;t=new d0(f,h)}}return t}function fA(r,e){let t;if(e instanceof fl)t={update:zy(r,e.key,e.value)};else if(e instanceof c0)t={delete:of(r,e.key)};else if(e instanceof Pi)t={update:zy(r,e.key,e.data),updateMask:TA(e.fieldMask)};else{if(!(e instanceof ZR))return Ee(16599,{ft:e.type});t={verify:of(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof fc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Co)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof rl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:h.field.canonicalString(),increment:f.Re};throw Ee(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:cA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)}(r,e.precondition)),t}function pA(r,e){return r&&r.length>0?(Fe(e!==void 0,14353),r.map(t=>function(o,l){let h=o.updateTime?ir(o.updateTime):ir(l);return h.isEqual(Ie.min())&&(h=ir(l)),new YR(h,o.transformResults||[])}(t,e))):[]}function mA(r,e){return{documents:[g0(r,e.path)]}}function gA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=g0(r,o);const l=function(y){if(y.length!==0)return _0(or.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(E=>function(I){return{field:po(I.field),direction:_A(I.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=rf(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function yA(r){let e=hA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(S){const I=v0(S);return I instanceof or&&G_(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(S){return S.map(I=>function(N){return new dc(mo(N.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(I))}(t.orderBy));let f=null;t.limit&&(f=function(S){let I;return I=typeof S=="object"?S.value:S,xc(I)?null:I}(t.limit));let m=null;t.startAt&&(m=function(S){const I=!!S.before,b=S.values||[];return new hc(b,I)}(t.startAt));let y=null;return t.endAt&&(y=function(S){const I=!S.before,b=S.values||[];return new hc(b,I)}(t.endAt)),VR(e,o,h,l,f,"F",m,y)}function vA(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function v0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=mo(t.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=mo(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=mo(t.unaryFilter.field);return ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(r):r.fieldFilter!==void 0?function(t){return ft.create(mo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return or.create(t.compositeFilter.filters.map(s=>v0(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(t.compositeFilter.op))}(r):Ee(30097,{filter:r})}function _A(r){return oA[r]}function wA(r){return aA[r]}function EA(r){return lA[r]}function po(r){return{fieldPath:r.canonicalString()}}function mo(r){return Rt.fromServerFormat(r.fieldPath)}function _0(r){return r instanceof ft?function(t){if(t.op==="=="){if(xy(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(ky(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xy(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(ky(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:wA(t.op),value:t.value}}}(r):r instanceof or?function(t){const s=t.getFilters().map(o=>_0(o));return s.length===1?s[0]:{compositeFilter:{op:EA(t.op),filters:s}}}(r):Ee(54877,{filter:r})}function TA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,s,o,l=Ie.min(),h=Ie.min(),f=At.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.wt=e}}function SA(r){const e=yA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Cn=new RA}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(wi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class RA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new mt(et.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new mt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E0=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(E0,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ro(0)}static lr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LruGarbageCollector",AA=1048576;function Hy([r,e],[t,s]){const o=Re(r,t);return o===0?Re(e,s):o}class kA{constructor(e){this.Er=e,this.buffer=new mt(Hy),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Hy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){oe(Wy,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mo(t)?oe(Wy,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.mr(3e5)})}}class PA{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return K.resolve(kc.le);const s=new kA(t);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve($y)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$y):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,o,l,h,f,m,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,f=Date.now(),this.removeTargets(e,s,t))).next(S=>(l=S,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(y=Date.now(),ho()<=ke.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${S} documents in `+(y-m)+`ms
Total Duration: ${y-E}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S})))}}function NA(r,e){return new PA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.changes=new ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Ga(s.mutation,o,un.empty(),pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=xe()){const o=as();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=Ba();return l.forEach((f,m)=>{h=h.insert(f,m.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=as();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,xe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=Vr();const h=Ka(),f=function(){return Ka()}();return t.forEach((m,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Pi)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),Ga(E.mutation,y,E.mutation.getFieldMask(),pt.now())):h.set(y.key,un.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((y,E)=>h.set(y,E)),t.forEach((y,E)=>{var S;return f.set(y,new bA(E,(S=h.get(y))!==null&&S!==void 0?S:null))}),f))}recalculateAndSaveOverlays(e,t){const s=Ka();let o=new Je((h,f)=>h-f),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(m=>{const y=t.get(m);if(y===null)return;let E=s.get(m)||un.empty();E=f.applyToLocalView(y,E),s.set(m,E);const S=(o.get(f.batchId)||xe()).add(m);o=o.insert(f.batchId,S)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,E=m.value,S=n0();E.forEach(I=>{if(!l.has(I)){const b=l0(t.get(I),s.get(I));b!==null&&S.set(I,b),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,S))}return K.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(as());let f=Za,m=l;return h.next(y=>K.forEach(y,(E,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),l.get(E)?K.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{m=m.insert(E,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,m,y,xe())).next(E=>({batchId:f,changes:t0(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let o=Ba();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Ba();return this.indexManager.getCollectionParents(e,l).next(f=>K.forEach(f,m=>{const y=function(S,I){return new Nc(I,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((S,I)=>{h=h.insert(S,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((m,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Mt.newInvalidDocument(E)))});let f=Ba();return h.forEach((m,y)=>{const E=l.get(m);E!==void 0&&Ga(E.mutation,y,un.empty(),pt.now()),bc(t,y)&&(f=f.insert(m,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return K.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:SA(o.bundledQuery),readTime:ir(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.overlays=new Je(ve.comparator),this.Qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=as();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.St(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=as(),l=t.length+1,h=new ve(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>s&&o.set(m.getKey(),m)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Je((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=l.get(y.largestBatchId);E===null&&(E=as(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=as(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,E)=>f.set(y,E)),!(f.size()>=o)););return K.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new tA(t,s));let l=this.Qr.get(t);l===void 0&&(l=xe(),this.Qr.set(t,l)),this.Qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.$r=new mt(wt.Ur),this.Kr=new mt(wt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new wt(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new wt(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new ve(new et([])),s=new wt(t,e),o=new wt(t,e+1),l=[];return this.Kr.forEachInRange([s,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ve(new et([])),s=new wt(t,e),o=new wt(t,e+1);let l=xe();return this.Kr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new wt(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class wt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ve.comparator(e.key,t.key)||Re(e.Zr,t.Zr)}static Wr(e,t){return Re(e.Zr,t.Zr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new mt(wt.Ur)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new eA(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Xr=this.Xr.add(new wt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ti(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?jf:this.nr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new wt(t,0),o=new wt(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([s,o],h=>{const f=this.ei(h.Zr);l.push(f)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new mt(Re);return t.forEach(o=>{const l=new wt(o,0),h=new wt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],f=>{s=s.add(f.Zr)})}),K.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const h=new wt(new ve(l),0);let f=new mt(Re);return this.Xr.forEachWhile(m=>{const y=m.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(m.Zr)),!0)},h),K.resolve(this.ni(f))}ni(e){const t=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Fe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return K.forEach(t.mutations,o=>{const l=new wt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new wt(t,0),o=this.Xr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.ii=e,this.docs=function(){return new Je(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let s=Vr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Mt.newInvalidDocument(o))}),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Vr();const h=t.path,f=new ve(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:E}}=m.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||fR(dR(E),s)<=0||(o.has(E.key)||bc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ee(9500)}si(e,t){return K.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new UA(this)}getSize(e){return K.resolve(this.size)}}class UA extends DA{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),K.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.persistence=e,this.oi=new ms(t=>Bf(t),zf),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this._i=0,this.ai=new Gf,this.targetCount=0,this.ui=Ro.cr()}forEachTarget(e,t){return this.oi.forEach((s,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),K.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ro(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Tr(t),K.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.oi.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t){this.ci={},this.overlays={},this.li=new kc(0),this.hi=!1,this.hi=!0,this.Pi=new MA,this.referenceDelegate=e(this),this.Ti=new BA(this),this.indexManager=new CA,this.remoteDocumentCache=function(o){return new FA(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new IA(t),this.Ei=new VA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new jA(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new zA(this.li.next());return this.referenceDelegate.di(),s(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return K.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class zA extends mR{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Vi=new Gf,this.mi=null}static fi(e){return new Qf(e)}get gi(){if(this.mi)return this.mi;throw Ee(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.gi,s=>{const o=ve.fromPath(s);return this.pi(e,o).next(l=>{l||t.removeEntry(o,Ie.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return K.or([()=>K.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.yi=new ms(s=>vR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=NA(this,t)}static fi(e,t){return new gc(e,t)}di(){}Ai(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return K.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(f=>{f||(s++,l.removeEntry(h,Ie.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),K.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gu(e.data.value)),t}Dr(e,t,s){return K.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ds=s,this.As=o}static Rs(e,t){let s=xe(),o=xe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Yf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return cI()?8:gR(jt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new $A;return this.Ss(e,t,h).next(f=>{if(l.result=f,this.fs)return this.Ds(e,t,h,f.size)})}).next(()=>l.result)}Ds(e,t,s,o){return s.documentReadCount<this.gs?(ho()<=ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),K.resolve()):(ho()<=ke.DEBUG&&oe("QueryEngine","Query:",fo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(ho()<=ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(t))):K.resolve())}ws(e,t){if(by(t))return K.resolve(null);let s=nr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=nf(t,null,"F"),s=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=xe(...l);return this.ys.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const y=this.vs(t,f);return this.Cs(t,y,h,m.readTime)?this.ws(e,nf(t,null,"F")):this.Fs(e,y,t,m)}))})))}bs(e,t,s,o){return by(t)||o.isEqual(Ie.min())?K.resolve(null):this.ys.getDocuments(e,s).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(ho()<=ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(t)),this.Fs(e,h,t,hR(o,Za)).next(f=>f))})}vs(e,t){let s=new mt(Z_(e));return t.forEach((o,l)=>{bc(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ho()<=ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",fo(t)),this.ys.getDocumentsMatchingQuery(e,t,wi.min(),s)}Fs(e,t,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="LocalStore",HA=3e8;class qA{constructor(e,t,s,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new Je(Re),this.Os=new ms(l=>Bf(l),zf),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OA(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function KA(r,e,t,s){return new qA(r,e,t,s)}async function I0(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let m=xe();for(const y of o){h.push(y.batchId);for(const E of y.mutations)m=m.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)m=m.add(E.key)}return t.localDocuments.getDocuments(s,m).next(y=>({ks:y,removedBatchIds:h,addedBatchIds:f}))})})}function GA(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(f,m,y,E){const S=y.batch,I=S.keys();let b=K.resolve();return I.forEach(N=>{b=b.next(()=>E.getEntry(m,N)).next(z=>{const F=y.docVersions.get(N);Fe(F!==null,48541),z.version.compareTo(F)<0&&(S.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),E.addEntry(z)))})}),b.next(()=>f.mutationQueue.removeMutationBatch(m,S))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=xe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function S0(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function QA(r,e){const t=Se(r),s=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const f=[];e.targetChanges.forEach((E,S)=>{const I=o.get(S);if(!I)return;f.push(t.Ti.removeMatchingKeys(l,E.removedDocuments,S).next(()=>t.Ti.addMatchingKeys(l,E.addedDocuments,S)));let b=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?b=b.withResumeToken(At.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):E.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(E.resumeToken,s)),o=o.insert(S,b),function(z,F,q){return z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=HA?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(I,b,E)&&f.push(t.Ti.updateTargetData(l,b))});let m=Vr(),y=xe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(YA(l,h,e.documentUpdates).next(E=>{m=E.qs,y=E.Qs})),!s.isEqual(Ie.min())){const E=t.Ti.getLastRemoteSnapshotVersion(l).next(S=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(E)}return K.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,y)).next(()=>m)}).then(l=>(t.xs=o,l))}function YA(r,e,t){let s=xe(),o=xe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Vr();return t.forEach((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Ie.min())?(e.removeEntry(f,m.readTime),h=h.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),h=h.insert(f,m)):oe(Xf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)}),{qs:h,Qs:o}})}function XA(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function JA(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Ti.getTargetData(s,e).next(l=>l?(o=l,K.resolve(o)):t.Ti.allocateTargetId(s).next(h=>(o=new fi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function lf(r,e,t){const s=Se(r),o=s.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Mo(h))throw h;oe(Xf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function qy(r,e,t){const s=Se(r);let o=Ie.min(),l=xe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(m,y,E){const S=Se(m),I=S.Os.get(E);return I!==void 0?K.resolve(S.xs.get(I)):S.Ti.getTargetData(y,E)}(s,h,nr(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(h,f.targetId).next(m=>{l=m})}).next(()=>s.Ms.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:xe())).next(f=>(ZA(s,jR(e),f),{documents:f,$s:l})))}function ZA(r,e,t){let s=r.Ns.get(e)||Ie.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Ns.set(e,s)}class Ky{constructor(){this.activeTargetIds=WR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ek{constructor(){this.xo=new Ky,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ky,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Qy{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){oe(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){oe(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function uf(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="RestConnection",nk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rk{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,t,s,o,l){const h=uf(),f=this.jo(e,t.toUriEncodedString());oe(bd,`Sending RPC '${e}' ${h}:`,f,s);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,o,l);const{host:y}=new URL(f),E=Do(y);return this.Jo(e,f,m,s,E).then(S=>(oe(bd,`Received RPC '${e}' ${h}: `,S),S),S=>{throw Eo(bd,`RPC '${e}' ${h} failed with error: `,S,"url: ",f,"request:",s),S})}Yo(e,t,s,o,l,h){return this.zo(e,t,s,o,l)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),s&&s.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const s=nk[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class sk extends rk{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=uf();return new Promise((f,m)=>{const y=new A_;y.setWithCredentials(!0),y.listenOnce(k_.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ku.NO_ERROR:const S=y.getResponseJson();oe(Vt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),f(S);break;case Ku.TIMEOUT:oe(Vt,`RPC '${e}' ${h} timed out`),m(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:const I=y.getStatus();if(oe(Vt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const N=b==null?void 0:b.error;if(N&&N.status&&N.message){const z=function(q){const G=q.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(G)>=0?G:Z.UNKNOWN}(N.status);m(new ge(z,N.message))}else m(new ge(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{h_:e,streamId:h,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{oe(Vt,`RPC '${e}' ${h} completed.`)}});const E=JSON.stringify(o);oe(Vt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,s,15)})}I_(e,t,s){const o=uf(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=N_(),f=P_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const E=l.join("");oe(Vt,`Creating RPC '${e}' stream ${o}: ${E}`,m);const S=h.createWebChannel(E,m);this.E_(S);let I=!1,b=!1;const N=new ik({Zo:F=>{b?oe(Vt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(oe(Vt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),I=!0),oe(Vt,`RPC '${e}' stream ${o} sending:`,F),S.send(F))},Xo:()=>S.close()}),z=(F,q,G)=>{F.listen(q,te=>{try{G(te)}catch(ie){setTimeout(()=>{throw ie},0)}})};return z(S,Ua.EventType.OPEN,()=>{b||(oe(Vt,`RPC '${e}' stream ${o} transport opened.`),N.__())}),z(S,Ua.EventType.CLOSE,()=>{b||(b=!0,oe(Vt,`RPC '${e}' stream ${o} transport closed`),N.u_(),this.d_(S))}),z(S,Ua.EventType.ERROR,F=>{b||(b=!0,Eo(Vt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),N.u_(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),z(S,Ua.EventType.MESSAGE,F=>{var q;if(!b){const G=F.data[0];Fe(!!G,16349);const te=G,ie=(te==null?void 0:te.error)||((q=te[0])===null||q===void 0?void 0:q.error);if(ie){oe(Vt,`RPC '${e}' stream ${o} received error:`,ie);const _e=ie.status;let de=function(A){const D=at[A];if(D!==void 0)return h0(D)}(_e),O=ie.message;de===void 0&&(de=Z.INTERNAL,O="Unknown error status: "+_e+" with message "+ie.message),b=!0,N.u_(new ge(de,O)),S.close()}else oe(Vt,`RPC '${e}' stream ${o} received:`,G),N.c_(G)}}),z(f,x_.STAT_EVENT,F=>{F.stat===Yd.PROXY?oe(Vt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Yd.NOPROXY&&oe(Vt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{N.a_()},0),N}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(r){return new uA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="PersistentStream";class R0{constructor(e,t,s,o,l,h,f,m){this.xi=e,this.S_=s,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new C0(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===t&&this.z_(s,o)},s=>{e(()=>{const o=new ge(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return oe(Yy,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(oe(Yy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ok extends R0{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=dA(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?ir(h.readTime):Ie.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=af(this.serializer),t.addTarget=function(l,h){let f;const m=h.target;if(f=tf(m)?{documents:mA(l,m)}:{query:gA(l,m).gt},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=p0(l,h.resumeToken);const y=rf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ie.min())>0){f.readTime=mc(l,h.snapshotVersion.toTimestamp());const y=rf(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=vA(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=af(this.serializer),t.removeTarget=e,this.Q_(t)}}class ak extends R0{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=pA(e.writeResults,e.commitTime),s=ir(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=af(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>fA(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{}class uk extends lk{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,sf(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(Z.UNKNOWN,l.toString())})}Yo(e,t,s,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.Yo(e,sf(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(Z.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class ck{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Or(t),this.ua=!1):oe("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="RemoteStore";class hk{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{s.enqueueAndForget(async()=>{gs(this)&&(oe(fs,"Restarting streams for network reachability change."),await async function(m){const y=Se(m);y.da.add(4),await ml(y),y.Va.set("Unknown"),y.da.delete(4),await jc(y)}(this))})}),this.Va=new ck(s,o)}}async function jc(r){if(gs(r))for(const e of r.Aa)await e(!0)}async function ml(r){for(const e of r.Aa)await e(!1)}function A0(r,e){const t=Se(r);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),tp(t)?ep(t):jo(t).N_()&&Zf(t,e))}function Jf(r,e){const t=Se(r),s=jo(t);t.Ea.delete(e),s.N_()&&k0(t,e),t.Ea.size===0&&(s.N_()?s.k_():gs(t)&&t.Va.set("Unknown"))}function Zf(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jo(r).Z_(e)}function k0(r,e){r.ma.Ke(e),jo(r).X_(e)}function ep(r){r.ma=new sA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),jo(r).start(),r.Va.ca()}function tp(r){return gs(r)&&!jo(r).O_()&&r.Ea.size>0}function gs(r){return Se(r).da.size===0}function x0(r){r.ma=void 0}async function dk(r){r.Va.set("Online")}async function fk(r){r.Ea.forEach((e,t)=>{Zf(r,e)})}async function pk(r,e){x0(r),tp(r)?(r.Va.Pa(e),ep(r)):r.Va.set("Unknown")}async function mk(r,e,t){if(r.Va.set("Online"),e instanceof f0&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ea.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ea.delete(f),o.ma.removeTarget(f))}(r,e)}catch(s){oe(fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yc(r,s)}else if(e instanceof Xu?r.ma.Xe(e):e instanceof d0?r.ma.ot(e):r.ma.nt(e),!t.isEqual(Ie.min()))try{const s=await S0(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.ma.It(h);return f.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const E=l.Ea.get(y);E&&l.Ea.set(y,E.withResumeToken(m.resumeToken,h))}}),f.targetMismatches.forEach((m,y)=>{const E=l.Ea.get(m);if(!E)return;l.Ea.set(m,E.withResumeToken(At.EMPTY_BYTE_STRING,E.snapshotVersion)),k0(l,m);const S=new fi(E.target,m,y,E.sequenceNumber);Zf(l,S)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){oe(fs,"Failed to raise snapshot:",s),await yc(r,s)}}async function yc(r,e,t){if(!Mo(e))throw e;r.da.add(1),await ml(r),r.Va.set("Offline"),t||(t=()=>S0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe(fs,"Retrying IndexedDB access"),await t(),r.da.delete(1),await jc(r)})}function P0(r,e){return e().catch(t=>yc(r,t,e))}async function Fc(r){const e=Se(r),t=Si(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:jf;for(;gk(e);)try{const o=await XA(e.localStore,s);if(o===null){e.Ia.length===0&&t.k_();break}s=o.batchId,yk(e,o)}catch(o){await yc(e,o)}N0(e)&&D0(e)}function gk(r){return gs(r)&&r.Ia.length<10}function yk(r,e){r.Ia.push(e);const t=Si(r);t.N_()&&t.ea&&t.ta(e.mutations)}function N0(r){return gs(r)&&!Si(r).O_()&&r.Ia.length>0}function D0(r){Si(r).start()}async function vk(r){Si(r).ia()}async function _k(r){const e=Si(r);for(const t of r.Ia)e.ta(t.mutations)}async function wk(r,e,t){const s=r.Ia.shift(),o=Hf.from(s,e,t);await P0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Fc(r)}async function Ek(r,e){e&&Si(r).ea&&await async function(s,o){if(function(h){return rA(h)&&h!==Z.ABORTED}(o.code)){const l=s.Ia.shift();Si(s).L_(),await P0(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Fc(s)}}(r,e),N0(r)&&D0(r)}async function Xy(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),oe(fs,"RemoteStore received new credentials");const s=gs(t);t.da.add(3),await ml(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await jc(t)}async function Tk(r,e){const t=Se(r);e?(t.da.delete(2),await jc(t)):e||(t.da.add(2),await ml(t),t.Va.set("Unknown"))}function jo(r){return r.fa||(r.fa=function(t,s,o){const l=Se(t);return l.oa(),new ok(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:dk.bind(null,r),n_:fk.bind(null,r),i_:pk.bind(null,r),Y_:mk.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),tp(r)?ep(r):r.Va.set("Unknown")):(await r.fa.stop(),x0(r))})),r.fa}function Si(r){return r.ga||(r.ga=function(t,s,o){const l=Se(t);return l.oa(),new ak(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:vk.bind(null,r),i_:Ek.bind(null,r),na:_k.bind(null,r),ra:wk.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Fc(r)):(await r.ga.stop(),r.Ia.length>0&&(oe(fs,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new np(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(r,e){if(Or("AsyncQueue",`${e}: ${r}`),Mo(r))return new ge(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Ba(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new _o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.pa=new Je(ve.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ao{constructor(e,t,s,o,l,h,f,m,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new Ao(e,t,_o.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Sk{constructor(){this.queries=Zy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Se(t),l=o.queries;o.queries=Zy(),l.forEach((h,f)=>{for(const m of f.Sa)m.onError(s)})})(this,new ge(Z.ABORTED,"Firestore shutting down"))}}function Zy(){return new ms(r=>J_(r),Dc)}async function Ck(r,e){const t=Se(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(s=2):(l=new Ik,s=e.va()?0:1);try{switch(s){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=rp(h,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&ip(t)}async function Rk(r,e){const t=Se(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Ak(r,e){const t=Se(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Ma(o)&&(s=!0);h.ba=o}}s&&ip(t)}function kk(r,e,t){const s=Se(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function ip(r){r.Ca.forEach(e=>{e.next()})}var cf,ev;(ev=cf||(cf={})).xa="default",ev.Cache="cache";class xk{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.key=e}}class O0{constructor(e){this.key=e}}class Pk{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xe(),this.mutatedKeys=xe(),this.Za=Z_(e),this.Xa=new _o(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new Jy,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const I=o.get(E),b=bc(this.query,S)?S:null,N=!!I&&this.mutatedKeys.has(I.key),z=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let F=!1;I&&b?I.data.isEqual(b.data)?N!==z&&(s.track({type:3,doc:b}),F=!0):this.ru(I,b)||(s.track({type:2,doc:b}),F=!0,(m&&this.Za(b,m)>0||y&&this.Za(b,y)<0)&&(f=!0)):!I&&b?(s.track({type:0,doc:b}),F=!0):I&&!b&&(s.track({type:1,doc:I}),F=!0,(m||y)&&(f=!0)),F&&(b?(h=h.add(b),l=z?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{Xa:h,nu:s,Cs:f,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((E,S)=>function(b,N){const z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:F})}};return z(b)-z(N)}(E.type,S.type)||this.Za(E.doc,S.doc)),this.iu(s),o=o!=null&&o;const f=t&&!o?this.su():[],m=this.Ya.size===0&&this.current&&!o?1:0,y=m!==this.Ja;return this.Ja=m,h.length!==0||y?{snapshot:new Ao(this.query,e.Xa,l,h,e.mutatedKeys,m===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:f}:{ou:f}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Jy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=xe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new O0(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new b0(s))}),t}au(e){this.Ha=e.$s,this.Ya=xe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Ao.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const sp="SyncEngine";class Nk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Dk{constructor(e){this.key=e,this.cu=!1}}class bk{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new ms(f=>J_(f),Dc),this.Pu=new Map,this.Tu=new Set,this.Iu=new Je(ve.comparator),this.Eu=new Map,this.du=new Gf,this.Au={},this.Ru=new Map,this.Vu=Ro.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Ok(r,e,t=!0){const s=U0(r);let o;const l=s.hu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await V0(s,e,t,!0),o}async function Vk(r,e){const t=U0(r);await V0(t,e,!0,!1)}async function V0(r,e,t,s){const o=await JA(r.localStore,nr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await Lk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&A0(r.remoteStore,o),f}async function Lk(r,e,t,s,o){r.fu=(S,I,b)=>async function(z,F,q,G){let te=F.view.tu(q);te.Cs&&(te=await qy(z.localStore,F.query,!1).then(({documents:O})=>F.view.tu(O,te)));const ie=G&&G.targetChanges.get(F.targetId),_e=G&&G.targetMismatches.get(F.targetId)!=null,de=F.view.applyChanges(te,z.isPrimaryClient,ie,_e);return nv(z,F.targetId,de.ou),de.snapshot}(r,S,I,b);const l=await qy(r.localStore,e,!0),h=new Pk(e,l.$s),f=h.tu(l.documents),m=pl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,m);nv(r,t,y.ou);const E=new Nk(e,t,h);return r.hu.set(e,E),r.Pu.has(t)?r.Pu.get(t).push(e):r.Pu.set(t,[e]),y.snapshot}async function Mk(r,e,t){const s=Se(r),o=s.hu.get(e),l=s.Pu.get(o.targetId);if(l.length>1)return s.Pu.set(o.targetId,l.filter(h=>!Dc(h,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await lf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Jf(s.remoteStore,o.targetId),hf(s,o.targetId)}).catch(Lo)):(hf(s,o.targetId),await lf(s.localStore,o.targetId,!0))}async function jk(r,e){const t=Se(r),s=t.hu.get(e),o=t.Pu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Jf(t.remoteStore,s.targetId))}async function Fk(r,e,t){const s=qk(r);try{const o=await function(h,f){const m=Se(h),y=pt.now(),E=f.reduce((b,N)=>b.add(N.key),xe());let S,I;return m.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=Vr(),z=xe();return m.Bs.getEntries(b,E).next(F=>{N=F,N.forEach((q,G)=>{G.isValidDocument()||(z=z.add(q))})}).next(()=>m.localDocuments.getOverlayedDocuments(b,N)).next(F=>{S=F;const q=[];for(const G of f){const te=JR(G,S.get(G.key).overlayedDocument);te!=null&&q.push(new Pi(G.key,te,H_(te.value.mapValue),rr.exists(!0)))}return m.mutationQueue.addMutationBatch(b,y,q,f)}).next(F=>{I=F;const q=F.applyToLocalDocumentSet(S,z);return m.documentOverlayCache.saveOverlays(b,F.batchId,q)})}).then(()=>({batchId:I.batchId,changes:t0(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,m){let y=h.Au[h.currentUser.toKey()];y||(y=new Je(Re)),y=y.insert(f,m),h.Au[h.currentUser.toKey()]=y}(s,o.batchId,t),await gl(s,o.changes),await Fc(s.remoteStore)}catch(o){const l=rp(o,"Failed to persist write");t.reject(l)}}async function L0(r,e){const t=Se(r);try{const s=await QA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Fe(h.cu,14607):o.removedDocuments.size>0&&(Fe(h.cu,42227),h.cu=!1))}),await gl(t,s,e)}catch(s){await Lo(s)}}function tv(r,e,t){const s=Se(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.hu.forEach((l,h)=>{const f=h.view.Fa(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const m=Se(h);m.onlineState=f;let y=!1;m.queries.forEach((E,S)=>{for(const I of S.Sa)I.Fa(f)&&(y=!0)}),y&&ip(m)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Uk(r,e,t){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let h=new Je(ve.comparator);h=h.insert(l,Mt.newNoDocument(l,Ie.min()));const f=xe().add(l),m=new Lc(Ie.min(),new Map,new Je(Re),h,f);await L0(s,m),s.Iu=s.Iu.remove(l),s.Eu.delete(e),op(s)}else await lf(s.localStore,e,!1).then(()=>hf(s,e,t)).catch(Lo)}async function Bk(r,e){const t=Se(r),s=e.batch.batchId;try{const o=await GA(t.localStore,e);j0(t,s,null),M0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await gl(t,o)}catch(o){await Lo(o)}}async function zk(r,e,t){const s=Se(r);try{const o=await function(h,f){const m=Se(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return m.mutationQueue.lookupMutationBatch(y,f).next(S=>(Fe(S!==null,37113),E=S.keys(),m.mutationQueue.removeMutationBatch(y,S))).next(()=>m.mutationQueue.performConsistencyCheck(y)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(y,E,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>m.localDocuments.getDocuments(y,E))})}(s.localStore,e);j0(s,e,t),M0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await gl(s,o)}catch(o){await Lo(o)}}function M0(r,e){(r.Ru.get(e)||[]).forEach(t=>{t.resolve()}),r.Ru.delete(e)}function j0(r,e,t){const s=Se(r);let o=s.Au[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function hf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),t&&r.lu.gu(s,t);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||F0(r,s)})}function F0(r,e){r.Tu.delete(e.path.canonicalString());const t=r.Iu.get(e);t!==null&&(Jf(r.remoteStore,t),r.Iu=r.Iu.remove(e),r.Eu.delete(t),op(r))}function nv(r,e,t){for(const s of t)s instanceof b0?(r.du.addReference(s.key,e),$k(r,s)):s instanceof O0?(oe(sp,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||F0(r,s.key)):Ee(19791,{pu:s})}function $k(r,e){const t=e.key,s=t.path.canonicalString();r.Iu.get(t)||r.Tu.has(s)||(oe(sp,"New document in limbo: "+t),r.Tu.add(s),op(r))}function op(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const t=new ve(et.fromString(e)),s=r.Vu.next();r.Eu.set(s,new Dk(t)),r.Iu=r.Iu.insert(t,s),A0(r.remoteStore,new fi(nr($f(t.path)),s,"TargetPurposeLimboResolution",kc.le))}}async function gl(r,e,t){const s=Se(r),o=[],l=[],h=[];s.hu.isEmpty()||(s.hu.forEach((f,m)=>{h.push(s.fu(m,e,t).then(y=>{var E;if((y||t)&&s.isPrimaryClient){const S=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(m.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(m.targetId,S?"current":"not-current")}if(y){o.push(y);const S=Yf.Rs(m.targetId,y);l.push(S)}}))}),await Promise.all(h),s.lu.Y_(o),await async function(m,y){const E=Se(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>K.forEach(y,I=>K.forEach(I.ds,b=>E.persistence.referenceDelegate.addReference(S,I.targetId,b)).next(()=>K.forEach(I.As,b=>E.persistence.referenceDelegate.removeReference(S,I.targetId,b)))))}catch(S){if(!Mo(S))throw S;oe(Xf,"Failed to update sequence numbers: "+S)}for(const S of y){const I=S.targetId;if(!S.fromCache){const b=E.xs.get(I),N=b.snapshotVersion,z=b.withLastLimboFreeSnapshotVersion(N);E.xs=E.xs.insert(I,z)}}}(s.localStore,l))}async function Wk(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){oe(sp,"User change. New user:",e.toKey());const s=await I0(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(f=>{f.forEach(m=>{m.reject(new ge(Z.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await gl(t,s.ks)}}function Hk(r,e){const t=Se(r),s=t.Eu.get(e);if(s&&s.cu)return xe().add(s.key);{let o=xe();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const f=t.hu.get(h);o=o.unionWith(f.view.eu)}return o}}function U0(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=L0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uk.bind(null,e),e.lu.Y_=Ak.bind(null,e.eventManager),e.lu.gu=kk.bind(null,e.eventManager),e}function qk(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zk.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return KA(this.persistence,new WA,e.initialUser,this.serializer)}Su(e){return new T0(Qf.fi,this.serializer)}bu(e){return new ek}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class Kk extends vc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Fe(this.persistence.referenceDelegate instanceof gc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xA(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new T0(s=>gc.fi(s,t),this.serializer)}}class df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,this.syncEngine),await Tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sk}()}createDatastore(e){const t=Mc(e.databaseInfo.databaseId),s=function(l){return new sk(l)}(e.databaseInfo);return function(l,h,f,m){return new uk(l,h,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new hk(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>tv(this.syncEngine,t,0),function(){return Qy.C()?new Qy:new tk}())}createSyncEngine(e,t){return function(o,l,h,f,m,y,E){const S=new bk(o,l,h,f,m,y);return E&&(S.mu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);oe(fs,"RemoteStore shutting down."),l.da.add(5),await ml(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}df.provider={build:()=>new df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="FirestoreClient";class Qk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Lt.UNAUTHENTICATED,this.clientId=V_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{oe(Ci,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe(Ci,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=rp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Vd(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Ci,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await I0(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function rv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Yk(r);oe(Ci,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Xy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Xy(e.remoteStore,o)),r._onlineComponents=e}async function Yk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Ci,"Using user provided OfflineComponentProvider");try{await Vd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),await Vd(r,new vc)}}else oe(Ci,"Using default OfflineComponentProvider"),await Vd(r,new Kk(void 0));return r._offlineComponents}async function B0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Ci,"Using user provided OnlineComponentProvider"),await rv(r,r._uninitializedComponentsProvider._online)):(oe(Ci,"Using default OnlineComponentProvider"),await rv(r,new df))),r._onlineComponents}function Xk(r){return B0(r).then(e=>e.syncEngine)}async function Jk(r){const e=await B0(r),t=e.eventManager;return t.onListen=Ok.bind(null,e.syncEngine),t.onUnlisten=Mk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Vk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jk.bind(null,e.syncEngine),t}function Zk(r,e,t={}){const s=new vi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,m,y){const E=new Gk({next:I=>{E.xu(),h.enqueueAndForget(()=>Rk(l,S));const b=I.docs.has(f);!b&&I.fromCache?y.reject(new ge(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&I.fromCache&&m&&m.source==="server"?y.reject(new ge(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),S=new xk($f(f.path),E,{includeMetadataChanges:!0,Qa:!0});return Ck(l,S)}(await Jk(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(r,e,t){if(!t)throw new ge(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function tx(r,e,t,s){if(e===!0&&s===!0)throw new ge(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function sv(r){if(!ve.isDocumentKey(r))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ap(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function ps(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(r);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firestore.googleapis.com",ov=!0;class av{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$0,this.ssl=ov}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:ov;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AA)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new nR;switch(s.type){case"firstParty":return new oR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=iv.get(t);s&&(oe("ComponentProvider","Removing Datastore"),iv.delete(t),s.terminate())}(this),Promise.resolve()}}function nx(r,e,t,s={}){var o;r=ps(r,lp);const l=Do(e),h=r._getSettings(),f=Object.assign(Object.assign({},h),{emulatorOptions:r._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Vv(`https://${m}`),Lv("Firestore",!0)),h.host!==$0&&h.host!==m&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:m,ssl:l,emulatorOptions:s});if(!_i(y,f)&&(r._setSettings(y),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=Lt.MOCK_USER;else{E=tI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Lt(I)}r._authCredentials=new rR(new b_(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new up(this.firestore,e,this._query)}}class cn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class il extends up{constructor(e,t,s){super(e,t,$f(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new ve(e))}withConverter(e){return new il(this.firestore,e,this._path)}}function _c(r,e,...t){if(r=$t(r),arguments.length===1&&(e=V_.newId()),ex("doc","path",e),r instanceof lp){const s=et.fromString(e,...t);return sv(s),new cn(r,null,new ve(s))}{if(!(r instanceof cn||r instanceof il))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return sv(s),new cn(r.firestore,r instanceof il?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="AsyncQueue";class uv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new C0(this,"async_queue_retry"),this.rc=()=>{const s=Od();s&&oe(lv,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=Od();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Od();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new vi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Mo(e))throw e;oe(lv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Or("INTERNAL UNHANDLED ERROR: ",cv(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=np.createAndSchedule(this,e,t,s,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Ee(47125,{cc:cv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function cv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Uc extends lp{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new uv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uv(e),this._firestoreClient=void 0,await e}}}function W0(r,e){const t=Uv(),s=uc,o=Sf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=ZT("firestore");l&&nx(o,...l)}return o}function H0(r){if(r._terminated)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||rx(r),r._firestoreClient}function rx(r){var e,t,s;const o=r._freezeSettings(),l=function(f,m,y,E){return new ER(f,m,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,z0(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new Qk(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(At.fromBase64String(e))}catch(t){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ko(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=/^__.*__$/;class sx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,t,this.fieldTransforms):new fl(e,this.data,t,this.fieldTransforms)}}class q0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Pi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function K0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ic:r})}}class $c{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new $c(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return wc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(K0(this.Ic)&&ix.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class ox{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mc(e)}bc(e,t,s,o=!1){return new $c({Ic:e,methodName:t,wc:s,path:Rt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function G0(r){const e=r._freezeSettings(),t=Mc(r._databaseId);return new ox(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ax(r,e,t,s,o,l={}){const h=r.bc(l.merge||l.mergeFields?2:0,e,t,o);fp("Data must be an object, but it was:",h,s);const f=Q0(s,h);let m,y;if(l.merge)m=new un(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const S of l.mergeFields){const I=ff(e,S,t);if(!h.contains(I))throw new ge(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);X0(E,I)||E.push(I)}m=new un(E),y=h.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,y=h.fieldTransforms;return new sx(new Zt(f),m,y)}class Wc extends zc{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function lx(r,e,t){return new $c({Ic:3,wc:e.settings.wc,methodName:r._methodName,Rc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dp extends zc{constructor(e,t){super(e),this.Sc=t}_toFieldTransform(e){const t=lx(this,e,!0),s=this.Sc.map(l=>yl(l,t)),o=new Co(s);return new GR(e.path,o)}isEqual(e){return e instanceof dp&&_i(this.Sc,e.Sc)}}function ux(r,e,t,s){const o=r.bc(1,e,t);fp("Data must be an object, but it was:",o,s);const l=[],h=Zt.empty();xi(s,(m,y)=>{const E=pp(e,m,t);y=$t(y);const S=o.mc(E);if(y instanceof Wc)l.push(E);else{const I=yl(y,S);I!=null&&(l.push(E),h.set(E,I))}});const f=new un(l);return new q0(h,f,o.fieldTransforms)}function cx(r,e,t,s,o,l){const h=r.bc(1,e,t),f=[ff(e,s,t)],m=[o];if(l.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(ff(e,l[I])),m.push(l[I+1]);const y=[],E=Zt.empty();for(let I=f.length-1;I>=0;--I)if(!X0(y,f[I])){const b=f[I];let N=m[I];N=$t(N);const z=h.mc(b);if(N instanceof Wc)y.push(b);else{const F=yl(N,z);F!=null&&(y.push(b),E.set(b,F))}}const S=new un(y);return new q0(E,S,h.fieldTransforms)}function yl(r,e){if(Y0(r=$t(r)))return fp("Unsupported field value:",e,r),Q0(r,e);if(r instanceof zc)return function(s,o){if(!K0(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let m=yl(f,o.fc(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=$t(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=pt.fromDate(s);return{timestampValue:mc(o.serializer,l)}}if(s instanceof pt){const l=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(s instanceof cp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ko)return{bytesValue:p0(o.serializer,s._byteString)};if(s instanceof cn){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof hp)return function(h,f){return{mapValue:{fields:{[$_]:{stringValue:W_},[cc]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw f.gc("VectorValues must only contain numeric values.");return Wf(f.serializer,y)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${ap(s)}`)}(r,e)}function Q0(r,e){const t={};return M_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(r,(s,o)=>{const l=yl(o,e.Ac(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Y0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof cp||r instanceof ko||r instanceof cn||r instanceof zc||r instanceof hp)}function fp(r,e,t){if(!Y0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=ap(t);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function ff(r,e,t){if((e=$t(e))instanceof Bc)return e._internalPath;if(typeof e=="string")return pp(r,e);throw wc("Field path arguments must be of type string or ",r,!1,void 0,t)}const hx=new RegExp("[~\\*/\\[\\]]");function pp(r,e,t){if(e.search(hx)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Bc(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function wc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${s}`),h&&(m+=` in document ${o}`),m+=")"),new ge(Z.INVALID_ARGUMENT,f+r+m)}function X0(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dx extends J0{data(){return super.data()}}function Z0(r,e){return typeof e=="string"?pp(r,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}class fx{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return xi(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[cc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>it(h.doubleValue));return new hp(l)}convertGeoPoint(e){return new cp(it(e.latitude),it(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Pc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=et.fromString(e);Fe(w0(s),9688,{name:e});const o=new tl(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return o.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ew extends J0{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Z0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class gx extends ew{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(r){r=ps(r,cn);const e=ps(r.firestore,Uc);return Zk(H0(e),r._key).then(t=>_x(e,r,t))}class yx extends fx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function vx(r,e,t){r=ps(r,cn);const s=ps(r.firestore,Uc),o=px(r.converter,e);return tw(s,[ax(G0(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,rr.none())])}function hv(r,e,t,...s){r=ps(r,cn);const o=ps(r.firestore,Uc),l=G0(o);let h;return h=typeof(e=$t(e))=="string"||e instanceof Bc?cx(l,"updateDoc",r._key,e,t,s):ux(l,"updateDoc",r._key,e),tw(o,[h.toMutation(r._key,rr.exists(!0))])}function tw(r,e){return function(s,o){const l=new vi;return s.asyncQueue.enqueueAndForget(async()=>Fk(await Xk(s),o,l)),l.promise}(H0(r),e)}function _x(r,e,t){const s=t.docs.get(e._key),o=new yx(r);return new ew(r,o,e._key,s,new mx(t.hasPendingWrites,t.fromCache),e.converter)}function wx(...r){return new dp("arrayUnion",r)}(function(e,t=!0){(function(o){Vo=o})(bo),wo(new us("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Uc(new iR(s.getProvider("auth-internal")),new aR(h,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(y.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),gi(gy,yy,e),gi(gy,yy,"esm2017")})();const Ex=W0(),Tx=()=>{const[r,e]=$.useState(null),[t,s]=$.useState(!1),[o,l]=$.useState(!1),[h,f]=$.useState(!1),[m,y]=$.useState(!1),[E,S]=$.useState(!1),[I,b]=$.useState(!1),N=.8,z=Lr();$.useEffect(()=>{(async()=>{if(!ls.currentUser)return;const G=_c(Ex,"users",ls.currentUser.uid),te=await mp(G);te.exists()&&e(te.data())})()},[]);const F=async()=>{try{await P1(ls),z("/login")}catch{alert("Sign out failed. Please try again.")}};return r?t?w.jsxs("div",{className:"profile-bg",children:[w.jsx(Fa,{}),w.jsx(ja,{}),w.jsxs("div",{className:"profile-card",children:[w.jsxs("div",{className:"profile-avatar-glow",children:[w.jsx("span",{className:"glow"}),w.jsx("div",{className:"profile-avatar",children:w.jsx("img",{src:r.profilePicture,alt:"avatar",style:{width:80,height:80,borderRadius:"50%"}})})]}),w.jsx("div",{className:"profile-username",children:r.username}),w.jsxs("div",{className:"profile-greeting",children:["Welcome, ",r.username,"!"]}),w.jsxs("div",{className:"profile-complete-label",children:["Profile completeness: ",(N*100).toFixed(0),"%"]}),w.jsx("div",{className:"profile-complete-bar",children:w.jsx("div",{className:"profile-complete-inner",style:{width:`${N*100}%`}})})]}),w.jsxs("div",{style:{width:"100%",maxWidth:340,margin:"0 auto"},children:[w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Lastname"}),w.jsx("span",{children:r.kyc.fullName.split(" ").slice(-1)[0]})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Firstname"}),w.jsx("span",{children:r.kyc.fullName.split(" ").slice(0,-1).join(" ")})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Gender"}),w.jsx("span",{children:"-"})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Date of birth"}),w.jsx("span",{children:r.kyc.dob})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Email"}),w.jsx("span",{children:r.email})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Phone number"}),w.jsx("span",{children:r.phone})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Country"}),w.jsx("span",{children:"-"})]}),w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600,margin:"10px 0"},children:[w.jsx("span",{children:"Address"}),w.jsx("span",{children:"-"})]})]})]}):o?w.jsxs("div",{className:"profile-bg",children:[w.jsx(Fa,{}),w.jsx(ja,{}),w.jsxs("div",{className:"section-card",children:[w.jsxs("div",{className:"section-header",children:[w.jsx("span",{className:"icon-section icon-section-social"}),"Social Connections"]}),w.jsxs("div",{className:"section-content",children:["eKYC: ",w.jsx("b",{style:{color:"#2CFF05"},children:r.kyc.status==="verified"?"Verified":"Not verified"})]}),w.jsxs("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"},children:[w.jsx("b",{children:"Zalo connecting"}),": ",w.jsx("span",{style:{color:"#39FF14",marginLeft:12},children:"No connection"})]}),w.jsxs("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"},children:[w.jsx("b",{children:"Facebook connecting"}),": ",w.jsx("span",{style:{color:"#39FF14",marginLeft:12},children:"No connection"})]}),w.jsxs("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"},children:[w.jsx("b",{children:"Google connecting"}),": ",w.jsx("span",{style:{color:"#39FF14",marginLeft:12},children:"No connection"})]}),w.jsxs("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"},children:[w.jsx("b",{children:"Tiktok connecting"}),": ",w.jsx("span",{style:{color:"#39FF14",marginLeft:12},children:"No connection"})]}),w.jsxs("div",{className:"section-content",style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"12px 0"},children:[w.jsx("b",{children:"Telegram connecting"}),": ",w.jsx("span",{style:{color:"#39FF14",marginLeft:12},children:"No connection"})]})]})]}):h?w.jsxs("div",{className:"profile-bg",children:[w.jsx(Fa,{}),w.jsx(ja,{}),w.jsxs("div",{className:"section-card",children:[w.jsxs("div",{className:"section-header",children:[w.jsx("span",{className:"icon-section icon-section-security"}),"Account & Security"]}),w.jsxs("div",{className:"section-toggle-row",children:[w.jsx("span",{children:"Password"}),w.jsx("button",{className:"section-action-btn",children:"Change"})]}),w.jsxs("div",{className:"section-toggle-row",children:[w.jsx("span",{children:"2FA"}),w.jsxs("label",{className:"toggle-switch",children:[w.jsx("input",{type:"checkbox",checked:r.security.twoFactorEnabled,readOnly:!0}),w.jsx("span",{className:"toggle-slider"})]})]}),w.jsxs("div",{className:"section-toggle-row",children:[w.jsx("span",{children:"Touch ID"}),w.jsxs("label",{className:"toggle-switch",children:[w.jsx("input",{type:"checkbox",checked:!1,readOnly:!0}),w.jsx("span",{className:"toggle-slider"})]})]}),w.jsxs("div",{className:"section-actions",children:[w.jsx("button",{className:"section-action-btn",style:{background:"#d00"},onClick:()=>S(!0),children:"Delete Account"}),w.jsx("button",{className:"section-action-btn",onClick:()=>b(!0),children:"Sign Out"})]})]}),E&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Are you sure you want to delete your account?"}),w.jsx("button",{className:"section-action-btn",style:{background:"#d00"},onClick:()=>S(!1),children:"Cancel"}),w.jsx("button",{className:"section-action-btn",onClick:()=>{},children:"Delete"})]})}),I&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Sign out of your account?"}),w.jsx("button",{className:"section-action-btn",onClick:()=>b(!1),children:"Cancel"}),w.jsx("button",{className:"section-action-btn",onClick:F,children:"Sign Out"})]})})]}):w.jsxs("div",{className:"profile-bg",children:[w.jsx(Fa,{}),w.jsx(ja,{}),w.jsxs("div",{className:"profile-card",children:[w.jsxs("div",{className:"profile-avatar-glow",children:[w.jsx("span",{className:"glow"}),w.jsx("div",{className:"profile-avatar",children:w.jsx("img",{src:r.profilePicture,alt:"avatar",style:{width:80,height:80,borderRadius:"50%"}})})]}),w.jsx("div",{className:"profile-username",children:r.username}),w.jsxs("div",{className:"profile-greeting",children:["Welcome, ",r.username,"!"]}),w.jsxs("div",{className:"profile-complete-label",children:["Profile completeness: ",(N*100).toFixed(0),"%"]}),w.jsx("div",{className:"profile-complete-bar",children:w.jsx("div",{className:"profile-complete-inner",style:{width:`${N*100}%`}})})]}),w.jsxs("div",{className:"balance-card",children:[w.jsxs("div",{className:"balance-row",children:[w.jsx("span",{className:"profile-balance",children:r.wallet.balance}),w.jsxs("span",{className:"profile-group-count",children:["Group: ",r.mining.groupMining.groupName," (",r.mining.groupMining.members," members, Boost: ",r.mining.groupMining.boostPercent,"%)"]})]}),w.jsxs("div",{className:"referral-row",children:[w.jsx("span",{className:"referral-label",children:"Referral:"}),w.jsx("span",{className:"referral-code",children:r.referralCode}),w.jsx("span",{className:"icon-copy",onClick:()=>{navigator.clipboard.writeText(r.referralCode),y(!0),setTimeout(()=>y(!1),1200)},title:"Copy"}),w.jsx("span",{className:"icon-share",title:"Share"}),m&&w.jsx("span",{style:{color:"#2CFF05",fontSize:"0.98rem",marginLeft:8},children:"Copied!"})]}),w.jsxs("div",{className:"badge-row",children:[w.jsxs("span",{className:"badge-chip",children:[w.jsx("span",{className:"icon-badge icon-badge-verified"})," Verified"]}),w.jsxs("span",{className:"badge-chip",children:[w.jsx("span",{className:"icon-badge icon-badge-group"})," Group"]})]})]}),w.jsxs("div",{className:"section-card",children:[w.jsxs("div",{className:"section-header aligned-header",children:[w.jsx("span",{className:"icon-section icon-section-info"}),w.jsx("span",{children:"My Information"})]}),w.jsxs("div",{className:"info-section",children:[w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Email:"}),w.jsx("span",{className:"info-value",children:r.email})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Phone:"}),w.jsx("span",{className:"info-value",children:r.phone})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Country:"}),w.jsx("span",{className:"info-value",children:"-"})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Address:"}),w.jsx("span",{className:"info-value",children:"-"})]})]})]}),w.jsxs("div",{className:"section-card",children:[w.jsxs("div",{className:"section-header aligned-header",children:[w.jsx("span",{className:"icon-section icon-section-verify"}),w.jsx("span",{children:"User Verification"})]}),w.jsxs("div",{className:"info-section",children:[w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"KYC Status:"}),w.jsx("span",{className:"info-value",children:w.jsx("b",{style:{color:"#2CFF05"},children:r.kyc.status})})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"Full Name:"}),w.jsx("span",{className:"info-value",children:r.kyc.fullName})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"DOB:"}),w.jsx("span",{className:"info-value",children:r.kyc.dob})]}),w.jsxs("div",{className:"info-row",children:[w.jsx("span",{className:"info-label",children:"ID:"}),w.jsxs("span",{className:"info-value",children:[r.kyc.idType," ",r.kyc.idNumber]})]})]})]}),w.jsxs("div",{className:"section-card",children:[w.jsxs("div",{className:"section-header",children:[w.jsx("span",{className:"icon-section icon-section-security"}),"Account & Security"]}),w.jsxs("div",{className:"section-actions",children:[w.jsx("button",{className:"section-action-btn",style:{background:"#d00"},onClick:()=>S(!0),children:"Delete Account"}),w.jsx("button",{className:"section-action-btn",onClick:()=>b(!0),children:"Sign Out"})]})]}),E&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Are you sure you want to delete your account?"}),w.jsx("button",{className:"section-action-btn",style:{background:"#d00"},onClick:()=>S(!1),children:"Cancel"}),w.jsx("button",{className:"section-action-btn",onClick:()=>{},children:"Delete"})]})}),I&&w.jsx("div",{className:"modal-overlay",children:w.jsxs("div",{className:"modal-content",children:[w.jsx("h3",{children:"Sign out of your account?"}),w.jsx("button",{className:"section-action-btn",onClick:()=>b(!1),children:"Cancel"}),w.jsx("button",{className:"section-action-btn",onClick:F,children:"Sign Out"})]})})]}):w.jsx("div",{children:"Loading..."})},Ix=({name:r})=>{const e=r.split(" ").map(t=>t[0]).join("").toUpperCase();return w.jsx("div",{className:"avatar",style:{width:32,height:32,fontSize:16,background:"#008000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:e})},Sx=({tag:r})=>w.jsx("span",{className:"badge-chip",style:{marginRight:6,marginBottom:2},children:r}),Cx=({blog:r,onClick:e})=>w.jsxs("div",{className:"blog-card",tabIndex:0,role:"button","aria-label":`Read blog: ${r.title}`,onClick:e,onKeyDown:t=>t.key==="Enter"?e():void 0,style:{cursor:"pointer",marginBottom:24,borderRadius:18,boxShadow:"0 4px 24px rgba(44,255,5,0.10), 0 1.5px 4px rgba(0,0,0,0.08)",background:"rgba(30,34,38,0.92)",padding:0,overflow:"hidden",transition:"transform 0.12s, box-shadow 0.18s",width:"350px"},onMouseDown:t=>{t.currentTarget.classList.add("card-tap")},onMouseUp:t=>{t.currentTarget.classList.remove("card-tap")},onMouseLeave:t=>{t.currentTarget.classList.remove("card-tap")},children:[r.bannerImageUrl&&w.jsx("img",{src:r.bannerImageUrl,alt:"banner",style:{width:"100%",height:140,objectFit:"cover"}}),w.jsxs("div",{style:{padding:"1.1rem 1.2rem 1.2rem 1.2rem"},children:[w.jsx("div",{style:{fontWeight:700,fontSize:"1.18rem",color:"#2CFF05",marginBottom:6},children:r.title}),w.jsx("div",{style:{color:"#b6ffb6",fontSize:"0.98rem",marginBottom:10},children:r.summary}),w.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[w.jsx(Ix,{name:r.authorName}),w.jsx("span",{style:{marginLeft:8,color:"#fff",fontWeight:600},children:r.authorName}),w.jsx("span",{style:{marginLeft:12,color:"#b6ffb6",fontSize:13},children:new Date(r.createdAt).toLocaleDateString()})]}),w.jsx("div",{style:{display:"flex",flexWrap:"wrap"},children:r.tags.map(t=>w.jsx(Sx,{tag:t},t))})]})]}),nw=[{id:"1",title:"Welcome to Crypto Insights!",body:"Were thrilled to officially welcome you to Crypto Insights, the go-to destination for all things related to our crypto project and the ever-evolving world of digital assets. With this blog, we aim to build a strong and transparent bridge between our team and the community. Expect timely updates on project milestones, exclusive behind-the-scenes insights, comprehensive tutorials to help you get the most out of our ecosystem, and in-depth analysis of market trends. Whether you're a seasoned crypto veteran or just beginning your journey into decentralized finance, there will be something here for everyone. Stay tunedwere just getting started, and the best is yet to come!",authorId:"tg_123456789",authorName:"Alice Crypto",createdAt:"2025-06-01T10:00:00Z",updatedAt:"2025-06-01T10:00:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1465618017/photo/businessmen-investor-think-before-buying-stock-market-investment-using-smartphone-to-analyze.jpg?s=612x612&w=0&k=20&c=YNEkfoME1jbz6FUJImxCQtaGZZntrf7u-Byxmgk4pOY=",tags:["announcement","crypto"],summary:"Introducing our official blog for project updates and news.",published:!0},{id:"2",title:"How to Connect Your Wallet",body:"Connecting your crypto wallet is one of the first and most important steps to engaging with decentralized applications, and weve made sure the process is as straightforward as possible. Simply click on the 'Connect Wallet' button located on the dashboard. From there, youll be prompted to choose your preferred blockchain or wallet providerwhether its MetaMask, Trust Wallet, Ledger, or any other compatible option. Once selected, just follow the on-screen prompts to authorize the connection. This process is secure, seamless, and takes less than a minute to complete. Should you encounter any issues along the way, our dedicated support team is ready to assist you every step of the way. Getting started with our platform has never been easier!",authorId:"tg_987654321",authorName:"Bob Blockchain",createdAt:"2025-06-05T14:30:00Z",updatedAt:"2025-06-05T15:00:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1465618017/photo/businessmen-investor-think-before-buying-stock-market-investment-using-smartphone-to-analyze.jpg?s=612x612&w=0&k=20&c=YNEkfoME1jbz6FUJImxCQtaGZZntrf7u-Byxmgk4pOY=",tags:["guide","wallet","onboarding"],summary:"A step-by-step guide to connecting your crypto wallet.",published:!0},{id:"3",title:"Understanding Smart Contracts",body:"Smart contracts are the backbone of decentralized applications, enabling trustless transactions and automated processes without the need for intermediaries. In essence, a smart contract is a self-executing contract with the terms of the agreement directly written into code. They run on blockchain networks, ensuring transparency and security. For example, when you interact with our platform, smart contracts handle everything from token transfers to executing trades, all while ensuring that the rules are followed as agreed upon by all parties involved. This technology not only reduces costs but also minimizes the risk of fraud or manipulation. As we continue to innovate, expect more features that leverage smart contracts to enhance your experience.",authorId:"tg_123456789",authorName:"Alice Crypto",createdAt:"2025-06-10T09:00:00Z",updatedAt:"2025-06-10T09:30:00Z",bannerImageUrl:"https://media.istockphoto.com/id/1465618017/photo/businessmen-investor-think-before-buying-stock-market-investment-using-smartphone-to-analyze.jpg?s=612x612&w=0&k=20&c=YNEkfoME1jbz6FUJImxCQtaGZZntrf7u-Byxmgk4pOY=",tags:["education","smart-contracts","blockchain"],summary:"An introduction to smart contracts and their role in our ecosystem.",published:!0}],Rx=()=>{const[r,e]=$.useState([]),t=Lr();return $.useEffect(()=>{e(nw.filter(s=>s.published!==!1))},[]),w.jsxs("div",{className:"main-bg",style:{paddingTop:0,paddingBottom:80,minHeight:"100vh"},children:[w.jsx("div",{className:"divider"}),w.jsx("div",{style:{width:"100%",maxWidth:540,margin:"0 auto",padding:"0 1.2rem"},children:w.jsx("div",{className:"section-header",style:{fontSize:"1.4rem",margin:"1.1rem 0 1.2rem 0",textAlign:"center"},children:"Blog"})}),w.jsx("main",{style:{width:"100%",maxWidth:540,margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center"},children:r.map(s=>w.jsx(Cx,{blog:s,onClick:()=>t(`/blog/${s.id}`)},s.id))})]})},Ax=({name:r})=>{const e=r.split(" ").map(t=>t[0]).join("").toUpperCase();return w.jsx("div",{className:"avatar",style:{width:32,height:32,fontSize:16,background:"#008000",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:e})},kx=({tag:r})=>w.jsx("span",{className:"badge-chip",style:{marginRight:6,marginBottom:2},children:r}),xx=()=>{const{id:r}=wv(),e=Lr(),t=nw.find(s=>s.id===r);return t?w.jsxs("div",{className:"main-bg",style:{minHeight:"100vh"},children:[w.jsxs("div",{className:"main-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%",maxWidth:540,margin:"0 auto",padding:"0.7rem 0.7rem 0 0.7rem"},children:[w.jsx("button",{className:"action-btn",style:{minWidth:44,minHeight:44,padding:0,borderRadius:12,marginRight:8},onClick:()=>e(-1),"aria-label":"Back",children:w.jsx("span",{className:"icon-close"})}),w.jsx("span",{className:"app-title",style:{flex:1,textAlign:"center"},children:"Blog"}),w.jsx("button",{className:"action-btn",style:{minWidth:44,minHeight:44,padding:0,borderRadius:12,marginLeft:8},"aria-label":"Share",onClick:()=>navigator.share?navigator.share({title:t.title,text:t.summary,url:window.location.href}):void 0,children:w.jsx("span",{className:"icon-group"})})]}),t.bannerImageUrl&&w.jsx("img",{src:t.bannerImageUrl,alt:"banner",style:{width:"90%",maxHeight:350,objectFit:"cover",borderRadius:18,margin:"1.1rem 0 0.7rem 0"}}),w.jsxs("div",{style:{width:"100%",maxWidth:350,margin:"0 auto",padding:"0 1.2rem"},children:[w.jsx("div",{style:{fontWeight:700,fontSize:"1.5rem",color:"#2CFF05",marginBottom:8},children:t.title}),w.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:10},children:[w.jsx(Ax,{name:t.authorName}),w.jsx("span",{style:{marginLeft:8,color:"#fff",fontWeight:600},children:t.authorName}),w.jsx("span",{style:{marginLeft:12,color:"#b6ffb6",fontSize:13},children:new Date(t.createdAt).toLocaleDateString()})]}),w.jsx("div",{style:{display:"flex",flexWrap:"wrap",marginBottom:12},children:t.tags.map(s=>w.jsx(kx,{tag:s},s))}),w.jsx("div",{className:"text-main",style:{fontSize:"1.08rem",lineHeight:1.7,marginBottom:32},children:t.body})]})]}):w.jsx("div",{className:"main-bg",children:"Not found"})},Px=()=>{const{id:r}=wv(),e=Lr(),t=C_.find(s=>s.id===r);return t?w.jsxs("main",{style:{maxWidth:350,margin:"0 auto",padding:"0 0 2rem 0",width:"100%",background:"transparent"},children:[w.jsxs("div",{className:"main-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%",maxWidth:540,margin:"0 auto",padding:"0.7rem 0.7rem 0 0.7rem"},children:[w.jsx("button",{className:"action-btn",style:{minWidth:44,minHeight:44,padding:0,borderRadius:12,marginRight:8},onClick:()=>e(-1),"aria-label":"Back",children:w.jsx("span",{className:"icon-close",children:w.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[w.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),w.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})}),w.jsx("span",{className:"app-title",style:{flex:1,textAlign:"center",fontWeight:700,fontSize:20},children:"News"}),w.jsx("button",{className:"action-btn",style:{minWidth:44,minHeight:44,padding:0,borderRadius:12,marginLeft:8},"aria-label":"Share",onClick:()=>navigator.share?navigator.share({title:t.title,text:t.summary,url:window.location.href}):window.open(window.location.href,"_blank"),children:w.jsx("span",{className:"icon-group",children:w.jsxs("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[w.jsx("circle",{cx:"17",cy:"5",r:"2"}),w.jsx("circle",{cx:"5",cy:"12",r:"2"}),w.jsx("circle",{cx:"17",cy:"19",r:"2"}),w.jsx("path",{d:"M7 13.5l8 4M15 6.5l-8 4"})]})})})]}),t.bannerImageUrl&&w.jsx("img",{src:t.bannerImageUrl,alt:t.title,style:{width:"100%",maxHeight:220,objectFit:"cover",borderRadius:20,margin:"1.2rem 0 0.8rem 0"}}),w.jsx("div",{style:{fontWeight:700,fontSize:28,margin:"1.2rem 0 0.5rem 0",padding:"0 1.2rem",color:"var(--text-main)"},children:t.title}),w.jsxs("div",{style:{display:"flex",alignItems:"center",fontSize:15,color:"#888",marginBottom:12,padding:"0 1.2rem"},children:[w.jsx("span",{style:{fontWeight:500,marginRight:8},children:t.source}),w.jsx("span",{className:"news-date",children:new Date(t.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]}),w.jsx("div",{style:{fontSize:17,lineHeight:1.7,color:"var(--text-main)",padding:"0 1.2rem 1.2rem 0",marginBottom:20},children:t.body})]}):w.jsx("main",{style:{maxWidth:350,margin:"0 auto",padding:"2rem 1.2rem"},children:w.jsx("div",{children:"News not found."})})},Nx=()=>{const[r,e]=$.useState(""),[t,s]=$.useState(""),[o,l]=$.useState(""),h=Lr(),f=async y=>{if(y.preventDefault(),!r||!t){l("Please enter both fields.");return}l("");try{await A1(ls,r,t),localStorage.setItem("nexcoin_logged_in","1"),h("/WebApp",{replace:!0})}catch(E){l(E.message)}},m=async()=>{l("");const y=new er;try{await E_(ls,y),h("/WebApp",{replace:!0})}catch{l("Google login failed.")}};return w.jsx("div",{className:"main-bg login-bg",children:w.jsxs("div",{className:"login-center-container",children:[w.jsxs("div",{className:"login-card",children:[w.jsxs("div",{className:"login-logo-wrap",children:[w.jsx("img",{src:Lf,alt:"CollabriaNexus Logo",className:"login-logo"}),w.jsx("div",{className:"login-welcome neon-green",children:"Welcome to CollabriaNexus!"})]}),w.jsxs("form",{className:"login-form",onSubmit:f,autoComplete:"off",children:[w.jsx("label",{className:"login-label",htmlFor:"email",children:"Email or Username"}),w.jsx("input",{id:"email",className:"login-input",type:"text",autoComplete:"username",value:r,onChange:y=>e(y.target.value),placeholder:"Enter your email or username"}),w.jsx("label",{className:"login-label",htmlFor:"password",children:"Password"}),w.jsx("input",{id:"password",className:"login-input",type:"password",autoComplete:"current-password",value:t,onChange:y=>s(y.target.value),placeholder:"Enter your password"}),o&&w.jsx("div",{className:"login-error neon-green",children:o}),w.jsx("button",{className:"login-btn neon-green-btn",type:"submit",tabIndex:0,"aria-label":"Login",onMouseDown:y=>{const E=y.currentTarget,S=document.createElement("span"),I=Math.max(E.clientWidth,E.clientHeight),b=I/2;S.classList.add("ripple"),S.style.width=S.style.height=`${I}px`,S.style.left=`${y.clientX-E.getBoundingClientRect().left-b}px`,S.style.top=`${y.clientY-E.getBoundingClientRect().top-b}px`,E.appendChild(S),S.addEventListener("animationend",()=>S.remove())},children:"Login"})]}),w.jsxs("button",{type:"button",className:"google-btn",onClick:m,"aria-label":"Sign in with Google",children:[w.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"google-icon"}),w.jsx("span",{children:"Sign in with Google"})]}),w.jsxs("div",{className:"login-links",children:[w.jsx("a",{href:"#",className:"login-link neon-green",children:"Forgot password?"}),w.jsx("span",{className:"login-divider"}),w.jsx(Ic,{to:"/signup",className:"login-link",children:"Sign up"})]})]}),w.jsx("footer",{className:"login-footer",children:w.jsx("span",{className:"footer-text",children:"@CollabriaNexusBot"})})]})})},Ju=W0();I_();async function dv(r,e=null){const t=_c(Ju,"users",r.uid);if((await mp(t)).exists())console.log("User already exists.");else{const o=new Date().toISOString(),l=Dx(r.displayName||"user",r.uid);await vx(t,{userId:r.uid,email:r.email||null,username:r.displayName||"anonymous",phone:r.phoneNumber||"",passwordHash:null,profilePicture:r.photoURL||"avatar.png",referralCode:l,referredBy:null,wallet:{walletAddress:"",balance:0,transactions:[]},mining:{totalMined:0,currentSession:null,streak:{daysActive:0,lastActiveDate:null},groupMining:null},achievements:{level:1,badges:[],rank:null,dailyChallengesCompleted:0},security:{twoFactorEnabled:!1,lastLoginIP:null,deviceId:null,location:null},kyc:{status:"not_started",fullName:r.displayName||null,dob:null,idType:null,idNumber:null,documentImage:null,selfieImage:null,verifiedAt:null},preferences:{language:"en",darkMode:!1,notificationsEnabled:!0},accountStatus:{createdAt:o,lastActive:o,isBanned:!1,banReason:null}}),await bx(e,r.uid),console.log("New user document created.")}}function Dx(r,e){const t=r.substring(0,3).toUpperCase(),s=e.slice(-5).toUpperCase(),o=Math.floor(Math.random()*90+10);return`${t}${s}${o}`}async function bx(r,e){const t=query(collection(Ju,"users"),where("referralCode","==",r)),s=await mp(t);if(s.empty)throw new Error("Referral code not found");const l=s.docs[0].id;await hv(_c(Ju,"users",l),{referredUsers:wx(e)}),await hv(_c(Ju,"users",e),{referredBy:r})}const Ox=()=>{const[r,e]=$.useState(""),[t,s]=$.useState(""),[o,l]=$.useState(""),[h,f]=$.useState(""),[m,y]=$.useState(""),E=Lr(),S=async b=>{if(b.preventDefault(),!r||!t||!o){y("Please fill all fields.");return}if(t!==o){y("Passwords do not match.");return}y("");try{const N=await R1(ls,r,t);await dv({...N.user,referralCodeInput:h.trim()||null}),E("/WebApp",{replace:!0})}catch(N){y(N.message)}},I=async()=>{y("");const b=new er;try{const N=await E_(ls,b);await dv({...N.user,referralCodeInput:h.trim()||null}),E("/WebApp",{replace:!0})}catch{y("Google signup failed.")}};return w.jsx("div",{className:"main-bg login-bg",children:w.jsxs("div",{className:"login-center-container",children:[w.jsxs("div",{className:"login-card",children:[w.jsxs("div",{className:"login-logo-wrap",children:[w.jsx("img",{src:Lf,alt:"CollabriaNexus Logo",className:"login-logo"}),w.jsx("div",{className:"login-welcome neon-green",children:"Create your CollabriaNexus account"})]}),w.jsxs("form",{className:"login-form",onSubmit:S,autoComplete:"off",children:[w.jsx("label",{className:"login-label",htmlFor:"signup-email",children:"Email"}),w.jsx("input",{id:"signup-email",className:"login-input",type:"email",autoComplete:"username",value:r,onChange:b=>e(b.target.value),placeholder:"Enter your email"}),w.jsx("label",{className:"login-label",htmlFor:"signup-password",children:"Password"}),w.jsx("input",{id:"signup-password",className:"login-input",type:"password",autoComplete:"new-password",value:t,onChange:b=>s(b.target.value),placeholder:"Enter your password"}),w.jsx("label",{className:"login-label",htmlFor:"signup-password2",children:"Confirm Password"}),w.jsx("input",{id:"signup-password2",className:"login-input",type:"password",autoComplete:"new-password",value:o,onChange:b=>l(b.target.value),placeholder:"Confirm your password"}),w.jsx("label",{className:"login-label",htmlFor:"signup-referral",children:"Referral Code (optional)"}),w.jsx("input",{id:"signup-referral",className:"login-input",type:"text",value:h,onChange:b=>f(b.target.value),placeholder:"Enter referral code"}),m&&w.jsx("div",{className:"login-error neon-green",children:m}),w.jsx("button",{className:"login-btn neon-green-btn",type:"submit",tabIndex:0,"aria-label":"Sign up",onMouseDown:b=>{const N=b.currentTarget,z=document.createElement("span"),F=Math.max(N.clientWidth,N.clientHeight),q=F/2;z.classList.add("ripple"),z.style.width=z.style.height=`${F}px`,z.style.left=`${b.clientX-N.getBoundingClientRect().left-q}px`,z.style.top=`${b.clientY-N.getBoundingClientRect().top-q}px`,N.appendChild(z),z.addEventListener("animationend",()=>z.remove())},children:"Sign up"})]}),w.jsxs("button",{type:"button",className:"google-btn",onClick:I,"aria-label":"Sign up with Google",children:[w.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"google-icon"}),w.jsx("span",{children:"Sign up with Google"})]}),w.jsx("div",{className:"login-links",children:w.jsx("a",{href:"#",className:"login-link",onClick:b=>{b.preventDefault(),E("/login")},children:"Already have an account? Login"})})]}),w.jsx("footer",{className:"login-footer",children:w.jsx("span",{className:"footer-text",children:"@CollabriaNexusBot"})})]})})};function Vx({name:r,active:e}){return w.jsx("span",{className:"material-symbols-outlined"+(e?" active-icon":""),style:{fontSize:32},children:r})}function Lx(){const r=ar(),e=[{to:"/profile",name:"account_box",label:"Profile"},{to:"/WebApp",name:"home",label:"Home"},{to:"/wallet",name:"newsmode",label:"Blog"},{to:"/more",name:"more_vert",label:"More"}];return w.jsx("nav",{className:"bottom-nav",children:e.map(t=>w.jsx(Ic,{to:t.to,className:r.pathname===t.to?"nav-link active":"nav-link",children:w.jsx(Vx,{name:t.name,active:r.pathname===t.to})},t.to))})}function Mx(){return w.jsx("div",{className:"page-content",children:w.jsx(XC,{})})}function co({children:r}){const{user:e,loading:t}=qC();return t?w.jsx("div",{children:"Loading..."}):e?r:w.jsx(iT,{to:"/login",replace:!0})}function jx(){const[r,e]=$.useState(0);WT(),$T();const t=ar(),s=t.pathname==="/login"||t.pathname==="/signup";return w.jsxs(w.Fragment,{children:[w.jsx("div",{style:{position:"fixed",inset:0,zIndex:0,pointerEvents:"none"},children:w.jsx(Fa,{})}),w.jsxs("div",{className:"app-container",style:{position:"relative",zIndex:1},children:[w.jsxs(oT,{children:[w.jsx(Rr,{path:"/signup",element:w.jsx(Ox,{})}),w.jsx(Rr,{path:"/login",element:w.jsx(Nx,{})}),w.jsx(Rr,{path:"/WebApp",element:w.jsx(co,{children:w.jsx(tR,{})})}),w.jsx(Rr,{path:"/profile",element:w.jsx(co,{children:w.jsx(Tx,{})})}),w.jsx(Rr,{path:"/wallet",element:w.jsx(co,{children:w.jsx(Rx,{})})}),w.jsx(Rr,{path:"/blog/:id",element:w.jsx(co,{children:w.jsx(xx,{})})}),w.jsx(Rr,{path:"/more",element:w.jsx(co,{children:w.jsx(Mx,{})})}),w.jsx(Rr,{path:"/news/:id",element:w.jsx(co,{children:w.jsx(Px,{})})})]}),!s&&w.jsx(Lx,{})]})]})}pE.createRoot(document.getElementById("root")).render(w.jsx($.StrictMode,{children:w.jsx(PT,{children:w.jsx(jx,{})})}));
